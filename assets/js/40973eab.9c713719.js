"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3355],{1962:e=>{e.exports=JSON.parse('{"blogPosts":[{"id":"blinky","metadata":{"permalink":"/TheBidouilleur.xyz/blog/blinky","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2023-06-29-Blinky/index.md","source":"@site/blog/2023-06-29-Blinky/index.md","title":"Blinky - Un petit girophare connect\xe9","description":"Blinky est un petit gyrophare connect\xe9 par Enix qui peut vous faciliter la vie durant vos astreintes.","date":"2023-06-29T00:00:00.000Z","formattedDate":"29 juin 2023","tags":[],"readingTime":4.51,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Blinky - Un petit girophare connect\xe9","slug":"blinky","description":"Blinky est un petit gyrophare connect\xe9 par Enix qui peut vous faciliter la vie durant vos astreintes."},"nextItem":{"title":"QuteBrowser - Un navigateur bas\xe9 sur Vim","permalink":"/TheBidouilleur.xyz/blog/QuteBrowser"}},"content":"Gr\xe2ce \xe0 [ZWindler et sa s\xe9rie de threads Twitter \xe0 propos du reverse d\'un petit appareil connect\xe9](https://blog.zwindler.fr/2023/06/16/reverse-blinky-enix-part1/), j\'ai d\xe9couvert le projet Blinky. Il s\'agit d\'un petit gyrophare connect\xe9 qui peut vous faciliter la vie durant vos astreintes.\\n\\n:::note En B\xeata !\\n\\nLe projet Blinky est encore en cours de d\xe9veloppement, il est donc possible que certaines choses changent d\'ici la sortie de la version d\xe9finitive.\\n\\n:::\\n\\nJ\'ai alors d\xe9cid\xe9 de remplir le [formulaire pour \xeatre b\xeata-testeur](https://www.getblinky.io/) et j\'ai re\xe7u le mien 1-2 semaines plus tard.\\n\\nPendant le d\xe9lai d\'attente, j\'ai commenc\xe9 \xe0 regarder et \xe0 me renseigner *(via le thread de ZWindler et en posant des questions)* sur le fonctionnement de l\'appareil et sur les possibilit\xe9s qu\'il offre.\\n\\nJ\'ai eu le temps de m\'amuser sur MicroPython *(Firmware pour lancer du Python sur ESP32)*, je pr\xe9pare une page dessus pour vous montrer ce que j\'ai fait, mais avant \xe7a : on va parler du Blinky !\\n\\n## Le Blinky\\n\\nLe Blinky est pens\xe9, produit et d\xe9velopp\xe9 par [Enix](https://www.enix.io/fr), une soci\xe9t\xe9 de services informatiques *(SSII)* qui propose des services d\'infog\xe9rance, de conseil et d\'expertise principalement autour du cloud et de Kubernetes. Ils proposent r\xe9guli\xe8rement des talks et des formations sur ces sujets.\\n\\nDe ce que j\'ai compris, ils ont d\xe9velopp\xe9 une arm\xe9e de gyrophares connect\xe9s pour notifier d\'\xe9ventuels probl\xe8mes/\xe9v\xe8nements sur les infrastructures de leurs clients.\\n\\nL\'id\xe9e me pla\xeet beaucoup, et je trouve \xe7a tr\xe8s malin de leur part et peut-\xeatre m\xeame un peu plus efficace que les traditionnels mails. *(Qui sont souvent noy\xe9s dans la masse)*\\n\\nUne fois le Blinky re\xe7u, j\'ai pu le tester et le configurer. Je vais vous montrer comment faire.\\n\\n## Configuration\\n\\n![Blinky + Mon Bureau = <3](./Blinky-bureau.jpg)\\n\\nLa connexion au Blinky se fait via WebSerial, un peu comme l\'IDE Arduino ou PlatformIO. Il faut donc utiliser un navigateur compatible, comme Chromium ou Edge. Il vous faudra vous rendre sur la page de configuration du Blinky et cr\xe9er un compte\xa0: [app.getblinky.io](https://app.getblinky.io).\\n\\nD\xe8s la premi\xe8re connexion, le Blinky va vous demander de le configurer. Il faut alors se connecter \xe0 un r\xe9seau WiFi et renseigner les informations de connexion depuis la page de configuration du Blinky.\\n\\n:::caution Fr\xe9quence WiFi\\n\\n\xe0 noter que le Blinky ne supporte que les fr\xe9quences 2.4GHz *(cela est d\xfb \xe0 la puce ESP32 qu\'il embarque)* et ne supporte pas les fr\xe9quences 5GHz.\\n\\n:::\\n\\n![Association WiFi](./associate-blinky.png)\\n\\nLe Blinky va se connecter \xe0 votre Wifi et vous pourrez l\'associer \xe0 une organisation. *(Si vous n\'en avez pas, vous pouvez en cr\xe9er une)*\\n\\n\xe0 retenir que la LED du dessus affiche le statut de connexion au WiFi et que celle du dessous affiche les animations de notification.\\n\\n*Au d\xe9marrage, voici ces diff\xe9rentes animations (attention aux \xe9pileptiques) pour vous informer si le Blinky se connecte bien \xe0 votre WiFi:*\\n\\n![Animation au d\xe9marrage du Blinky](./start-animation.gif)\\n\\n\xc0 la fin de l\'initialisation, la LED du dessus devrait \xeatre verte. L\'\xe9quipe d\'Enix a pr\xe9vu une am\xe9lioration pour s\'assurer que la LED du dessus ne puisse pas se voir depuis la partie blanche. Pour l\'instant, j\'envisage de d\xe9monter le Blinky et rajouter une impression 3D ou un peu de scotch noir pour \xe9viter que la lumi\xe8re ne se diffuse trop.\\n\\nEt, une fois connect\xe9, vous pouvez cr\xe9er des animations depuis un \xe9diteur en ligne et les pr\xe9visualiser sur votre navigateur *(J\'aurais aim\xe9 pouvoir les pr\xe9visualiser directement sur le Blinky, mais ce n\'est pas encore possible)*.\\n\\n![Editeur d\'animations](./pattern-creator.gif)\\n\\nL\'\xe9diteur est tr\xe8s simple \xe0 utiliser et permet de cr\xe9er des animations tr\xe8s rapidement, mais je ne peux pas m\'emp\xeacher de penser \xe0 un \xe9diteur plus avanc\xe9 qui permettrait de cr\xe9er des animations \xe0 partir de code mais je peux comprendre que ce ne soit pas la priorit\xe9.\\n\\nPour l\'instant, les couleurs visibles sur le site ne sont pas les m\xeames que celles affich\xe9es sur le Blinky *(ex avec un Blinky Rouge qui est plut\xf4t rose)*, mais cela devrait \xeatre corrig\xe9 dans une prochaine version.\\n\\n![Un rouge pas tr\xe8s rouge](./Rose-PasRouge.jpg)\\n\\n## Int\xe9gration\\n\\nIl est important de noter que le Blinky seul ne va pas se connecter \xe0 vos services pour r\xe9cup\xe9rer des informations. C\'est l\'application externe *(app.getblinky.io)* qui va envoyer l\'instruction au Blinky pour qu\'il affiche une animation. *(Peut-\xeatre un jour une version auto-h\xe9bergeable pour les services sensibles ?)*\\n\\nLa principale int\xe9gration est celle du WebHook:\\n\\n![WebHook](./webhook-example.png)\\n\\nUne requ\xe8te *(POST ou GET, \xe7a revient au m\xeame)* est envoy\xe9e \xe0 l\'URL du WebHook et l\'animation li\xe9e est jou\xe9e sur le Blinky.\\n\\n*Petite id\xe9e : Un webhook g\xe9n\xe9rique qui permettrait de choisir l\'animation \xe0 jouer en fonction du JSON envoy\xe9 (m\xeame id\xe9e pour choisir le groupe de Blinky)*.\\n\\nL\'int\xe9gration Prometheus se fait \xe0 partir de AlertManager. Celle-ci s\'appuie sur un Webhook et peut avoir des labels en tant que conditions. Cela permet de faire des notifications diff\xe9rentes en fonction de l\'importance de l\'alerte.\\n\\nJe n\'ai pas encore eu l\'occasion de tester, mais \xe7a sera fait prochainement.\\n\\n![Prometheus](./Prometheus-integration.png)\\n\\nEt, pour finir, l\'int\xe9gration avec Gitlab *(qui supporte plusieurs animations en fonction de l\'\xe9v\xe8nement)* :\\n\\n![Int\xe9gration Gitlab](./gitlab.png)\\n\\n*(Test\xe9 et approuv\xe9 !)*.\\n\\n## Conclusion\\n\\nPleins d\'am\xe9liorations sont pr\xe9vus pour le Blinky, que \xe7a soit les possibilit\xe9s d\'int\xe9gration ou le design de l\'appareil. Je suis tr\xe8s content de l\'avoir re\xe7u et je suis impatient de voir ce que l\'\xe9quipe d\'Enix va nous proposer.\\n\\nJ\'ai personnellement vraiment h\xe2te de la sortie du SDK pour pouvoir le bidouiller un peu plus en profondeur et voir de nouvelles int\xe9grations comme Zabbix, Home-assistant, Gotify ou m\xeame un petit serveur MQTT."},{"id":"QuteBrowser","metadata":{"permalink":"/TheBidouilleur.xyz/blog/QuteBrowser","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2023-06-26-QuteBrowser/index.md","source":"@site/blog/2023-06-26-QuteBrowser/index.md","title":"QuteBrowser - Un navigateur bas\xe9 sur Vim","description":"QuteBrowser est un navigateur bas\xe9 sur Vim qui permet de naviguer sur le web sans utiliser la souris (ou presque)","date":"2023-06-26T00:00:00.000Z","formattedDate":"26 juin 2023","tags":[{"label":"QuteBrowser","permalink":"/TheBidouilleur.xyz/blog/tags/qute-browser"},{"label":"Vim","permalink":"/TheBidouilleur.xyz/blog/tags/vim"},{"label":"Firefox","permalink":"/TheBidouilleur.xyz/blog/tags/firefox"}],"readingTime":6.04,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"QuteBrowser - Un navigateur bas\xe9 sur Vim","slug":"QuteBrowser","tags":["QuteBrowser","Vim","Firefox"],"description":"QuteBrowser est un navigateur bas\xe9 sur Vim qui permet de naviguer sur le web sans utiliser la souris (ou presque)"},"prevItem":{"title":"Blinky - Un petit girophare connect\xe9","permalink":"/TheBidouilleur.xyz/blog/blinky"},"nextItem":{"title":"IPFS - un protocole pour archiver et partager des fichiers","permalink":"/TheBidouilleur.xyz/blog/ipfs"}},"content":"Il est tard, je suis fatigu\xe9, et dans ces moments, je n\'ai qu\'une envie : apprendre une bricole de plus qui me servira peut-\xeatre un jour *(ou pas)*.\\n\\nSur les communaut\xe9s de Tiling *(i3, tmux, sway \u2026)*, on entend souvent parler de QuteBrowser. C\'est un navigateur bas\xe9 sur Vim qui permet de naviguer sur le web sans utiliser la souris. Il est tr\xe8s l\xe9ger et tr\xe8s rapide.\\n\\nJe n\'ai eu qu\'une br\xe8ve d\xe9mo de ce navigateur, mais il m\'a sembl\xe9 tr\xe8s int\xe9ressant. Je me suis donc dit que j\'allais l\'installer et le tester.\\n\\nUn paquet NixOS existe pour QuteBrowser, je l\'installe donc et \u2026\\n\\n```bash\\n\u279c  ~ nix-shell -p qutebrowser\\n\\n[nix-shell:~]$ qutebrowser \\nGtk-Message: 16:00:29.759: Failed to load module \\"canberra-gtk-module\\"\\nGtk-Message: 16:00:29.760: Failed to load module \\"canberra-gtk-module\\"\\n16:00:29 WARNING: qglx_findConfig: Failed to finding matching FBConfig for QSurfaceFormat(version 2.0, options QFlags<QSurfaceFormat::FormatOption>(), depthBufferSize -1, redBufferSize 1, greenBufferSize 1, blueBufferSize 1, alphaBufferSize -1, stencilBufferSize -1, samples -1, swapBehavior QSurfaceFormat::SingleBuffer, swapInterval 1, colorSpace QSurfaceFormat::DefaultColorSpace, profile  QSurfaceFormat::NoProfile)\\n16:00:29 WARNING: qglx_findConfig: Failed to finding matching FBConfig for QSurfaceFormat(version 2.0, options QFlags<QSurfaceFormat::FormatOption>(), depthBufferSize -1, redBufferSize 1, greenBufferSize 1, blueBufferSize 1, alphaBufferSize -1, stencilBufferSize -1, samples -1, swapBehavior QSurfaceFormat::SingleBuffer, swapInterval 1, colorSpace QSurfaceFormat::DefaultColorSpace, profile  QSurfaceFormat::NoProfile)\\n16:00:29 CRITICAL: Could not initialize GLX\\nFatal Python error: Aborted\\n\\nCurrent thread 0x00007f46eaa85740 (most recent call first):\\n  File \\"/nix/store/3zyp407rmghww5m9afxc0nirky1wf6fj-qutebrowser-2.5.4/lib/python3.10/site-packages/qutebrowser/app.py\\", line 558 in __init__\\n  File \\"/nix/store/3zyp407rmghww5m9afxc0nirky1wf6fj-qutebrowser-2.5.4/lib/python3.10/site-packages/qutebrowser/app.py\\", line 95 in run\\n  File \\"/nix/store/3zyp407rmghww5m9afxc0nirky1wf6fj-qutebrowser-2.5.4/lib/python3.10/site-packages/qutebrowser/qutebrowser.py\\", line 245 in main\\n  File \\"/nix/store/3zyp407rmghww5m9afxc0nirky1wf6fj-qutebrowser-2.5.4/bin/.qutebrowser-wrapped\\", line 34 in <module>\\n\\nExtension modules: PyQt5.QtCore, PyQt5.QtGui, PyQt5.QtWidgets, markupsafe._speedups, yaml._yaml, PyQt5.QtNetwork, PyQt5.QtQml, PyQt5.QtSql, PyQt5.QtOpenGL, PyQt5.QtDBus, PyQt5.QtPrintSupport, PyQt5.QtWebEngineCore, PyQt5.QtWebChannel, PyQt5.QtWebEngineWidgets, PyQt5.QtWebEngine (total: 15)\\nAborted (core dumped)\\n```\\n\\n\u2026 c\'est le drame ! Je vais ouvrir une issue sur le d\xe9p\xf4t NixOS pour signaler le probl\xe8me. Je crois que je vais devoir l\'installer autrement.\\n\\nPar chance, un paquet QuteBrowser existe sur Debian, Fedora et Arch. *(Des versions pr\xe9-compil\xe9es pour Windows et Mac sont disponibles sur les Github Releases)*\\n\\n## Installation\\n\\n```mdx-code-block\\nimport Tabs from \'@theme/Tabs\';\\nimport TabItem from \'@theme/TabItem\';\\n\\n<Tabs>\\n  <TabItem value=\\"Debian\\" label=\\"Debian\\" default>\\n\\n    apt install qutebrowser\\n\\n  </TabItem>\\n  <TabItem value=\\"Fedora\\" label=\\"Fedora\\">\\n\\n    dnf install qutebrowser\\n\\n  </TabItem>\\n  <TabItem value=\\"Nix\\" label=\\"Nix\\">\\n\\n    nix-env -i qutebrowser -v\\n\\n  </TabItem>\\n</Tabs>\\n```\\n\\n## D\xe9couvrir QuteBrowser\\n\\n### Navigation classique\\n\\nQuand on lance QuteBrowser pour la premi\xe8re fois, on arrive sur DuckDuckGo. Vous pouvez tr\xe8s bien utiliser la souris pour naviguer, mais ce n\'est pas le but.\\n\\nPour s\xe9lectionner un lien, on utilise la touche `f` qui va afficher des lettres sur les liens. On tape la lettre correspondante pour s\xe9lectionner le lien.\\n\\n![Moteur de recherche](/img/QuteBrowser/duckduckgo.png)\\n\\nEn appuyant sur `g`, je me positionne alors sur le champ de recherche. Je peux alors taper ma recherche et appuyer sur `Entr\xe9e` pour lancer la recherche.\\n\\nD\xe8s lors que notre curseur est sur un champ `<input>` nous passons en mode `INSERT` et nous pouvons taper du texte.\\n\\nPour revenir sur la page pr\xe9c\xe9dente, on utilise la touche `H` et pour retourner sur la page suivante, on utilise la touche `L`.\\n\\n### Onglets ?\\n\\nSi vous n\'avez pas vu ma pr\xe9sentation de Vim *([Disponible ici](https://vim.avec.une-tasse-de.cafe))*, vous ne savez peut-\xeatre pas que Vim est capable de cr\xe9er des onglets.\\n\\nPour cr\xe9er un onglet, on utilise la touche `O` qui va nous pr\xe9remplir la barre d\'adresse avec `:open -t`. On peut alors taper l\'adresse du site ou un mot cl\xe9 pour lancer une recherche.\\n\\n![Nouvel onglet](/img/QuteBrowser/newtab.png)\\n\\nUne fois que vous avez plusieurs onglets, vous pouvez naviguer entre eux avec les touches `J` et `K`. *(Pas comme dans Vim)*\\n\\n### Bookmarks\\n\\nComme n\'importe quel navigateur, QuteBrowser permet de sauvegarder des favoris. Pour ajouter un favori, on utilise la touche `B` qui va nous pr\xe9remplir la barre d\'adresse avec `:bookmark-add`. On peut alors taper l\'adresse du site ou un mot cl\xe9 pour lancer une recherche.\\n\\nIl est possible d\'ajouter le site sur lequel on se trouve en utilisant la touche `m` qui va ouvrir un menu pour choisir le nom du favori. Il est possible de l\'ajouter rapidement en utilisant `M` qui va prendre le titre comme nom du favori.\\n\\nAvec la commande `:bookmark-del`, on peut supprimer un favori *(les tabulations sont possibles pour compl\xe9ter le nom du favori)*. Et nous pouvons ouvrir la liste de nos favoris via la commande `:bookmark-list` ou `Sq`\\n\\n## Astuce de mi-temps\\n\\nEn reprenant l\'exemple de la commande `sQ`, QuteBrowser peut vous proposer les raccourcis possibles en ne tapant que `S`\\n\\n![Compl\xe9tion Bookmarks](/img/QuteBrowser/completions.png)\\n\\nPratique quand on ne se souvient que du d\xe9but de la combinaison.\\n\\nIl est aussi possible de retrouver les combinaisons de touches de chaque commande depuis la console.\\n\\n![Liste des touches](/img/QuteBrowser/liste-touches.png)\\n\\n## Configuration\\n\\nLa partie configuration de QuteBrowser est assez complexe. Avant la version 1.0.0 *(Nous sommes \xe0 la 2.5.0)*, QuteBrowser disposait d\'un fichier d\'un ficher `qutebrowser.conf` qui permettait de configurer le navigateur. Depuis la version 1.0.0, QuteBrowser utilise un fichier `config.py` qui est un fichier Python.\\n\\nOn aime ou on aime pas, mais c\'est comme \xe7a. Je vous invite \xe0 lire la documentation officielle pour en savoir plus.\\n\\nDans ce fichier de configuration, nous avons un objet `config` dans la variable `c`. Cet objet contient tous les param\xe8tres de configuration de QuteBrowser. Pour les modifier, il suffit de faire `c.nom_du_parametre = valeur`.\\n\\nPar exemple, pour changer la page d\'accueil, il suffit de faire `c.url.start_pages = \\"https://www.ecosia.org/?c=fr\\"`.\\n\\n:::note Charger la configuration GUI\\n\\nEn plus du fichier `config.py`, il est possible de d\xe9finir quelques param\xe8tres *(avec moins de libert\xe9)* sur l\'interface graphique *(accessibles depuis l\'url `qute://settings/`)*\\n\\nIl est tout \xe0 fait possible de cumuler les deux m\xe9thodes de configuration.\\n\\nPour cela, il vous faut ajouter la ligne suivante dans votre fichier `config.py` pour charger la configuration GUI.\\n\\n```python\\nconfig.load_autoconfig()\\n```\\n\\n:::\\n\\n## Moteur de recherche\\n\\nQuteBrowser utilise DuckDuckGo en tant que moteur de recherche par d\xe9faut. Comme pour Firefox, il est possible d\'utiliser plusieurs moteurs de recherche en fonction d\'un pr\xe9fixe.\\n\\n```python\\nc.url.searchengines = {\\n    \'DEFAULT\':  \'https://www.ecosia.org/search?method=index&q={}\',\\n    \'!a\':       \'https://www.amazon.fr/s?k={}\',\\n    \'!d\':       \'https://duckduckgo.com/?ia=web&q={}\',\\n    \'!gh\':      \'https://github.com/search?o=desc&q={}&s=stars\',\\n    \'!gist\':    \'https://gist.github.com/search?q={}\',\\n    \'!gn\':      \'https://news.google.com/search?q={}\',\\n    \'!m\':       \'https://www.google.com/maps/search/{}\',\\n    \'!r\':       \'https://www.reddit.com/search?q={}\',\\n    \'!tw\':      \'https://twitter.com/search?q={}\',\\n    \'!w\':       \'https://fr.wikipedia.org/wiki/{}\',\\n    \'!yt\':      \'https://www.youtube.com/results?search_query={}\'\\n}\\n```\\n\\nAinsi, en tapant `:open -t !gh NixPkgs`, je vais lancer une recherche sur GitHub avec le mot `NixPkgs`.\\n\\n## Une r\xe9elle alternative ?\\n\\nEt c\'est l\xe0 le point le plus important. QuteBrowser est-il une r\xe9elle alternative \xe0 Firefox ou Chrome ?\\n\\nLa r\xe9ponse est **non**, de nombreux sites auront un comportement \xe9trange ou ne fonctionneront pas du tout. QuteBrowser dispose de toutes les fonctionnalit\xe9s n\xe9cessaires \xe0 une navigation quotidienne, mais il ne faut pas s\'attendre \xe0 pouvoir utiliser QuteBrowser pour tout.\\n\\nUne alternative \xe0 QuteBrowser est [Tridactyl](https://addons.mozilla.org/fr/firefox/addon/tridactyl-vim/), une extension pour Firefox qui permet de naviguer avec Vim. C\'est une extension tr\xe8s compl\xe8te et tr\xe8s bien faite couplant Firefox (et sa compatibilit\xe9) avec Vim.\\n\\nLes raccourcis sont l\xe9g\xe8rement diff\xe9rents, mais on retrouve la plupart des fonctionnalit\xe9s de QuteBrowser.\\n\\n![Tridactyl](https://raw.githubusercontent.com/tridactyl/tridactyl/master/doc/AMO_screenshots/trishowcase.gif)\\n\\n## Conclusion\\n\\nQuand on a l\'habitude de naviguer avec Vim, QuteBrowser est un navigateur tr\xe8s agr\xe9able \xe0 utiliser. Il est tr\xe8s l\xe9ger et tr\xe8s rapide. Il est aussi tr\xe8s facile \xe0 configurer. La documentation est tr\xe8s compl\xe8te et hyper bien faite.\\nJe n\'ai pas non-plus parl\xe9 des userscripts qui permettent d\'ajouter des fonctionnalit\xe9s \xe0 QuteBrowser *(comme des extensions)* et qui sont vraiment simples \xe0 cr\xe9er et \xe0 installer.\\n\\n\xc9tant constamment sur Firefox *(Perso et travail)*, je ne peux pas utiliser QuteBrowser au quotidien. Tridactyl est alors la meilleure alternative et celle que je vais utiliser pour le moment."},{"id":"ipfs","metadata":{"permalink":"/TheBidouilleur.xyz/blog/ipfs","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2023-05-16-ipfs/index.md","source":"@site/blog/2023-05-16-ipfs/index.md","title":"IPFS - un protocole pour archiver et partager des fichiers","description":"Via cette page, vous d\xe9couvrirez ce qu\'est l\'IPFS et comment partager vos fichiers pour qu\'ils deviennent incensurables et d\xe9centralis\xe9s","date":"2023-05-16T00:00:00.000Z","formattedDate":"16 mai 2023","tags":[{"label":"Stockage","permalink":"/TheBidouilleur.xyz/blog/tags/stockage"}],"readingTime":13.195,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"ipfs","title":"IPFS - un protocole pour archiver et partager des fichiers","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["Stockage"],"description":"Via cette page, vous d\xe9couvrirez ce qu\'est l\'IPFS et comment partager vos fichiers pour qu\'ils deviennent incensurables et d\xe9centralis\xe9s"},"prevItem":{"title":"QuteBrowser - Un navigateur bas\xe9 sur Vim","permalink":"/TheBidouilleur.xyz/blog/QuteBrowser"},"nextItem":{"title":"Simple DebianRepository - D\xe9ployer un d\xe9p\xf4t Debian en 2min","permalink":"/TheBidouilleur.xyz/blog/DebianRepository"}},"content":"L\'IPFS *(InterPlanetary File System)* est un protocole **P2P** *(Peer to Peer)* permettant de diffuser des fichiers de mani\xe8re d\xe9centralis\xe9e.\\n\\nLa mention \\"InterPlanetary\\" nous donne l\'objectif premier de l\'IPFS : surmonter les difficult\xe9s techniques et les contraintes de la communication entre plan\xe8tes.\\n\\n\x3c!--more--\x3e\\n\\nEn effet, le jour o\xf9 Mars sera colonis\xe9e, le web devra s\'adapter pour permettre \xe0 tous de pouvoir acc\xe9der au m\xeame internet. Car si nous arrivons \xe0 afficher Wikip\xe9dia en quelques millisecondes sur nos ordinateurs, **4min** seront n\xe9cessaires depuis Mars *dans les meilleures conditions* et **48 min** *si vous \xeates malchanceux*.\\n\\nCes 48 minutes serviront uniquement \xe0 afficher **une seule page**, imaginez alors pour une vid\xe9o YouTube ou une s\xe9rie.\\n\\nC\'est \xe0 ce moment pr\xe9cis que l\'IPFS entre en sc\xe8ne. Comme c\'est un syst\xe8me de partage de fichiers entre ordinateurs qui fonctionne **sans serveurs centraux**, il ne sera pas toujours n\xe9cessaire de communiquer avec un serveur terrien pour lire une page web. Il suffira de demander \xe0 un ordinateur proche de nous d\'envoyer le fichier.\\n\\nCe protocole est un m\xe9lange entre le *World Wide Web* et Bit Torrent avec lequel un m\xeame fichier peut \xeatre partag\xe9 par plusieurs ordinateurs. Le r\xe9seau IPFS est donc une carte depuis laquelle nous allons demander un fichier (ou site) et le t\xe9l\xe9charger depuis un serveur qui n\'est pas forc\xe9ment le serveur dont provient la donn\xe9e.\\n\\n[![Explication R\xe9seau IPFS d\xe9centralisation](ipfs-decentralisation.png)](https://www.reddit.com/r/ipfs/comments/q76uil/what_is_ipfs_what_does_it_mean_for_the_internet/)\\n\\n## Comment acc\xe9der \xe0 un fichier ?\\n\\nEn Web classique, nous demandons \xe0 un serveur un fichier sp\xe9cifique via une URL qui renvoie vers un fichier sp\xe9cifique. Si nous revenons plus tard : le fichier ne sera pas forc\xe9ment le m\xeame.\\n\\n![Demande de fichier sur le web classique](./Web-trad.png)\\n\\nEn IPFS, nous allons directement demander un fichier \xe0 partir d\'un identifiant qui se base sur son contenu : un **CID** *(Content Identifier)*, c\'est un Hash unique permettant d\'identifier votre donn\xe9e.\\n\\n![Demander de fichier en IPFS](./ipfs-transfert.png)\\n\\nD\xe8s lors que nous envoyons un fichier dans le r\xe9seau IPFS, nous obtenons un CID qui pointe vers celui-ci. Ce CID est calcul\xe9 en fonction de l\'empreinte unique du fichier, et le CID est alt\xe9r\xe9 si le fichier est modifi\xe9.\\n\\nEn lisant un fichier depuis le r\xe9seau IPFS, nous avons la preuve qu\'il n\'est pas **censur\xe9** et qu\'il est immuable.\\n\\n## Cas d\'usages\\n\\nJ\'ai d\xe9couvert l\'IPFS via le site *Libgen*, un moteur de recherche d\'articles scientifiques. Le site officiel d\xe9taille un peu plus les diff\xe9rentes raisons d\'utiliser ce r\xe9seau:\\n\\n- Archiver des donn\xe9es publiques sur le long terme : L\'IPFS est un moyen fiable de transmettre des donn\xe9es aux g\xe9n\xe9rations futures en la d\xe9centralisant et en donnant l\'opportunit\xe9 aux utilisateurs lisant vos donn\xe9es de les repartager.\\n- H\xe9berger un site sans serveur : Depuis votre laptop, vous pouvez h\xe9berger un site qui sera  lui-m\xeame h\xe9berg\xe9 (/repartag\xe9) par les lecteurs qui acc\xe8dent \xe0 votre site.\\n- Partager de gros fichiers : Les fichiers IPFS sont s\xe9par\xe9s en blocs, vous pouvez alors partager de grands volumes via l\'IPFS et t\xe9l\xe9charger les blocs en parall\xe8le depuis diff\xe9rents serveurs. *(comme BitTorrent)*\\n- Rendre votre contenu incensurable : Comme chaque fichier s\'acc\xe8de via un Hash unique, vous avez constamment la preuve que le fichier n\'est pas alt\xe9r\xe9 par un hackeur ou une organisation.\\n- Partager du contenu Offline sur votre r\xe9seau : Le partage peut se faire sans acc\xe8s \xe0 Internet, les clients IPFS se d\xe9couvrent*(autodiscovery)* sur un r\xe9seau local et peuvent continuer \xe0 relayer les fichiers en cache.\\n\\n## Cycle de vie d\'un fichier\\n\\nSi je souhaite envoyer mon image de profil dans le r\xe9seau IPFS, celle-ci va \xeatre s\xe9par\xe9e en plusieurs parties de (maximum) 256 ko. Nous calculons ensuite un Hash unique pour chaque morceau, et nous les combinons pour cr\xe9er le **CID** du fichier complet.\\n\\n![Envoi d\'un fichier vers IPFS](./fichier-vers-ipfs.png)\\n\\nLe CID est alors une entit\xe9 qui contient les diff\xe9rents Hash des morceaux de ~256 ko permettant de reconstituer le fichier d\'origine.\\n\\nLe fait de s\xe9parer un fichier en plusieurs blocs permet de faire de la **d\xe9duplication**. Si je stocke de nouveau mon image en ayant modifi\xe9 que le haut du png : je peux r\xe9utiliser les blocs identiques et n\'ajouter que la diff\xe9rence en IPFS. Le CID sera quand m\xeame diff\xe9rent *(le hash des premiers blocs sera modifi\xe9)*.\\n\\nIl est donc possible de reconstituer un fichier complet en utilisant les parties pr\xe9sentes dans le r\xe9seau IPFS.\\n\\n![R\xe9cup\xe9rer un fichier IPFS \xe0 partir du CID](./RecupIPFSFichier.png)\\n\\n## Installer un client IPFS\\n\\n![Kubo Logo](https://ipfs.io/ipfs/bafykbzacecaesuqmivkauix25v6i6xxxsvsrtxknhgb5zak3xxsg2nb4dhs2u/ipfs.go.png)\\n\\n[Kubo](https://github.com/ipfs/kubo) est l\'utilitaire le plus connu et le plus utilis\xe9 pour communiquer en IPFS. Il est \xe9crit en **Golang** et peut s\'utiliser en ligne de commande, ou via une interface web.\\n\\nIl s\'installe de mani\xe8re assez simple :\\n\\n```mdx-code-block\\nimport Tabs from \'@theme/Tabs\';\\nimport TabItem from \'@theme/TabItem\';\\n\\n<Tabs>\\n  <TabItem value=\\"Alpine\\" label=\\"Alpine\\" >\\n\\n    apk add kubo\\n\\n  </TabItem>\\n  <TabItem value=\\"Build \xe0 partir du code\\" label=\\"Build \xe0 partir du code\\" default>\\n\\n    git clone https://github.com/ipfs/kubo.git\\n    cd kubo\\n    make install\\n\\n  </TabItem>\\n  <TabItem value=\\"Nix\\" label=\\"Nix\\">\\n\\n    nix-env -i kubo -v\\n\\n  </TabItem>\\n  <TabItem value=\\"T\xe9l\xe9charger Binaire\\" label=\\"Binaire\\">\\n\\n    wget https://dist.ipfs.tech/kubo/v0.20.0/kubo_v0.20.0_linux-amd64.tar.gz\\n    tar xvfz kubo_v0.20.0_linux-amd64.tar.gz\\n    ./install.sh\\n  \\n  </TabItem>\\n</Tabs>\\n```\\n\\nN\'appr\xe9ciant pas l\'usage d\'interfaces web, je vais uniquement pr\xe9senter l\'utilitaire en ligne de commande. L\'interface web est disponible sur le port 5001 de votre machine et n\'apporte pas de fonctionnalit\xe9s suppl\xe9mentaires.\\n\\n![Interface web de Kubo](./kubo-web.png)\\n\\n## L\'IPFS en pratique\\n\\nJe dispose de deux machines virtuelles sur lesquelles j\'ai install\xe9 Kubo.\\n\\nPremi\xe8re chose que nous pouvons faire, c\'est stocker un fichier sur le r\xe9seau IPFS. La commande est simple : `ipfs add <fichier>`. Cette commande va nous retourner un CID qui correspond \xe0 notre fichier. Ce CID est unique et permet de retrouver notre fichier sur le r\xe9seau IPFS.\\n\\nAvant tout, chacune des machines aura initialis\xe9 son client IPFS avec la commande `ipfs init`. Cela permet de cr\xe9er un dossier `.ipfs` dans le dossier utilisateur de la machine.\\n\\nJe cr\xe9e un fichier `hello.txt` avec le contenu *\\"Bonjour !\\"*. L\'utilitaire `ipfs add` ajoute ce fichier sur notre n\u0153ud IPFS.\\n\\n```bash\\n# machine 1\\n\u279c ipfs add hello.txt \\nadded QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11 hello.txt\\n```\\n\\n```bash\\n# machine 2\\n\u279c ipfs cat QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11\\nError: block was not found locally (offline): ipld: could not find QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11\\n```\\n\\nLa raison ? C\'est simple : **Aucune des machines n\'est reli\xe9e au r\xe9seau IPFS** !\\n\\nPour cela, il faut lancer le *daemon* via la commande `ipfs daemon` sur les deux machines.\\nUne fois la commande lanc\xe9e, on peut lire le fichier sur la machine 2 :\\n\\n```bash\\n# machine 2\\n\u279c ipfs cat QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11\\nBonjour ! \\n```\\n\\nDonc dans cette configuration, le fichier `hello.txt` est h\xe9berg\xe9 par le n\u0153ud IPFS sur la machine 1 et la machine 2 y acc\xe8de.\\n\\nMaintenant, faisons une simple exp\xe9rience, \xe9teignons la machine 1, et tentons d\'acc\xe9der une nouvelle fois au fichier :\\n\\n```bash\\n# machine 2\\n\u279c ipfs cat QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11\\nBonjour ! \\n```\\n\\nLe fichier est toujours accessible ! Cela s\'explique par l\'existence d\'un cache sur notre client. Ce cache est param\xe9trable via le fichier de configuration situ\xe9 \xe0 cet emplacement `~/.ipfs/config`.\\n\\n```json\\n...\\n  \\"Datastore\\": {\\n    \\"StorageMax\\": \\"10GB\\",\\n    \\"StorageGCWatermark\\": 90,\\n    \\"GCPeriod\\": \\"1h\\",\\n...\\n```\\n\\nOu en ligne de commande :\\n\\n```bash\\nipfs config Datastore.StorageMax \'\\"5GB\\"\' --json\\n```\\n\\nNous avons un cache maximum de 10\u2009Go. Le *garbage collector* supprimera ce cache d\xe8s lors que nous utilisons plus de 90% du `StorageMax`.\\n\\nEn dehors de permettre \xe0 la *machine 2* de lire ce fichier, ce cache a \xe9galement une autre utilit\xe9.\\n\\nAjoutons une 3e\u0300me machine virtuelle et tentons d\'acc\xe9der au fichier `QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11`. *(Sachant que la machine 1 est toujours \xe9teinte, celle-ci ne pourra pas envoyer le fichier)*\\n\\n```bash\\n# machine 3\\n\u279c ipfs cat QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11\\nBonjour ! \\n```\\n\\nLe cache permet ainsi de participer \xe0 la diffusion de ce fichier *(sans \xeatre le n\u0153ud de premi\xe8re diffusion)*.\\n\\n\xc0 l\'inverse *(en ayant supprim\xe9 le cache de machine 3)*, si jamais j\'\xe9teins la *machine 1 et 2* : le fichier devient **injoignable** :\\n\\n```bash\\n# machine 3\\n\u279c ipfs cat QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11\\n(Pas de r\xe9ponse)\\n```\\n\\n![Pas de r\xe9ponse](./machine3-pas-de-reponse.png)\\n\\nEn r\xe9sum\xe9 : Il faut toujours une machine stockant ce fichier sur le r\xe9seau IPFS pour pouvoir acc\xe9der aux donn\xe9es.\\n\\nMais le cache est \xe9ph\xe9m\xe8re et sera supprim\xe9 un jour ! Ne comptez pas dessus pour relayer votre fichier.\\n\\nPour demander \xe0 une machine de garder le fichier et de le partager, il est n\xe9cessaire de **PIN** le fichier.\\n\\nRevenons au stade initial : `hello.txt` sur *machine 1*, et rien sur machine 2 et 3.\\n\\nNous allons demander \xe0 la *machine 2* de pin notre CID pour que celui-ci soit stock\xe9 en dehors du cache et devienne persistant sur *machine 2*.\\n\\n```bash\\n# machine 2\\n\u279c ipfs pin add QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11\\npinned QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11 recursively\\n```\\n\\n\xc9teignons de nouveau *machine 1* et tentons *(encore une fois)* de lire le fichier `hello.txt` sur la *machine 3* :\\n\\n```bash\\n# machine 3\\n\u279c ipfs cat QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11\\nBonjour !\\n```\\n\\nLe fichier est maintenant lisible tant que *machine 1 **ou** machine 2* sont sur le r\xe9seau IPFS.\\n\\n![Machine 2 vers machine 3](./machine2-vers-machine3.png)\\n\\n## R\xe9cup\xe9rer un fichier sur le r\xe9seau IPFS sans client\\n\\nIl existe de nombreuses passerelles publiques permettant d\'acc\xe9der \xe0 un fichier du r\xe9seau IPFS sans se connecter \xe0 un client. Le CID de mon fichier \xe9tant `QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11`, je peux lire le fichier depuis Firefox via cette URL : `https://ipfs.io/ipfs/QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11`.\\n\\nSi vous utilisez Kubo et que vous avez install\xe9 l\'extension `IPFS Companion` (disponible [ici](https://docs.ipfs.tech/install/ipfs-companion/)), vous serez automatiquement redirig\xe9 vers votre passerelle locale : `http://localhost:8080/ipfs/QmNURZjTooDCUKjtegXUDF8CeowSN8VLSnPARLGXnxiv11`\\n\\n![Extension Firefox](ipfs-compagnion.png)\\n\\nEt puisque nous utilisons notre navigateur\u2026 rien ne nous emp\xeache de lire du HTML !\\n\\nMon blog \xe9tant sous [Docusaurus](https://docusaurus.io/), je vais alors build le site et l\'ajouter \xe0 mon n\u0153ud IPFS:\\n\\n```bash\\ngit clone https://github.com/QJoly/TheBidouilleur.xyz\\ncd TheBidouilleur.xyz\\nnpm i\\nnpm run build\\nipfs add -r ./build\\n```\\n\\nJ\'obtiens le CID `QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x` et j\'acc\xe8de \xe0 mon site via cette URL : `http://localhost:8080/ipfs/QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x` ou `https://ipfs.io/ipfs/QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x/` *(Attention aux erreurs de CSS. Mon Docusaurus n\'aime pas ne pas \xeatre \xe0 la racine du site)*.\\n\\n:::note Pin un dossier\\n\\n\xc0 noter qu\'il n\'est pas n\xe9cessaire de PIN chaque \xe9l\xe9ment du dossier. Il suffit uniquement de le faire sur le dossier racine du site (`QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x` dans mon cas). Les fichiers \xe0 l\'int\xe9rieur du r\xe9pertoire auront un \'pin indirect\'.\\n\\n```bash\\n\u279c ipfs pin add QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x\\npinned QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x recursively\\n\u279c ipfs pin ls\\nQmce2mdHr1ufcGqtnR67DdshJqPCpZ6bSrXxuzQJdga1dy indirect\\nQmdGAYHsqhxiwNDhkoCR5ryrd74wxGKhcgfsh9NJg5ANqH recursive  <-- Un dossier\\nQmcwA7f9HRwVVMMgJRt4mDbGLbr8jruyGPJxPYmWKhFqs2 indirect\\nQmednJCZK9SnxAy12rreveUqsMyP7Jfw2Aij1hFGWc3BJu indirect\\n```\\n\\n:::\\n\\n**ipfs.io** est une passerelle, c\'est un acc\xe8s *depuis le web* permettant de lire un fichier sur le r\xe9seau IPFS. Il en existe de nombreuses, et nous verrons plus bas comment cr\xe9er la n\xf4tre.\\n\\nMaintenant, le probl\xe8me d\'h\xe9berger un site sur l\'IPFS est que chaque fichier est immuable *(chaque entit\xe9 se lit \xe0 l\'aide de son hash unique)*. Il n\'est alors pas possible de modifier vos fichiers en gardant le m\xeame **CID** (et par cons\xe9quent\xa0: en changeant l\'URL d\'acc\xe8s), vos utilisateurs devront donc utiliser le nouveau CID pour voir la derni\xe8re version de votre site.\\n\\nC\'est pour cela qu\'il existe une solution : **InterPlanetary Name System** *(IPNS)*.\\n\\nL\'**IPNS** permet de faire pointer une URL vers un CID, nous pouvons mettre \xe0 jour \xe0 tout moment vers quel CID notre IPNS redirige.\\n\\nCette URL se forme \xe0 partir d\'une cl\xe9 *(qui permet de vous identifier sur le r\xe9seau IPFS)*. D\xe8s lors que vous communiquez sur le r\xe9seau : vous utilisez une cl\xe9 ed25519 (`ipfs key list`) nomm\xe9e `self`.\\n\\nSi vous souhaitez utiliser plusieurs IPNS, il est possible d\'en poss\xe9der plusieurs *(et donc d\'obtenir plusieurs \'domaines\')*, exemple:\\n\\n```bash\\n\u279c ipfs key gen --type=rsa --size=2048 mykey\\n```\\n\\nPour rediriger notre IPNS *(\xe0 partir de la cl\xe9 `self`)* vers un CID, il faut utiliser l\'argument `publish` :\\n\\n```bash\\n\u279c ipfs name publish /ipfs/QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x\\nPublished to k51qzi5uqu5dl8idfkamiq22x12pr1rlha4i1izbi2hq5nlv3vuqt7nztq4krf: /ipfs/QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x\\n```\\n\\nIl est \xe9galement possible de sp\xe9cifier la cl\xe9 :\\n\\n```bash\\n\u279c ipfs name publish --key=mykey /ipfs/QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x\\nPublished to k2k4r8jfpj0rsylz08ahbkar950da3a77wfcreiwh85hnp9op504l0e0: /ipfs/QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x\\n```\\n\\n:::danger\\nAttention, la syntaxe du CID est bien **/ipfs/CID**.\\n:::\\n\\nPour v\xe9rifier vers quoi un IPNS pointe, je peux faire un \xe9quivalent de `nslookup` via `ipns name resolv` :\\n\\n```bash\\n\u279c ipfs name resolve k51qzi5uqu5dl8idfkamiq22x12pr1rlha4i1izbi2hq5nlv3vuqt7nztq4krf\\n/ipfs/QmfEyL1zeaL7fWb6ugfzzh7zzdyyP7zSkb5smAyhttuQKS\\n```\\n\\n![IPNS Dans mon firefox \xe0 partir de IPFS Companion](./ipns.png)\\n\\n:::caution Passerelles publiques\\n\\nDurant l\'\xe9criture de cet article, **aucune passerelle publique** n\'a r\xe9ussi \xe0 afficher mon blog en utilisant mon **IPNS**. J\'ai d\xfb alors utiliser ma passerelle locale *(localhost:8080)* sur mon poste et h\xe9berger ma propre passerelle pour les machines n\'ayant pas Kubo install\xe9. *Nous verrons comment cr\xe9er notre passerelle plus bas.*\\n\\n[Liste des gateways publiques](https://ipfs.github.io/public-gateway-checker/)\\n:::\\n\\nMais retenir par c\u0153ur une cl\xe9 est *(l\xe9g\xe8rement)* compliqu\xe9, il est alors possible d\'utiliser votre propre nom de domaine en tant qu\'IPNS. Pour cela, il suffit d\'ajouter une entr\xe9e **TXT** \xe0 votre nom de domaine:\\n\\n```conf\\nipfs.thebidouilleur.xyz. 60 IN TXT \\"dnslink=/ipfs/QmXqrXHXuKB9tHrxUgNphRx8TyKBmtrisuRB2y9FkFta7x\\"\\n```\\n\\n```bash\\n\u279c ipfs name resolve ipfs.thebidouilleur.xyz\\n/ipfs/QmfEyL1zeaL7fWb6ugfzzh7zzdyyP7zSkb5smAyhttuQKS\\n```\\n\\n:::note\\n\\nAu lieu de r\xe9guli\xe8rement \xe9diter votre entr\xe9e DNS pour changer le CID, il est \xe9galement possible d\'utiliser une cl\xe9 IPNS :\\n\\n```conf\\nipfs.thebidouilleur.xyz. 60 IN TXT \\"dnslink=/ipns/k51qzi5uqu5di2e4jfi570at4g7qnoqx1vwsd2wc0pit1bxgxn22xwsaj5ppfr\\"\\n```\\n\\nIl vous suffira donc de mettre \xe0 jour vers quel CID cet IPNS pointe via `ipfs name publish`.\\n:::\\n\\nUne instance de mon blog est ainsi joignable depuis IPFS :\\n\\n- Avec l\'extension navigateur IPFS: `ipfs.thebidouilleur.xyz`\\n- Depuis une passerelle locale : `localhost:8080/ipns/ipfs.thebidouilleur.xyz`\\n- Depuis une passerelle publique : `ipfs.io/ipns/ipfs.thebidouilleur.xyz` *(Non-fonctionnel pour moi)*\\n\\n## H\xe9berger une passerelle IPFS\\n\\nComme expliqu\xe9 un peu plus haut, je ne parviens pas \xe0 r\xe9soudre les IPNS via les passerelles publiques.\\n\\nJ\'ai d\xfb alors me tourner vers la cr\xe9ation de ma propre passerelle :\\n\\nIl suffira d\'initier votre configuration *(`ipfs init`)* comme ci-dessus et de la modifier comme suit :\\n\\n```bash\\n\u279c ipfs config --bool Swarm.RelayService.Enabled true \\n\u279c ipfs config --bool Swarm.RelayClient.Enabled true\\n\u279c ipfs config AutoNAT.ServiceMode \'\\"enabled\\"\' --json\\n\u279c ipfs config Addresses.Gateway \\"/ip4/0.0.0.0/tcp/8080\\"\\n```\\n\\nUne fois ces commandes lanc\xe9es, vous pourrez directement r\xe9cup\xe9rer des objets IPFS dans votre navigateur via la m\xeame syntaxe que les autres passerelles. Ex: `http://192.168.128.10:8080/ipns/k51qzi5uqu5di2e4jfi570at4g7qnoqx1vwsd2wc0pit1bxgxn22xwsaj5ppfr`.\\n\\n## D\xe9p\xf4t Git en IPFS\\n\\nEn scrutant [la documentation](https://docs.ipfs.tech/how-to/host-git-repo/), j\'ai trouv\xe9 cette page qui pr\xe9sente une proc\xe9dure simple permettant de stocker un d\xe9p\xf4t Git en *ReadOnly*.\\n\\nNous r\xe9cup\xe9rons alors un d\xe9p\xf4t avec l\'argument `--mirror` permettant de r\xe9cup\xe9rer le d\xe9p\xf4t sous forme d\'objets compress\xe9s. *(l\'\xe9quivalent du dossier `.git` d\'un d\xe9p\xf4t)*\\n\\n```bash\\ngit clone --mirror https://github.com/qjoly/helm-charts\\n```\\n\\nSi *(comme je viens de le faire)* vous avez clon\xe9 votre d\xe9p\xf4t en HTTPS *(et non SSH)*, il vous faudra g\xe9n\xe9rer des fichiers auxiliaires via la commande `git update-server-info`. Ces fichiers g\xe9n\xe9r\xe9s ou mis \xe0 jour par `git update-server-info` sont n\xe9cessaires pour que les clients Git puissent r\xe9cup\xe9rer les objets et les r\xe9f\xe9rences du d\xe9p\xf4t.\\n\\n```bash\\ngit update-server-info\\n```\\n\\nNous ajoutons maintenant le dossier clon\xe9 \xe0 notre n\u0153ud IPFS :\\n\\n```bash\\nipfs add -r ./helm-charts.git\\nadded QmbRUdVtdtxcpdqyJE3iZwTJq7FPcXR1ErQRFB76sQCg9H helm-charts.git/HEAD\\nadded QmWadTGKYEjYf5Y7wKS66fLrTQm3ViH34QFoxbu88CbkG1 helm-charts.git/config\\nadded Qmdy135ZFG4kUALkaMhr6Cy3VhhkxyAh264kyg3725x8be helm-charts.git/description\\nadded QmUJ43sv5NVRBmfPHBwEitpz6D46xh4E79ponctVXEeMSH helm-charts.git/hooks/applypatch-msg.sample\\nadded QmeuAksU8iLW2YeirL69ibjGxkNUjWkKq5iEvWhSdeRRXF helm-charts.git/hooks/commit-msg.sample\\nadded QmV1Jv4eQcHrYtf97nofmUjzaaa6hmVXVt4LsqeG3hQKx8 helm-charts.git/hooks/fsmonitor-watchman.sample\\nadded QmWkzb9d617XFnahXuorAQPxRMGA8TeZB7Vyq2oBMmW52d helm-charts.git/hooks/post-update.sample\\nadded QmdgKBitxhbQ3APZt3CFAnfJUMCNC5uoGLkwjgbHciKPA8 helm-charts.git/hooks/pre-applypatch.sample\\nadded QmVpNrG3G8aMcdScqwAkiKan2ACx6bfR35Dn9XJ2mw3LCC helm-charts.git/hooks/pre-commit.sample\\nadded QmPep4RB3J5ERq3wrwEKFLznjnJeeFPqHZUjqcT3mCHej6 helm-charts.git/hooks/pre-merge-commit.sample\\nadded QmQ52euRcb4YZf8PYfajNPQAuaW8WoBgzAksUqHLLttqjk helm-charts.git/hooks/pre-push.sample\\nadded QmaTMXXEbvRSmpDTKqXf6kH3yeb7TNbiu3jttyYCbFpobD helm-charts.git/hooks/pre-rebase.sample\\nadded QmNgDPe6oFz5jqqqdh9YhuqReBWkuPo6gsy45nHB6mSr2j helm-charts.git/hooks/pre-receive.sample\\nadded QmPgMWyjZR1FzFaB1bYAWKkYLTtC5b6DGFVKroQp5eT7Ee helm-charts.git/hooks/prepare-commit-msg.sample\\nadded QmW7VnBMgFcJNVCKfSNZRL5apU8X19mp7bsL8px6zjbmGn helm-charts.git/hooks/push-to-checkout.sample\\nadded QmdBgUSUM2gmuHYMsk8Xy8AkWU5orkGKeBdK9JjfSCM2tC helm-charts.git/hooks/update.sample\\nadded QmcfzxUpw36y8fu2GR3s7Vgq7RBgooKtc6BgsqFnadsDLc helm-charts.git/info/exclude\\nadded QmW2BhLpMEmyhmvVi5xfRcym54NQEH5RfsqAyaL47NKzr1 helm-charts.git/info/refs\\nadded QmYFqkUdpTZ2TwbpRwnyo7K4zMu8Ep9wWTpKELxHS33qiQ helm-charts.git/objects/info/packs\\nadded QmPd9zs6bXigRrxEfLgpdV7nRmGF6UDgGLBiU4jz1zyfm8 helm-charts.git/objects/pack/pack-7d12aca4cae291e85bdb043dcbc34cc5ecf55d2d.idx\\nadded QmX7zrvm2e2cAkLiakS4r8bqWTW7u8onxLuS4BXNUrBzSz helm-charts.git/objects/pack/pack-7d12aca4cae291e85bdb043dcbc34cc5ecf55d2d.pack\\nadded QmZ9Es1CLRGWzasb4w3QRfvUi7NowtA78QKVuZahrMF1ix helm-charts.git/packed-refs\\nadded QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn helm-charts.git/branches\\nadded QmUDWwEzg33DPr6NNxeBDKgHKaTcDfbVfJrog6HpzLXTvg helm-charts.git/hooks\\nadded QmXpvGWuzK8rPGrC7sDGsy7USx6v5mWgm1zfD2FGek5mwT helm-charts.git/info\\nadded QmPmEe7i3mFqU1DfkENkkH1to3QrWJD5UGSNJ7tmQ3cCUy helm-charts.git/objects/info\\nadded QmaodTHHrn5BZY8zaq4Lpj5Af4CmnQKbYract1aadwP8Aq helm-charts.git/objects/pack\\nadded QmfBTRmFNY3t5UP4s2bRFtmNAi4jiffcHBiokxxLeVEjzE helm-charts.git/objects\\nadded QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn helm-charts.git/refs/heads\\nadded QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn helm-charts.git/refs/tags\\nadded QmWYtSEta2Fzgy4u4ttdwwiKMUikwZrFHxa5quWXMVyBhy helm-charts.git/refs\\nadded QmVeBgcRdV5AapyRa8wcfLsk8y4xWxAL93mTmyCdrEynR5 helm-charts.git\\n 491.68 KiB / 491.68 KiB [========================================================================================================================================================]\\n```\\n\\nNous pouvons maintenant cloner notre d\xe9p\xf4t via notre n\u0153ud local :\\n\\n```bash\\n# via notre passerelle locale\\ngit clone http://QmVeBgcRdV5AapyRa8wcfLsk8y4xWxAL93mTmyCdrEynR5.ipfs.localhost:8080\\n# via une passerelle publique\\ngit clone https://ipfs.io/ipfs/QmVeBgcRdV5AapyRa8wcfLsk8y4xWxAL93mTmyCdrEynR5/\\n```\\n\\n## Conclusion\\n\\nJ\'ai d\xe9couvert l\'IPFS en lisant un article sur la censure de Wikip\xe9dia en Turquie. Je n\'ai pas de r\xe9el cas d\'usage en dehors de rendre mes articles accessibles le jour o\xf9 je d\xe9cide de fermer mon site. Je vous laisse vous faire votre propre avis et en trouver votre propre utilit\xe9.\\n\\nEn attendant, je pense archiver quelques projets dans le r\xe9seau et essayer de toujours garder au moins un n\u0153ud actif.\\n\\n### Liens en vrac\\n\\n- [youtube2ipfs](https://pypi.org/project/youtube2ipfs/)\\n- [ipfs-deploy](https://github.com/ipfs-shipyard/ipfs-deploy)\\n- [Github Action IPFS](https://github.com/marketplace/actions/ipfs-setup-action)\\n- [TiddlyWiki IPFS](https://github.com/xmaysonnave/tiddlywiki-ipfs)\\n- [Clusters IPFS](https://cluster.ipfs.io/)\\n- [Clusters Collaboratifs](https://collab.ipfscluster.io/)\\n- [Javascript IPFS](https://js.ipfs.tech/)"},{"id":"DebianRepository","metadata":{"permalink":"/TheBidouilleur.xyz/blog/DebianRepository","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2023-04-10-DebianRepository-Projet/index.md","source":"@site/blog/2023-04-10-DebianRepository-Projet/index.md","title":"Simple DebianRepository - D\xe9ployer un d\xe9p\xf4t Debian en 2min","description":"DebianRepository est un projet bas\xe9 sur Docker permettant de d\xe9ployer un d\xe9p\xf4t de paquets Debian en quelques secondes","date":"2023-04-10T00:00:00.000Z","formattedDate":"10 avril 2023","tags":[{"label":"Debian","permalink":"/TheBidouilleur.xyz/blog/tags/debian"}],"readingTime":3.8,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"title":"Simple DebianRepository - D\xe9ployer un d\xe9p\xf4t Debian en 2min","slug":"DebianRepository","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["Debian"],"description":"DebianRepository est un projet bas\xe9 sur Docker permettant de d\xe9ployer un d\xe9p\xf4t de paquets Debian en quelques secondes"},"prevItem":{"title":"IPFS - un protocole pour archiver et partager des fichiers","permalink":"/TheBidouilleur.xyz/blog/ipfs"},"nextItem":{"title":"Dagger.io, un CI Universel","permalink":"/TheBidouilleur.xyz/blog/dagger"}},"content":"Si vous visitez r\xe9guli\xe8rement mon blog, vous avez sans doute remarqu\xe9 que j\'ai un faible pour les projets bas\xe9s sur Docker. J\'utilise Docker dans mes infrastructures pour la reproductibilit\xe9, la simplicit\xe9 des d\xe9ploiements et la facilit\xe9 de maintenance. *(C\'est d\'ailleurs pour ces raisons que j\'ai d\xe9cid\xe9 de passer sur Kubernetes)*.\\n\\nCette ann\xe9e, j\'ai \xe9crit 2 pages permettant respectivement d\'apprendre \xe0 cr\xe9er des fichiers `.deb` et d\'h\xe9berger un d\xe9p\xf4t de paquets Debian avec `Aptly`. J\'ai d\xe9cid\xe9 de reprendre mon tutoriel concernant *Aptly* pour en faire un programme tout-en-un : [Simple Debian-Repository](https://github.com/QJoly/DebianRepository).\\n\\n## Qu\'est-ce que Simple Debian-Repository ?\\n\\nSimple Debian-Repository est un projet en **Bash** qui va packager *un-par-un* les applicatifs dans `src` et les d\xe9poser dans `repo-list` sous forme de `.deb` avant de les publier sur un serveur web. Celui-ci g\xe8re \xe9galement la signature des paquets en g\xe9n\xe9rant une cl\xe9 GPG.\\n\\n## Comment lancer le projet ?\\n\\nLe projet est *plug and play*, il suffit de lancer le Docker pour lancer la cr\xe9ation du d\xe9p\xf4t (*et de la cl\xe9 GPG*). Une fois le d\xe9p\xf4t cr\xe9\xe9, vous pouvez ajouter vos paquets dans le dossier `src` en respectant la nomenclature des fichiers `.deb`.\\n\\nExemple de lancement \xe0 partir d\'un dossier vide :\\n\\n[![asciicast](https://asciinema.org/a/N9JL3ih6jwoLJX4r58Y51NHlf.svg)](https://asciinema.org/a/N9JL3ih6jwoLJX4r58Y51NHlf)\\n\\nPar d\xe9faut, 2 programmes \'exemples\' seront install\xe9s dans le d\xe9p\xf4t : `hello-world` et `goodbye-world`. Vous pourrez les supprimer en effa\xe7ant les dossiers et `.deb` dans `src` et `repo-list`.\\n\\n```bash\\nrm -r src/stable/hello-world src/unstable/goodbye-world/\\nrm repo-list/stable/hello-world_1.0.0-1_all.deb repo-list/unstable/goodbye-world_1.0.0-1_all.deb\\n```\\n\\n## Comment ajouter un paquet ?\\n\\nLe projet propose 2 d\xe9p\xf4ts par d\xe9faut : `stable` et `unstable`. Vous pouvez ajouter autant de d\xe9p\xf4ts que vous le souhaitez en cr\xe9ant un dossier dans `src` et `repo-list`:\\n\\n```bash\\n# Cr\xe9ation du d\xe9p\xf4t \'testing\'\\nmkdir -p src/testing repo-list/testing\\n```\\n\\nVous pourrez trouver ma documentation \xe0 propos de la cr\xe9ation de paquets Debian [ici](docs/Adminsys/creer-deb).\\n\\nLe script va chercher les dossiers \xe0 packager dans `src/NOM_APP/NOM_APP_VERSION-REV_ARCH`.\\n\\nC.-\xe0-d. que si vous voulez packager l\'application `foo`, vous devez d\'abord cr\xe9er un dossier `foo` dans `src` et cr\xe9er le dossier qui correspondra \xe0 la version du paquet. Par exemple, pour packager la version `1.0.0` de l\'application `foo` \xe0 la r\xe9vision 1, il vous fraudra cr\xe9er le dossier `foo/foo_1.0.0-1_all` dans `src` et y placer les fichiers n\xe9cessaires \xe0 la cr\xe9ation du paquet.\\n\\nExemple de cr\xe9ation de paquet `foo` :\\n\\n```bash\\nmkdir -p src/stable/foo/foo_1.0.0-1_all\\ncd src/stable/foo/foo_1.0.0-1_all\\nmkdir DEBIAN\\ntouch DEBIAN/control # Ajouter les informations du paquet\\nmkdir -p usr/bin\\necho -e \'#!/bin/bash\\\\necho \\"bar\\"\' > usr/bin/foo\\nchmod +x usr/bin/foo\\n```\\n\\n:::tip\\n\\nIl est possible de placer des fichiers `.deb` dans `repo-list/stable` si vous voulez importer des paquets d\xe9j\xe0 packag\xe9s.\\n\\n:::\\n\\n## Customisation\\n\\n*N\'\xe9tant vraiment pas tr\xe8s bon en programmation web, j\'ai utilis\xe9 le code de [Flexdinesh](https://github.com/flexdinesh/dev-landing-page) pour la page d\'accueil.*\\n\\nLors du lancement du projet, celui-ci va cr\xe9er une page web affichant les \xe9tapes permettant d\'ajouter le d\xe9p\xf4t \xe0 votre machine. Il existe 2 variables d\'environnements pour personnaliser cette page :\\n\\n- **REPO_NAME** : Nom du d\xe9p\xf4t (celui-ci sera affich\xe9 dans la page d\'accueil et permettra de nommer les fichiers dans les instructions)\\n- **WEB_URL**   : URL du d\xe9p\xf4t (pour afficher la bonne URL dans les instructions)\\n\\nVous pourrez \xe9galement modifier la couleur du fond de la page d\'accueil en modifiant le fichier `index.html` dans le dossier `html`.\\n\\n```html\\n<head>\\n <meta charset=\\"utf-8\\">\\n <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\">\\n <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\">\\n\\n <title>REPO_NAME</title>\\n\\n <link rel=\\"icon\\" href=\\"favicon.ico\\" type=\\"image/png\\" />\\n\\n <link href=\\"https://fonts.googleapis.com/css?family=Reem+Kufi|Roboto:300\\" rel=\\"stylesheet\\">\\n <link href=\\"https://use.fontawesome.com/releases/v5.13.1/css/all.css\\" rel=\\"stylesheet\\">\\n <link rel=\\"stylesheet\\" href=\\"css/reset.css\\">\\n <link rel=\\"stylesheet\\" href=\\"css/styles.css\\">\\n \x3c!-- <link rel=\\"stylesheet\\" href=\\"css/themes/indigo-white.css\\"> --\x3e\\n \x3c!-- <link rel=\\"stylesheet\\" href=\\"css/themes/green-white.css\\"> --\x3e\\n \x3c!-- <link rel=\\"stylesheet\\" href=\\"css/themes/red-white.css\\"> --\x3e\\n \x3c!-- <link rel=\\"stylesheet\\" href=\\"css/themes/grey-white.css\\"> --\x3e\\n \x3c!-- <link rel=\\"stylesheet\\" href=\\"css/themes/white-indigo.css\\"> --\x3e\\n <link rel=\\"stylesheet\\" href=\\"css/themes/white-blue.css\\"> \\n \x3c!-- <link rel=\\"stylesheet\\" href=\\"css/themes/white-grey.css\\"> --\x3e\\n \x3c!-- <link rel=\\"stylesheet\\" href=\\"css/themes/white-red.css\\"> --\x3e\\n \x3c!-- <link rel=\\"stylesheet\\" href=\\"css/themes/yellow-black.css\\"> --\x3e\\n</head>\\n```\\n\\nVous n\'avez qu\'\xe0 d\xe9-commenter la ligne correspondant au th\xe8me de votre choix.\\n\\n![Page d\'accueil](./theme.png)\\n\\n*Note si vous doutez de mon choix de couleur par d\xe9faut : je suis daltonien.* ;)\\n\\nTout comme le th\xe8me, les diff\xe9rents liens disponibles sur la page d\'accueil doivent \xeatre modifi\xe9s dans le fichier `index.html`.\\n\\n## Conclusion\\n\\n[Simple Debian-Repository](https://github.com/QJoly/DebianRepository) est un projet qui permet de d\xe9ployer rapidement un d\xe9p\xf4t de paquets Debian. Il est tr\xe8s simple \xe0 utiliser et \xe0 personnaliser. Si vous avez des suggestions d\'am\xe9lioration, n\'h\xe9sitez pas \xe0 me contacter sur Twitter ou \xe0 ouvrir une issue sur le projet. Celui-ci n\'est pas adapt\xe9 \xe0 un usage en production, mais il me suffit pour mes besoins personnels.\\n\\nEn cr\xe9ant ce projet, j\'ai \xe9galement cr\xe9\xe9 un second d\xe9p\xf4t Github, [src-packages-deb](https://github.com/QJoly/src-packages-deb) pour stocker certaines applications avant de les packager en `.deb`. N\'h\xe9sitez pas \xe0 y jeter un \u0153il si vous souhaitez contribuer ou peupler votre d\xe9p\xf4t avec quelques applications."},{"id":"dagger","metadata":{"permalink":"/TheBidouilleur.xyz/blog/dagger","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2023-03-31-Dagger-Io-un-CI-Universel/index.md","source":"@site/blog/2023-03-31-Dagger-Io-un-CI-Universel/index.md","title":"Dagger.io, un CI Universel","description":"Dagger.IO est un outil maintenu par Solomon Hykes, celui-ci permet de cr\xe9er un CI local (ou distant) n\'\xe9tant pas d\xe9pendant du Yaml ou d\'un DSL","date":"2023-03-31T00:00:00.000Z","formattedDate":"31 mars 2023","tags":[{"label":"dagger","permalink":"/TheBidouilleur.xyz/blog/tags/dagger"},{"label":"ci","permalink":"/TheBidouilleur.xyz/blog/tags/ci"},{"label":"docker","permalink":"/TheBidouilleur.xyz/blog/tags/docker"}],"readingTime":8.68,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"title":"Dagger.io, un CI Universel","slug":"dagger","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["dagger","ci","docker"],"description":"Dagger.IO est un outil maintenu par Solomon Hykes, celui-ci permet de cr\xe9er un CI local (ou distant) n\'\xe9tant pas d\xe9pendant du Yaml ou d\'un DSL"},"prevItem":{"title":"Simple DebianRepository - D\xe9ployer un d\xe9p\xf4t Debian en 2min","permalink":"/TheBidouilleur.xyz/blog/DebianRepository"},"nextItem":{"title":"Signalez vos attaquants avec Fail2Ban","permalink":"/TheBidouilleur.xyz/blog/abuseipdb-fail2ban"}},"content":"Dagger.io est un projet qui a \xe9t\xe9 annonc\xe9 il y a quelque temps par Solomon Hykes, la philosophie de Dagger a attir\xe9 mon attention.\\n\\nC\'est un service de CI/CD qui permet de lancer des jobs dans des conteneurs Docker. La plus-value de Dagger est qu\'il ne se limite pas \xe0 du Yaml *(Comme Gitlab-CI, Github Action, Drone.io)* ou \xe0 un DSL maison *(Comme Jenkins)*, il permet de lancer des jobs en utilisant du code Python, du Go, du Java.Typescript ou encore du GraphQL.\\n\\nIl est un peu comme Pulumi mais pour les jobs de CI/CD. *(L\xe0 o\xf9 son concurrent Terraform utilise un DSL, Pulumi utilise le Typescript, Python, Java, etc)*\\n\\n\xc9tant donn\xe9 que j\'utilise Github pour mes projets publics, Gitea pour mes projets priv\xe9s *(coupl\xe9 \xe0 Drone)* et Gitlab pour les projets professionnels, je me suis dit que c\'\xe9tait l\'occasion de tester Dagger.io et de me d\xe9barrasser de mes fichiers Yaml ayant une syntaxe diff\xe9rente en fonction de la plateforme.\\n\\nMon id\xe9e derri\xe8re la conversion de mes jobs de CI/CD en code est \xe9galement d\'avoir les **m\xeames** r\xe9sultats entre les diff\xe9rentes plateformes et ma machine locale.\\n\\nOn va donc faire le point sur ce qu\'est Dagger.io, comment l\'installer et comment l\'utiliser. Comme je suis habitu\xe9 au langage Python, j\'utiliserai alors le SDK Python de Dagger.io !\\n\\n## Installation de Dagger.io\\n\\nIl sera n\xe9cessaire d\'avoir un Python 3.10 ou sup\xe9rieur pour utiliser Dagger.io *(il est aussi possible d\'utiliser un [venv](https://packaging.python.org/en/latest/tutorials/installing-packages/#creating-virtual-environments))*.\\n\\nPour installer Dagger.io, il n\'y a rien de bien compliqu\xe9, il suffit d\'installer le package via pip.\\n\\n```bash\\npip install dagger-io\\n```\\n\\nEt c\'est termin\xe9 pour l\'installation.\\n\\n<details>\\n<summary> <code>ERROR: Could not find a version that satisfies the requirement dagger-io (from versions: none)</code></summary>\\n\\nSi vous avez une erreur de ce type :\\n\\n```bash\\n\u279c  ~ python3 -m pip install dagger-io \\nDefaulting to user installation because normal site-packages is not writeable\\nCollecting dagger-io\\n  Using cached dagger_io-0.4.2-py3-none-any.whl (52 kB)\\nCollecting cattrs>=22.2.0\\n[...]\\n  Using cached mdurl-0.1.2-py3-none-any.whl (10.0 kB)\\nCollecting multidict>=4.0\\n  Using cached multidict-6.0.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (114 kB)\\nERROR: Exception:\\nTraceback (most recent call last):\\n  File \\"/usr/lib/python3/dist-packages/pip/_internal/cli/base_command.py\\", line 165, in exc_logging_wrapper\\n    status = run_func(*args)\\n  File \\"/usr/lib/python3/dist-packages/pip/_internal/cli/req_command.py\\", line 205, in wrapper\\n    return func(self, options, args)\\n  File \\"/usr/lib/python3/dist-packages/pip/_internal/commands/install.py\\", line 389, in run\\n    to_install = resolver.get_installation_order(requirement_set)\\n  File \\"/usr/lib/python3/dist-packages/pip/_internal/resolution/resolvelib/resolver.py\\", line 188, in get_installation_order\\n    weights = get_topological_weights(\\n  File \\"/usr/lib/python3/dist-packages/pip/_internal/resolution/resolvelib/resolver.py\\", line 276, in get_topological_weights\\n    assert len(weights) == expected_node_count\\nAssertionError\\n```\\n\\nIl se peut que vous ayez une version trop ancienne de pip et setuptools. La solution est de mettre \xe0 jour pip et setuptools via la commande suivante :\\n\\n```bash\\npip install --upgrade pip setuptools\\n```\\n\\n</details>\\n\\nSi vous ne souhaitez pas travailler avec l\'utilisateur root, il vous faudra configurer le mode Rootless de Docker. *(C\'est ce que j\'ai fait)* Pour cela, il suffit de suivre la [documentation officielle](https://docs.docker.com/engine/security/rootless/).\\n\\n## Premier job\\n\\nPour commencer, nous allons cr\xe9er un fichier `hello-world.py` et y ajouter le code suivant :\\n\\n```python\\n\\"\\"\\"Execute a command.\\"\\"\\"\\nimport sys\\nimport anyio\\nimport dagger\\n\\nasync def test():\\n    async with dagger.Connection(dagger.Config(log_output=sys.stderr)) as client:\\n        python = (\\n            client.container()\\n            .from_(\\"python:3.11-slim-buster\\")\\n            .with_exec([\\"python\\", \\"-V\\"])\\n        )\\n        version = await python.stdout()\\n    print(f\\"Hello from Dagger and {version}\\")\\n\\nif __name__ == \\"__main__\\":\\n    anyio.run(test)\\n```\\n\\nIl s\'agit d\'un simple job qui va lancer un conteneur Docker avec l\'image `python:3.11-slim-buster` et ex\xe9cuter la commande `python -V`.\\n\\nPour lancer le job, il suffit de lancer avec python\xa0: `python3 hello-world.py`.\\n\\n```bash\\n\u279c  python3 hello-world.py    \\n#1 resolve image config for docker.io/library/python:3.11-slim-buster\\n#1 DONE 1.7s\\n#2 importing cache manifest from dagger:10686922502337221602\\n#2 DONE 0.0s\\n#3 DONE 0.0s\\n#4 from python:3.11-slim-buster\\n#4 resolve docker.io/library/python:3.11-slim-buster\\n#4 resolve docker.io/library/python:3.11-slim-buster 0.2s done\\n#4 sha256:f0712d0bdb159c54d5bdce952fbb72c5a5d2a4399654d7f55b004d9fc01e189e 0B / 3.37MB 0.2s\\n#4 sha256:f0712d0bdb159c54d5bdce952fbb72c5a5d2a4399654d7f55b004d9fc01e189e 3.37MB / 3.37MB 0.3s done\\n#4 extracting sha256:80384e04044fa9b6493f2c9012fd1aa7035ab741147248930b5a2b72136198b1\\n#4 extracting sha256:80384e04044fa9b6493f2c9012fd1aa7035ab741147248930b5a2b72136198b1 0.3s done\\n#4 extracting sha256:f0712d0bdb159c54d5bdce952fbb72c5a5d2a4399654d7f55b004d9fc01e189e\\n#4 extracting sha256:f0712d0bdb159c54d5bdce952fbb72c5a5d2a4399654d7f55b004d9fc01e189e 0.2s done\\n#4 ...\\n#3 \\n#3 0.224 Python 3.11.2\\n#3 DONE 0.3s\\n\\n#4 from python:3.11-slim-buster\\nHello from Dagger and Python 3.11.2\\n```\\n\\nF\xe9licitations, vous avez lanc\xe9 votre premier job avec Dagger.io !\\n\\nMaintenant, nous allons voir comment cr\xe9er un script un peu plus complexe !\\n\\n## Dagger, Python et Docker\\n\\nJusque-l\xe0, nous n\'avons pas beaucoup profit\xe9 de la puissance de Python, ou m\xeame des fonctionnalit\xe9s de Docker. Nous allons donc voir comment utiliser les deux ensemble.\\n\\nVous n\'\xeates pas sans savoir que j\'utilise *Docusaurus* pour g\xe9n\xe9rer le code HTML que vous visionnez en ce moment m\xeame. Docusaurus me permet d\'\xe9crire mes articles en Markdown et de les transformer en site.\\n\\nN\'\xe9tant pas tr\xe8s regardant sur la qualit\xe9 de mes Markdown, j\'ai d\xe9cid\xe9 de cr\xe9er un job qui va v\xe9rifier la syntaxe de mes fichiers Markdown et me renvoyer une erreur s\'il y a un probl\xe8me sur l\'un d\'entre eux.\\n\\nPour cela, je vais utiliser [pymarkdownlnt](https://pypi.org/project/pymarkdownlnt/), un Linter assez strict et performant.\\n\\nSon installation se fait via pip :\\n\\n```bash\\npip install pymarkdownlnt\\n```\\n\\nAinsi, notre job va devoir effectuer ces \xe9tapes de mani\xe8re s\xe9quentielle :\\n\\n- D\xe9marrer \xe0 partir d\'une image Python *(`FROM python:3.10-slim-buster`)*\\n- Installer pymarkdownlnt *(`RUN pip install pymarkdownlnt`)*\\n- R\xe9cup\xe9rer les fichiers du projet *(`COPY . .`)*\\n- Lancer le linter sur les fichiers Markdown de chaque dossier *blog/ docs/ i18n/* (`RUN pymarkdownlnt scan blog/-r`)\\n\\nNous pouvons traduire les 3 premi\xe8res \xe9tapes en code Python :\\n\\n```python\\nlint = (\\n  client.container().from_(\\"python:3.10-slim-buster\\")\\n  .with_exec(\\"pip install pymarkdownlnt\\".split(\\" \\"))\\n  .with_mounted_directory(\\"/data\\", src)\\n  .with_workdir(\\"/data\\")\\n)\\n```\\n\\nEt ensuite\u2026 je souhaite faire une boucle it\xe9rant sur les dossiers `blog/ docs/ i18n/` et lancer le linter sur chacun d\'entre eux. C\'est \xe0 ce moment pr\xe9cis que nous allons utiliser du Python et plus uniquement des instructions Dagger.\\n\\nUn d\xe9tail que je ne vous ai pas encore mentionn\xe9, c\'est que nous pouvons agir sur notre job tant qu\'il n\'est pas lanc\xe9, c\'est-\xe0-dire avant le `await` qui va attendre la fin de l\'ex\xe9cution du job.\\n\\nDonc\u2026 gardons la d\xe9finition du conteneur ci-dessus, et ajoutons 3 t\xe2ches \xe0 notre job :\\n\\n```python\\nfor i in [\\"blog\\", \\"docs\\", \\"i18n\\"]:\\n  lint = lint.with_exec([\\"pymarkdownlnt\\", \\"scan\\", i, \\"-r\\"])\\n```\\n\\nPlut\xf4t simple, non ?\\n\\nSi je lance mon job, j\'ai de nombreuses erreurs \xe0 propos de r\xe8gles que je n\'ai pas respect\xe9es. Mais c\'est normal, la syntaxe de Docusaurus cause des erreurs dans le linter que je ne peux pas corriger.\\n\\nJe vais donc noter les r\xe8gles qui ne s\'appliquent pas \xe0 mes fichiers, et les ignorer :\\n\\n```python\\nlint_rules_to_ignore = [\\"MD013\\",\\"MD003\\",\\"MD041\\",\\"MD022\\",\\"MD023\\",\\"MD033\\",\\"MD019\\"]\\n# Format accept\xe9 par pymarkdownlint : \\"MD013,MD003,MD041,MD022,MD023,MD033,MD019\\"\\nfor i in [\\"blog\\", \\"docs\\", \\"i18n\\"]:\\n  lint = lint.with_exec([\\"pymarkdownlnt\\", \\"-d\\", str(\',\'.join(lint_rules_to_ignore)), \\"scan\\", i, \\"-r\\"])\\n```\\n\\nVoici notre script complet\xa0:\\n\\n```python\\n\\"\\"\\"Markdown linting script.\\"\\"\\"\\nimport sys\\nimport anyio\\nimport dagger\\nimport threading\\n\\nasync def markdown_lint():\\n    lint_rules_to_ignore = [\\"MD013\\",\\"MD003\\",\\"MD041\\",\\"MD022\\",\\"MD023\\",\\"MD033\\",\\"MD019\\"]\\n\\n    async with dagger.Connection(dagger.Config(log_output=sys.stderr)) as client:\\n        src = client.host().directory(\\"./\\")\\n\\n        lint = (\\n            client.container().from_(\\"python:3.10-slim-buster\\")\\n            .with_exec(\\"pip install pymarkdownlnt\\".split(\\" \\"))\\n            .with_mounted_directory(\\"/data\\", src)\\n            .with_workdir(\\"/data\\")\\n        )\\n\\n        for i in [\\"blog\\", \\"docs\\", \\"i18n\\"]:\\n            lint = lint.with_exec([\\"pymarkdownlnt\\", \\"-d\\", str(\',\'.join(lint_rules_to_ignore)), \\"scan\\", i, \\"-r\\"])\\n        # execute\\n        await lint.stdout()\\n    print(f\\"Markdown lint is FINISHED!\\")\\n\\nif __name__ == \\"__main__\\":\\n    try:\\n        anyio.run(markdown_lint)\\n    except:\\n        print(\\"Error in Linting\\")\\n```\\n\\nApr\xe8s cette modification, mon job fonctionne sans probl\xe8me !\\n\\n```bash\\npython3 .ci/markdown_lint.py\\n```\\n\\n<script async id=\\"asciicast-zZKfJU9fIWBexQYGv8xI0X51P\\" src=\\"https://asciinema.org/a/zZKfJU9fIWBexQYGv8xI0X51P.js\\"><\/script>\\n\\nR\xe9capitulons ce que nous savons faire\xa0:\\n\\n- Lancer une image Docker\\n- Ex\xe9cuter des commandes dans un conteneur\\n- Copier des fichiers depuis l\'h\xf4te vers le conteneur\\n\\nJe pense que \xe7a suffira dans la plupart de mes CI. N\xe9anmoins, il reste une fonctionnalit\xe9 qui me manque : la possibilit\xe9 de construire une image Docker et de l\'envoyer sur un registre.\\n\\n## Build & push d\'une image Docker\\n\\nIl est possible de s\'authentifier sur un registre directement via Dagger. Dans mon cas, je consid\xe8re que l\'h\xf4te sur lequel je lance mon job est **d\xe9j\xe0** authentifi\xe9.\\n\\nDans le cadre de cette d\xe9monstration, je vais utiliser le registre `ttl.sh`, un registre public et anonyme permettant justement de stocker des images Docker pendant une dur\xe9e maximale de 24h.\\n\\n```python\\nasync def docker_image_build():\\n    async with dagger.Connection(dagger.Config(log_output=sys.stderr)) as client:\\n        src = client.host().directory(\\"./\\")\\n        build = (\\n            client.container()\\n            .build(\\n                context = src,\\n                dockerfile = \\"Dockerfile\\",\\n                build_args=[\\n                    dagger.BuildArg(\\"APP\\", os.environ.get(\\"APP\\", \\"TheBidouilleurxyz\\"))\\n                    ]\\n            )\\n        )\\n        image = await blog.build(address=\\"ttl.sh/thebidouilleur:1h\\")\\n```\\n\\nLe code ci-dessus va donc construire mon image Docker \xe0 partir du fichier `Dockerfile` pr\xe9sent dans le dossier courant, et l\'envoyer sur le registre `ttl.sh/thebidouilleur:1h`.\\n\\nUne petite particularit\xe9 de ce code est l\'usage de *Build Args*. J\'utilise la variable d\'environnement `APP`, si cette variable n\'est pas d\xe9finie, je vais r\xe9cup\xe9rer la valeur par d\xe9faut `TheBidouilleurxyz`.\\n\\n<script async id=\\"asciicast-JA71Nlp9ZOvIndye9QA8QoEtU\\" src=\\"https://asciinema.org/a/JA71Nlp9ZOvIndye9QA8QoEtU.js\\"><\/script>\\n\\nMaintenant, je souhaite cr\xe9er un job similaire qui va construire une image Docker multiarchitecture *ARM et AMD64 (l\'un de mes clusters Kubernetes est compos\xe9 de Raspberry Pi).*\\n\\n## Build & push d\'une image Docker multiarchitecture\\n\\nIl faudra d\xe9j\xe0 mettre au point le build multiarchitecture sur votre machine avant de pouvoir l\'int\xe9grer \xe0 notre job Dagger.\\n\\nSi vous souhaitez savoir comment cr\xe9er une image Docker multiarchitecture, je vous invite \xe0 lire ma documentation [Cr\xe9ation image Docker](/docs/Adminsys/MultiArch-Build/) pour en connaitre la proc\xe9dure.\\n\\nOn va utiliser un objet \xe0 mettre en param\xe8tre \xe0 Dagger, celui-ci est `dagger.Platform` et permet de sp\xe9cifier la plateforme sur laquelle on veut construire notre image Docker.\\n\\nNous cr\xe9ons une boucle qui va it\xe9rer sur les diff\xe9rentes architectures avec lesquelles on veut construire notre image, et lors du Publish, nous enverrons les diff\xe9rentes images construites.\\n\\n```python\\nasync def docker_image_build():\\n  platforms = [\\"linux/amd64\\", \\"linux/arm64\\"]\\n  async with dagger.Connection(dagger.Config(log_output=sys.stderr)) as client:\\n    src = client.host().directory(\\".\\")\\n    variants = []\\n    for platform in platforms:\\n      print(f\\"Building for {platform}\\")\\n      platform = dagger.Platform(platform)\\n      build = (\\n            client.container(platform=platform)\\n            .build(\\n                context = src,\\n                dockerfile = \\"Dockerfile\\"\\n            )\\n        )\\n      variants.append(build)\\n    await client.container().publish(\\"ttl.sh/dagger_test:1h\\", platform_variants=variants)\\n```\\n\\n![Docker avec plusieurs architectures](./multiarch.png)\\n\\n## Cr\xe9er un lanceur\\n\\nMaintenant que nous avons vu comment utiliser Dagger, nous allons cr\xe9er un lanceur qui va nous permettre de lancer nos jobs un-par-un.\\n\\nPour lancer nos taches en asynchrone, nous utilisons la librairie [anyio](https://anyio.readthedocs.io/en/stable/) sur chacun de nos scripts.\\n\\n```python\\nimport anyio\\n\\nimport markdown_lint \\nimport docusaurus_build \\nimport multi_arch_build as docker_build\\n\\nif __name__ == \\"__main__\\":\\n\\n        print(\\"Running tests in parallel using anyio\\")\\n        anyio.run(markdown_lint.markdown_lint)\\n        anyio.run(docusaurus_build.docusaurus_build)\\n        anyio.run(docker_build.docker_build)\\n```\\n\\nCe lanceur va importer les m\xe9thodes des fonctions `markdown_lint`, `docusaurus_build` et `docker_build` des fichiers `markdown_lint.py`, `docusaurus_build.py` et `multi_arch_build.py` avant d\'ex\xe9cuter chacune de ces fonctions.\\n\\nL\'unique int\xe9r\xeat de ce lanceur est de pouvoir lancer nos jobs \xe0 partir d\'une seule commande.\\n\\n## Conclusion\\n\\nDagger est un produit tr\xe8s prometteur ! Celui-ci n\'arrivera surement pas \xe0 remplacer les solutions actuelles telles que Github Actions ou Gitlab CI, mais il r\xe9pond \xe0 un besoin sp\xe9cifique : celui d\'avoir le m\xeame CI peu importe la plateforme.\\n\\nBref, Dagger est un produit qui m\xe9rite d\'\xeatre test\xe9 et je pense que je vais l\'utiliser pour la plupart de mes projets personnels.\\n\\nJ\'esp\xe8re que cet article vous aura plu, n\'h\xe9sitez pas \xe0 me faire part de vos retours."},{"id":"abuseipdb-fail2ban","metadata":{"permalink":"/TheBidouilleur.xyz/blog/abuseipdb-fail2ban","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2023-03-03-Signalez-vos-attaquants/index.md","source":"@site/blog/2023-03-03-Signalez-vos-attaquants/index.md","title":"Signalez vos attaquants avec Fail2Ban","description":"Ne restez pas neutre face aux attaques sur vos services expos\xe9s. Signalez chacune des IPs suspectes \xe0 partir de Fail2Ban et rendez le web un peu plus s\xfbr chaque jour","date":"2023-03-03T00:00:00.000Z","formattedDate":"3 mars 2023","tags":[{"label":"S\xe9curit\xe9","permalink":"/TheBidouilleur.xyz/blog/tags/securite"},{"label":"fail2ban","permalink":"/TheBidouilleur.xyz/blog/tags/fail-2-ban"}],"readingTime":3,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"abuseipdb-fail2ban","title":"Signalez vos attaquants avec Fail2Ban","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["S\xe9curit\xe9","fail2ban"],"description":"Ne restez pas neutre face aux attaques sur vos services expos\xe9s. Signalez chacune des IPs suspectes \xe0 partir de Fail2Ban et rendez le web un peu plus s\xfbr chaque jour"},"prevItem":{"title":"Dagger.io, un CI Universel","permalink":"/TheBidouilleur.xyz/blog/dagger"},"nextItem":{"title":"Mon mat\xe9riel","permalink":"/TheBidouilleur.xyz/blog/Mon-Setup"}},"content":"D\xe8s lors que nous exposons un service en ligne, celui-ci se fait harceler de bots et d\'attaques en tout genre.\\nCes bots ont pour objectif de trouver la moindre petite faille pour obtenir un acc\xe8s \xe0 votre serveur et en tirer quelque chose de lucratif *(Minages, Botnet, Ransomware)*.\\n\\nLa bonne pratique est donc de ne pas **pas** exposer les services sensibles *(et mettre en place un VPN/Tunnel SSH)*, mais certains cas nous obligent \xe0 bafouer cette r\xe8gle.\\n\\nPar exemple, si vous h\xe9bergez des WordPress, les pages administrateurs seront cibles d\'attaques, les clients les plus exigeants voudront un Proxmox accessible depuis Internet, ou votre bastion est un simple serveur SSH.\\n\\nVous connaissez d\xe9j\xe0 les risques d\'exposer ces acc\xe8s sur Internet et je ne vais pas non-plus vous pr\xe9senter de solutions universelles pour prot\xe9ger vos services.\\n\\nLe message que je souhaite vous faire passer est de **d\xe9noncer vos attaquants**.\\n\\n*Et \xe9videmment : je ne vous parle pas d\'\xe9plucher vos logs ligne-par-ligne pour r\xe9cup\xe9rer les IPs suspectes.*\\n\\nUne solution simple et polyvalente est : **fail2ban**.\\n\\n## Fail2Ban\\n\\nFail2Ban est un programme tr\xe8s simple en Python qui va lire vos fichiers de log, extraire les tentatives de connection \xe9chou\xe9es via une *regex*, et agir en cons\xe9quence.\\n\\nPar exemple, lire les tentatives d\'authentification en SSH et bloquer temporairement les IPs via des r\xe8gles IPTables. Ou envoyer un mail lorsqu\'un utilisateur se trompe de mot de passe 3 fois sur votre Drupal.\\n\\nNativement, *Fail2Ban* peut surveiller Apache2, Postfix, proftpd et bien d\'autres...\\n\\nMais cr\xe9er vos r\xe8gles n\'est pas bien compliqu\xe9, on va donc cr\xe9er 2 r\xe8gles nous-m\xeame.\\n\\n### Fail2Ban avec Proxmox\\n\\nCr\xe9ez le filtre avec la regex identifiant les erreurs d\'authentifications dans le fichier `/etc/fail2ban/filter.d/proxmox.conf`.\\n\\n```conf\\n[Definition]\\nfailregex = pvedaemon\\\\[.*authentication failure; rhost=<HOST> user=.* msg=.*\\nignoreregex =\\n```\\n\\nEt enfin le fichier `/etc/fail2ban/jail.d/proxmox.conf` qui va d\xe9finir les ports qui seront bloqu\xe9s \xe0 l\'IP suspecte et les fichiers de log \xe0 surveiller.\\n\\n```conf\\n[proxmox]\\nenabled = true\\nport = https,http,8006\\nfilter = proxmox\\nlogpath = /var/log/daemon.log\\nmaxretry = 3\\nbantime = 3600\\naction = %(action_)s\\n```\\n\\nVous pouvez v\xe9rifier la syntaxe et red\xe9marrer *fail2ban* avec `fail2ban-client reload`.\\n\\nSimple, non ? Maintenant, place \xe0 la d\xe9lation !\\n\\n## D\xe9noncer les IPs suspectes\\n\\nLorsqu\'un num\xe9ro suspect m\'appelle, j\'ai souvent le r\xe9flexe (inutile\u202f?) de chercher le num\xe9ro sur Google et de voir si le num\xe9ro a d\xe9j\xe0 \xe9t\xe9 signal\xe9.\\n\\nC\'est pareil avec les adresses IP !\\n\\nUne IP de Chine vient visiter votre blog ? \ud83d\udc40 C\'est peut-\xeatre un Fran\xe7ais habitant \xe0 l\'\xe9tranger, ou un vilain robot qui cherche des adresses mails pour vous envoyer des spams/phishing.\\n\\nEt v\xe9rifier si l\'IP a une mauvaise r\xe9putation est la premi\xe8re chose \xe0 faire. C\'est l\'int\xe9r\xeat du site [AbuseIPDB](https://www.abuseipdb.com).\\n\\nEn cr\xe9ant un compte, vous pourrez signaler des IPs sur le site via l\'IHM ou l\'API.\\n\\nEt c\'est justement cette API qui va nous permettre de signaler automatiquement les adresses IP louches.\\n\\n*Et en plus, vous pourrez cr\xe9er un super widget sur votre site pour montrer le nombre d\'IP que vous avez signal\xe9.*\\n\\n![\\"AbuseIPDB Badge\\"](https://www.abuseipdb.com/contributor/106797.svg)\\n\\nEt pour faire ce signalement automatique, il suffit de modifier vos `jails` sur *Fail2Ban* en ajoutant une `action` qui va faire un reporting sur AbuseIPDB:\\n\\n```conf\\naction = %(action_)s\\n         %(action_abuseipdb)s[abuseipdb_apikey=\\"VOTRE_API_ABUSEIPDB\\", abuseipdb_category=\\"18,21\\"]\\n```\\n\\n*... sachant que la cat\xe9gorie `18` correspond aux attaques par brute-force, et `21` aux attaques sur pages WEB.*\\n\\n---\\n\\nCe genre de configuration ne va pas directement augmenter la s\xe9curit\xe9 de vos services, il faut garder en t\xeate que c\'est une action qui a simplement pour but de rendre la vie dure aux attaquants/m\xe9chants robots. Rendons le web plus s\xfbr, sans se rajouter une charge de travail suppl\xe9mentaire."},{"id":"Mon-Setup","metadata":{"permalink":"/TheBidouilleur.xyz/blog/Mon-Setup","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2023-02-08-Mon-Setup/index.md","source":"@site/blog/2023-02-08-Mon-Setup/index.md","title":"Mon mat\xe9riel","description":"Le d\xe9ploiement, la virtualisation, le maintien d\'une infrastructure Homelab sont des pratiques qui demandent du temps et \xe9galement de l\'argent.","date":"2023-02-08T00:00:00.000Z","formattedDate":"8 f\xe9vrier 2023","tags":[{"label":"perso","permalink":"/TheBidouilleur.xyz/blog/tags/perso"}],"readingTime":3.66,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"Mon-Setup","title":"Mon mat\xe9riel","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["perso"]},"prevItem":{"title":"Signalez vos attaquants avec Fail2Ban","permalink":"/TheBidouilleur.xyz/blog/abuseipdb-fail2ban"},"nextItem":{"title":"Cr\xe9er son propre registre helm","permalink":"/TheBidouilleur.xyz/blog/Creer-son-registre-helm"}},"content":"Le d\xe9ploiement, la virtualisation, le maintien d\'une infrastructure Homelab sont des pratiques qui demandent du temps et \xe9galement de l\'argent.\\nC\'est pourquoi j\'ai d\xe9cid\xe9 de cr\xe9er un petit billet que je peux ressortir pour expliquer le mat\xe9riel que j\'utilise.\\n\\nJe vais donc partager les machines que j\'utilise **chez moi** ou **en cloud**.\\n\\n:::caution \\"Trop\\", n\'est pas \\"bien\\"\\n\\nJe ne souhaite pas d\xe9courager les gens qui d\xe9butent dans ce domaine.\\nIl n\'est nullement n\xe9c\xe9ssaire d\'avoir autant de mat\xe9riel, je suis un passionn\xe9 *(un chouia trop, je sais)* qui n\'h\xe9site pas \xe0 mettre les moyens.\\n\\nVous pouvez obtenir de meilleurs r\xe9sultats avec moins.\\n:::\\n\\n## Mon infrastructure \xe0 la maison\\n\\nJ\'ai emm\xe9nag\xe9 dans mon appartement en 2022 \xe0 Lyon apr\xe8s 7 mois \xe0 Toulouse. Dans ma t\xeate, cet emm\xe9nagement est une libert\xe9. La libert\xe9 de pouvoir reprendre l\'informatique *chez moi* et plus uniquement en cloud.\\n\\nPar ordre chronologique.. J\'ai d\'abord utilis\xe9 un vieux portable *(Dont je n\'ai plus la photo)* sur lequel j\'ai install\xe9 un Proxmox pour commencer \xe0 m\'installer un cluster k3s avec des machines virtuelles.\\n\\nPuis\u2026 j\'ai re-d\xe9couvert un vieux joujou : ma **Raspberry Pi B+** !\\n\\nJ\'ai donc eu l\'id\xe9e de cr\xe9er mon cluster k3s \xe0 la maison avec juste du mat\xe9riel ARM. L\'avantage premier est d\'avoir une consommation basse et de travailler sur de vraies machines *(Plus fun que d\'avoir des VMs)*\\n\\n### Cluster ARM\\n\\nJe me suis alors procur\xe9 *4 machines*, j\'aurais aim\xe9 4 Raspberry Pi 4, mais faute de moyens : je n\'en ai obtenu que 2. Les deux autres machines sont des [Rock64](https://pine64.com/product/rock64-4gb-single-board-computer/), des \xe9quivalents de Raspberry Pi 3 avec plus de RAM.\\n\\n![Interieur du cluster](./cluster-inside.jpeg) ![Exterieur du cluster](./cluster.jpeg)\\n\\nJ\'ai r\xe9cup\xe9r\xe9 un vieil ampli Marshall pour l\'aspect *design*. *(Puis \xe7a plait un peu \xe0 ma compagne, qui fait tr\xe8s attention \xe0 la d\xe9co de notre appartement)*\\nJe suis presque d\xe9\xe7u de la quantit\xe9 de c\xe2bles *(alimentation du Switch, 4 c\xe2bles pour alimenter les n\u0153uds, 1 c\xe2ble Ethernet pour le Switch)* mais je m\'en contenterai pour le moment. \xe0 l\'avenir, je bricolerai une alimentation pour me d\xe9barrasser de la multiprise et n\'avoir qu\'une unique prise.\\n\\nCe cluster h\xe9berge \xe0 la fois ce site ainsi que d\'autres applications priv\xe9es *(Bitwarden, FreshRSS, un MQTT)*. J\'aimerais beaucoup ajouter un serveur mail, mais \xe7a sera l\'occasion apr\xe8s un changement de FAI puisque **Orange bloque le port 25 sur les connections domiciles**.\\n\\n### Shuttle Proxmox\\n\\n![Shuttle](./shuttle.jpg)\\n\\nMais m\xeame si mon attention se porte principalement sur le cluster, je voulais \xe9galement avoir une machine pour h\xe9berger des applications plus *\\"classiques\\"* et sans conteneurs. J\'ai donc achet\xe9 un mini-ordinateur Shuttle *(ds57u3)* sur lequel j\'ai mis un SSD Samsung de 1To ainsi que 16Go de RAM.\\n\\n![Interface Proxmox](./proxmox-view.png)\\n\\nSur cette machine, j\'ai des VMs avec **Home-Assistant**, mon VPN *(Wireguard)*, mon [netboot](/docs/Adminsys/netbootxyz/) et mon [DHCP](/docs/Adminsys/dnsmasq/). Je voulais absolument avoir un hyperviseur pour continuer \xe0 manipuler Terraform.\\n\\n## Infrastructure Cloud\\n\\n### Proxmox OVH\\n\\nMes principales applications sont sur un serveur d\xe9di\xe9 OVH que je loue. *(Pour ceux qui aiment les specs, j\'ai un Xeon CPU E5-1620 de 8 c\u0153urs avec 32Go de RAM)*\\nC\'est un Proxmox *(aussi)* sur lequel j\'ai mon serveur mail, un cluster de *4 noeuds* K3S, mon serveur multim\xe9dia et pleins d\'autres trucs.\\n\\nCette infrastructure est ce que je consid\xe8re comme de la *production* \xe0 l\'\xe9chelle de mon Homelab. Il doit \xeatre accessible 24/7 !\\nJ\'h\xe9berge diff\xe9rentes applications qui me sont indispensables \xe0 moi et/ou mes proches. *(Par exemple, mes notes, le cloud de ma remarkable, mon kanboard)*\\n\\nJe stocke aussi des sauvegardes de mon infra HomeLab.\\n\\n### Oracle - FreeTier\\n\\nComme dernier serveur, j\'utilise le cloud **FreeTier** avec une seule et unique machine avec 24Go de RAM. Sachant que je ne paye pas ce serveur, je consid\xe8re qu\'il peut \xeatre arr\xeat\xe9 **\xe0 tout moment**.\\nCelui-ci m\'est utile comme machine de test. *(Comme pour mon homelab, j\'aurais voulu y h\xe9berger un serveur mail, mais le port 25 est \xe9galement bloqu\xe9)*\\n\\nEn plus des diff\xe9rents tests que j\'ex\xe9cute sur cette machine, j\'y ai install\xe9 un conteneur avec un Guacamole reli\xe9 \xe0 un XFCE pour \xeatre libre lorsque je suis en d\xe9placement.\\n\\n## Conclusion ?\\n\\nJe pense sinc\xe8rement que je n\'ai pas besoin de toutes ces machines. J\'essaye tant bien que mal de me limiter et de faire le plus attention \xe0 ma consommation \xe9lectrique ainsi qu\'\xe0 mon empreinte carbone. Je n\'ai pas non-plus parl\xe9 de mon NAS qui pourrait faire l\'objet d\'un billet entier \xe0 lui-seul."},{"id":"Creer-son-registre-helm","metadata":{"permalink":"/TheBidouilleur.xyz/blog/Creer-son-registre-helm","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2023-01-09-Creer-son-registre-helm/index.md","source":"@site/blog/2023-01-09-Creer-son-registre-helm/index.md","title":"Cr\xe9er son propre registre helm","description":"Bonne ann\xe9e, Bonne sant\xe9 ! Que la r\xe9ussite et la sant\xe9 soient avec vous !","date":"2023-01-09T00:00:00.000Z","formattedDate":"9 janvier 2023","tags":[{"label":"helm","permalink":"/TheBidouilleur.xyz/blog/tags/helm"},{"label":"kubernetes","permalink":"/TheBidouilleur.xyz/blog/tags/kubernetes"}],"readingTime":10.105,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"Creer-son-registre-helm","title":"Cr\xe9er son propre registre helm","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["helm","kubernetes"]},"prevItem":{"title":"Mon mat\xe9riel","permalink":"/TheBidouilleur.xyz/blog/Mon-Setup"},"nextItem":{"title":"Kubernetes en HCL","permalink":"/TheBidouilleur.xyz/blog/kubernetes-hcl"}},"content":"Bonne ann\xe9e, Bonne sant\xe9 ! Que la r\xe9ussite et la sant\xe9 soient avec vous !\\nJ\'esp\xe8re que cette ann\xe9e sera riche en d\xe9couvertes techniques.\\n\\nMais avant d\'\xeatre trop heureux, attaquons avec une mauvaise nouvelle :\\n\\n## K8S@HOME est mort\\n\\n### Qu\'est-ce que K8S@HOME ?\\n\\n*K8S-at-home* est le nom d\'une communaut\xe9 promouvant l\'usage de Kubernetes comme *Homelab*. La communaut\xe9 poss\xe9dait un \xe9norme d\xe9p\xf4t Helm maintenu par quelques membres.\\nSur ce d\xe9p\xf4t Helm, on pouvait avoir la plupart des applications selfhosts utilis\xe9es dans les communaut\xe9s Reddit/Discord. *(Plex, Firefly, Bitwarden etc\u2026)*\\n\\n**K8S@HOME permettait donc de d\xe9ployer de nombreuses applications via Helm, sans s\'emb\xeater \xe0 \xe9crire des charts.**\\n\\n### La fin de K8S@HOME\\n\\n[Si toute bonne chose a une fin : voici celle de K8S@HOME.](https://github.com/k8s-at-home/charts/issues/1761)\\nSuite au manque de contributeurs, le d\xe9p\xf4t est archiv\xe9 et les charts ne seront plus maintenus.\\n\\nPour l\'instant, \xe7a ne veut pas dire que les Helm d\xe9j\xe0 d\xe9ploy\xe9s \xe0 partir de *K8S@HOME* doivent \xeatre arr\xeat\xe9s : les images Docker sont choisies dans les fichiers *values.yaml*, et s\'il y a faille \u2192 ce seront les images Docker qu\'il faudra mettre \xe0 jour, pas le chart.\\n\\nEn revanche, avec le temps : nous auront de plus en plus d\'instructions obsol\xe8tes et nous ne b\xe9n\xe9ficierons pas des nouvelles fonctionnalit\xe9s pr\xe9vues par Helm.\\n\\n## La Solution : Cr\xe9er notre d\xe9p\xf4t Helm\\n\\nMais oui ! Tout comme nous prenons l\'habitude de cr\xe9er un registre Docker avec nos images. Nous pouvons cr\xe9er un d\xe9p\xf4t Helm avec nos charts.\\n\\n### Fonctionnement d\'un chart Helm\\n\\nDe base, un chart Helm se compose de diff\xe9rents fichiers YAML qui seront appliqu\xe9s via kubectl apr\xe8s un traitement de \\"templating\\". Ce traitement permet de remplacer des valeurs dans les fichiers (Les utilisateurs de Jinja2 ne seront pas perdus) via le fichier **values.yaml** (qui contient les valeurs de remplacement) et les fichiers **_helpers.tpl** (qui contiennent des fonctions pour traiter les valeurs).\\n\\nUne fois que les valeurs de remplacements sont appliqu\xe9es sur la template, on envoie les modifications au cluster. (via kubectl ou en communiquant avec l\'API).\\n\\nExemple rapide :\\n\\n```yaml\\n#service.yml\\napiVersion: v1\\nkind: Service\\nmetadata:\\n  name: baikal\\n  labels:\\n    {{- include \\"baikal.labels\\" . | nindent 4 }}\\nspec:\\n  type: ClusterIP\\n  ports:\\n    - port: {{ .Values.service.port }}\\n      targetPort: http\\n      protocol: TCP\\n      name: http\\n  selector:\\n    {{- include \\"baikal.selectorLabels\\" . | nindent 4 }}\\n```\\n\\n```yaml\\n#values.yml\\nservice:\\n  type: ClusterIP\\n  port: 80\\n```\\n\\nLes fonctions sont appel\xe9es par le mot cl\xe9 \\"include\\", et les valeurs du fichier values.yml sont appel\xe9es via le pr\xe9fixe \\".Values\\".\\n\\nVous pourrez apprendre \xe0 faire des charts Helm en suivant l\'excellente documentation de St\xe9phane Robert : [ici](https://blog.stephane-robert.info/post/kubernetes-write-first-chart-helm/)\\n\\n### Fonctionnement d\'un d\xe9p\xf4t Helm\\n\\nLorsque l\'on ajoute un d\xe9p\xf4t, on peut directement voir les charts disponibles dans ce d\xe9p\xf4t :\\n\\n```bash\\nhelm repo add qjoly https://qjoly.github.io/helm-charts\\\\\\nhelm search repo qjoly\\n```\\n\\nC\'est gr\xe2ce au d\xe9p\xf4t qui contient un fichier *index.yaml* qui va r\xe9pertorier les charts disponibles et les URLs permettant de les t\xe9l\xe9charger.\\n\\n![Sch\xe9ma r\xe9sumant le fonctionnement d\'un depot](./fonctionnement.png)\\n\\nAinsi, lorsque l\'on veut ajouter le chart \\"*Joplin*\\" d\xe9p\xf4t \\"*qjoly*\\", notre client va aller chercher dans notre fichier *index.yaml* l\'url de t\xe9l\xe9chargement (en *tar.gz*) du chart. Notre client Helm va ensuite faire le remplacement des valeurs avant d\'envoyer le manifest dans notre cluster.\\n\\n## Cr\xe9ation d\'un d\xe9p\xf4t Helm\\n\\nPour cr\xe9er un d\xe9p\xf4t helm, voici les diff\xe9rentes solutions :\\n\\n- [Utiliser ChartMuseum](https://chartmuseum.com/)  \\n- Utiliser l\'image GitHub Action Chart-Releaser\\n- \xe0 la main (en cr\xe9ant le fichier index.yaml manuellement)\\n\\nNous, nous passerons par l\'image GitHub Action *(je r\xe9serve une page sur ChartMuseum)*.\\n\\n### Usage de GitHub Action pour g\xe9n\xe9rer les releases\\n\\n```yml\\n       - name: Run chart-releaser\\n         uses: helm/chart-releaser-action@v1.5.0\\n         env:\\n           CR_TOKEN: \\"${{ secrets.GITHUB_TOKEN }}\\"            \\n```\\n\\n:::tip Ne pas cr\xe9er de secret\\n\\nIl n\'est pas n\xe9cessaire de cr\xe9er un secret. *(celui-ci est automatiquement g\xe9n\xe9r\xe9 durant le CI)*\\n\\n:::\\n\\nGr\xe2ce \xe0 cette image, CR va chercher dans le dossier **charts/** pour g\xe9n\xe9rer l\'*index.yaml* et le stocker directement dans la branche **gh-pages**. *(pensez \xe0 activer GitHub-pages pour que le site soit accessible \xe0 <https://votre-username.github.io/votre-projet>)*\\n\\nL\'avantage de Chart-Releaser est qu\'il va automatiquement cr\xe9er des releases pour chaque chart pr\xe9sent dans notre d\xe9p\xf4t GitHub. Ce sont d\'ailleurs ces m\xeames releases qui seront accessibles depuis le fichier *index.yaml*.\\nEn revanche, CR ne pourra pas mettre \xe0 jour une version d\xe9j\xe0 existante. Si nous voulons refaire la version 1.5 du chart \\"Baikal\\", il n\'en fera rien. Il faudra manuellement supprimer la release/tag avant de relancer le CI.\\n\\n```bash\\ncurl https://qjoly.github.io/helm-charts/index.yaml\\n```\\n\\n*Nous avons bien un fichier renvoyant les charts disponibles, une description, ainsi que l\'URL o\xf9 l\'archive du chart est accessible.*\\n\\nIl est tr\xe8s bien possible de se contenter de \xe7a, mais puisque nous le pouvons : allons plus-loin !\\n\\n## Tester les charts avant de g\xe9n\xe9rer la release. (CI)\\n\\nPour \xeatre s\xfbr de ne pas envoyer des charts non fonctionnels, j\'ai voulu m\'appuyer sur du CI pour v\xe9rifier le bon-fonctionnement de mon code.\\n\\nLa premi\xe8re chose simple que nous pouvons faire... c\'est d\'utiliser le linter de Helm.\\n\\n### V\xe9rification de la syntaxe\\n\\nSelon Wikipedia:\\n> Un linter est un outil qui analyse le code source pour signaler les erreurs de programmation, les bogues, les erreurs stylistiques et les constructions suspectes.\\n\\nL\'objectif est donc de v\xe9rifier (avant d\'ex\xe9cuter un code) que sa syntaxe est correcte et qu\'il n\'y a pas d\'erreur \xe9vidente.\\nNous pouvons directement taper la commande `helm lint .`.\\n\\nExemple\xa0:\\n\\n```bash\\n\u279c  baikal git:(main) helm lint .\\n==> Linting .\\n[INFO] Chart.yaml: icon is recommended\\n\\n1 chart(s) linted, 0 chart(s) failed\\n\u279c  baikal git:(main)  \\n```\\n\\nHelm lint est CI-Friendly, il renvoie un exit-code diff\xe9rent de 0 lorsque le lintage (*c\'est mon article, j\'invente les mots que je veux)* n\'est pas correct.\\n\\nPour tester l\'int\xe9gralit\xe9 de mes charts, j\'ai \xe9crit un petit script *helm_lint.sh* qui va effectuer la commande `helm lint .` dans chaque sous-dossier de *charts/*.\\n\\n```bash\\ncd ../../charts\\nfor d in *\\ndo\\n  echo \\"Testing $d \\"\\n  (cd \\"$d\\" && helm lint )\\n  if [ $? -ne 0 ]; then\\n    echo \\"Error\\"\\n    exit 1\\n  fi\\ndone\\n```\\n\\nAinsi, \xe0 la moindre erreur dans le script (*si le lintage est mauvais*), celui-ci s\'arr\xeate et renvoie l\'exitcode \xe0 1. *(Ce qui va stopper le CI et g\xe9n\xe9rer une erreur)*\\n\\n---\\n\\nPour lancer ce script via GitHub Action, j\'ai install\xe9 Helm via l\'action *\\"azure/setup-helm\\"*.\\nCe qui nous donne ces instructions \xe0 rajouter devant notre chart-releaser :\\n\\n```yaml\\n       - uses: azure/setup-helm@v3\\n         with:\\n            token: ${{ secrets.GITHUB_TOKEN }} \\n       \\n       - name: Helm Lint\\n         run: |\\n           cd .github/workflows/\\n           ./helm_lint.sh\\n```\\n\\n### V\xe9rification du fonctionnement des charts\\n\\nSi v\xe9rifier le lint se fait en quelques secondes, il est \xe9galement possible de lancer le chart directement depuis le CI Github.\\n\\nPour cela, il faut au pr\xe9alablement cr\xe9er un cluster Kubernetes *depuis Github Action*. Et si cela est possible, c\'est gr\xe2ce \xe0 *KIND* (*Kubernetes INside Docker*) qui permet de faire un cluster virtuel dans des conteneurs Docker en seulement quelques commandes.\\n\\n\xc0 rajouter dans notre CI:\\n\\n```yaml\\n       - name: Create k8s Kind Cluster\\n         uses: helm/kind-action@v1.5.0\\n```\\n\\nMaintenant que nos charts ont une syntaxe correcte, que nous avons un cluster fonctionnel, il faut y installer nos programmes un-par-un et les tester individuellement.\\n\\nVous rappelez-vous de *helm_lint.sh* ? Voici son grand-fr\xe8re : *helm_deploy.sh*.\\n\\n```bash\\ncd ../../charts\\nfor d in *\\ndo\\n  echo \\"Deploying $d to kind\\"\\n  (\\n    set -x\\n    cd \\"$d\\"\\n    if [ -f \\".no_ci\\" ]; then\\n      echo \\"No CI for this chart.\\"\\n    else\\n      helm install $d . --wait --timeout 120s \\n      helm test $d\\n    fi\\n  )\\n  if [ $? -ne 0 ]; then\\n    echo \\"Error during deployment\\"\\n    exit 1\\n  else\\n    echo \\"Success ! \\"\\n    helm delete $d || true \\n  fi\\ndone\\n```\\n\\nL\'ex\xe9cution de ce script va d\xe9ployer chaque chart individuellement en lan\xe7ant la commande `helm test`, permettant de lancer des tests *(v\xe9rifier un port, v\xe9rifier le status d\'une page web etc..)*.\\nSi le test \xe9choue, `helm test` renverra un exitcode \xe0 1, et le script cr\xe9era une erreur.\\n\\nJ\'ai \xe9galement la v\xe9rification de la pr\xe9sence d\'un fichier *.no_ci* qui, comme son nom l\'indique, permet de \\"skip\\" un chart. Cela permet de ne pas d\xe9ployer certains charts dans le cluster de test. *(Par exemple : mon chart plex-nfs qui ne peut pas fonctionner dans Github Action, ou un chart OpenLDAP)*.\\n\\n:::caution Ressources ?\\n\\nGitHub Action est limit\xe9e \xe0 2000 minutes de CI mensuels. Avec une petite dizaine de charts, mes tests durent environ 5min. (soit 400 tests par mois)\\n\\nJe suis conscient qu\'\xe0 notre \xe9chelle : c\'est suffisant. Mais \xe0 garder en t\xeate si on commence \xe0 avoir un d\xe9p\xf4t similaire \xe0 k8s-at-home.\\n\\n:::\\n\\n## Un README dynamique\\n\\nEt pour rendre votre d\xe9p\xf4t GitHub agr\xe9able pour vos utilisateurs, nous pouvons faire un **README** \xe9voluant au fur et \xe0 mesure que vous cr\xe9ez vos charts.\\n\\nL\'id\xe9e est donc de cr\xe9er un tableau comme celui-ci :\\n\\n| Name  | Description | Chart Version | App Version |\\n|-------|-------------|---------------|-------------|\\n| baikal | Ba\xefkal is a lightweight CalDAV+CardDAV server | 0.1.6 | 0.9.2 |\\n\\nCes informations *(nom, description, version)* sont toutes accessibles depuis les fichiers **Chart.yaml** pr\xe9sents dans nos charts.\\n\\n```yaml\\napiVersion: v2\\nname: baikal\\ndescription: Ba\xefkal is a lightweight CalDAV+CardDAV server\\ntype: application\\nversion: 0.1.6\\nappVersion: \\"0.9.2\\"\\nkeywords:\\n- baikal\\nhome: https://sabre.io/baikal/\\nmaintainers:\\n- email: github@thoughtless.eu\\n  name: QJOLY\\n  url: https://thebidouilleur.xyz\\nsources:\\n- https://github.com/sabre-io/Baikal\\n- https://github.com/QJoly/helm-charts\\n```\\n\\nDu coup, vous rappelez-vous des scripts *helm_lint.sh* et *helm_deploy.sh* ? Eh bien voici le tonton : **get_readme.py**.\\n\\n```python\\n#!/usr/bin/env python3\\n# -*- coding: utf-8 -*-\\n\\nimport sys, logging, os, yaml\\nfrom pathlib import Path\\nfrom glob import glob\\nfrom yaml.loader import SafeLoader\\nfrom jinja2 import Template\\n\\ndef main():\\n    files = glob(\'../../**/Chart.yaml\', recursive=True)\\n    charts = []\\n    for chart in files:\\n        with open(chart) as f:\\n            data = yaml.load(f, Loader=SafeLoader)\\n            print(f\\"nom : {data[\'name\']} \\\\ndescription: {data[\'description\']}\\\\nversion chart: {data[\'version\']}\\\\nversion app: {data[\'appVersion\']}\\")\\n            charts.append([data[\'name\'],data[\'description\'],data[\'version\'], data[\'appVersion\']])\\n    print(f\\"Nombre de charts: {len(charts)}\\")\\n    table_template=Path(\'table.j2\').read_text()\\n    tm = Template(table_template)\\n    tableValue = tm.render({\'charts\':charts})\\n    print(\\"----\\")\\n    readme_template=Path(\'./README.md.tmpl\').read_text().replace(\\"CHARTS_TABLE\\",tableValue).replace(\\"\\"\\", \'\\"\')\\n    print(readme_template)\\n    Path(\\"../../README.md\\").write_text(readme_template)\\n\\nif __name__ == \\"__main__\\":\\n    main()\\n```\\n\\nCe script Python va r\xe9cup\xe9rer les diff\xe9rentes balises contenues dans les *Charts.yaml*, puis va g\xe9n\xe9rer un tableau Markdown \xe0 partir du fichier *table.j2* (en jinja2, tout comme Helm), et va cr\xe9er un README \xe0 partir du tableau ainsi que du fichier README.md.tmpl (contenant de la mise en page, et des informations suppl\xe9mentaires).\\n\\nVoici le r\xe9sultat actuel :\\n\\n![Visuel actuel](./github_page.png)\\n\\n\xe0 ajouter sur notre CI :\\n\\n```yaml\\n       - name: Modifying the readme on main\\n         continue-on-error: true\\n         run: |\\n          git pull\\n          git checkout main\\n          cd .github/workflows/\\n          python -m pip install -r requirements.txt \\n          python3 get_readme.py\\n          cd ../..\\n          git add README.md\\n          git commit -m \\":lock: Auto-Update README with Charts versions\\"\\n          git push\\n```\\n\\n## Cr\xe9er une page d\'accueil\\n\\nDans cet \xe9tat, lorsque nous donnons l\'URL du d\xe9p\xf4t \xe0 ajouter aux clients helm de nos utilisateurs : ceux-ci acc\xe8deront sur une 404 (logique, le seul fichier cr\xe9\xe9 est l\'index.yaml).\\nMon id\xe9e est de reprendre les m\xeames informations du README pour l\'afficher sous forme de page web.\\n\\nSi \xe0 la base, je voulais cr\xe9er un syst\xe8me similaire au README (mais en HTML), j\'ai opt\xe9 pour la conversion du Markdown en HTML. Et un outil tr\xe8s utilis\xe9 est : [pandoc](https://pandoc.org)\\n\\nNous allons donc utiliser Pandoc pour convertir notre readme en HTML, l\'instruction est simple :\\n\\n```yaml\\n       - name: Setup Pandoc\\n         uses: nikeee/setup-pandoc@v1\\n         \\n       - name: Modifying index.html\\n         continue-on-error: true\\n         run: |\\n          index=$(pandoc --from markdown_github README.md --to html5 --standalone --toc --citeproc --no-highlight)\\n          git checkout gh-pages\\n          echo $index > index.html\\n          git add index.html\\n          git commit -m \\"[AUTO] Update index.html of gh-pages\\"\\n          git push       \\n```\\n\\nOn ne peut pas dire que du grand art, mais le r\xe9sultat est plut\xf4t propre *(dieu merci, Pandoc int\xe8gre du CSS)*.\\n\\n![Rendu du site](./renduweb.png)\\n\\n*Dans mon cas, je rajoute m\xeame mon script JS de compteur de vues \xe0 cette \xe9tape*.\\n\\n## Conclusion\\n\\nCr\xe9er un d\xe9p\xf4t Helm avec les petites modifications que je vous propose ne fera pas de vous un grand d\xe9veloppeur (?) de charts. Mais ces outils vous permettrons de vous faciliter le travail, et de proposer une exp\xe9rience agr\xe9able pour les personnes utilisant vos codes.\\n\\nIl est toujours possible d\'aller de plus en plus loin. Je pense notamment \xe0 RenovateBot qui peut vous proposer des modifications *(ex: mettre \xe0 jour une image par d\xe9faut)*.\\n\\nN\'h\xe9sitez pas \xe0 me faire parvenir vos retours (mail/Twitter) ou vos propositions d\'am\xe9liorations.\\n\\nPS: [Pour obtenir le CI complet *(en reprenant chaque \xe9tape de cette page)*, vous pouvez visionner mon d\xe9pot ici.](https://github.com/QJoly/helm-charts/)"},{"id":"kubernetes-hcl","metadata":{"permalink":"/TheBidouilleur.xyz/blog/kubernetes-hcl","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2022-11-13-Kubernetes-en-HCL/index.md","source":"@site/blog/2022-11-13-Kubernetes-en-HCL/index.md","title":"Kubernetes en HCL","description":"Introduction","date":"2022-11-13T00:00:00.000Z","formattedDate":"13 novembre 2022","tags":[{"label":"terraform","permalink":"/TheBidouilleur.xyz/blog/tags/terraform"},{"label":"kubernetes","permalink":"/TheBidouilleur.xyz/blog/tags/kubernetes"}],"readingTime":41.455,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"kubernetes-hcl","title":"Kubernetes en HCL","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["terraform","kubernetes"]},"prevItem":{"title":"Cr\xe9er son propre registre helm","permalink":"/TheBidouilleur.xyz/blog/Creer-son-registre-helm"},"nextItem":{"title":"Gardez vos clusters \xe0 jour","permalink":"/TheBidouilleur.xyz/blog/cluster-maj"}},"content":"## Introduction\\n\\nOn parle beaucoup de Terraform comme \xe9tant *\\"la t\xe9l\xe9commande\\"* du DevOps, celui-ci poss\xe8de des chiffres assez cons\xe9quents : 2626 providers et 11397 modules.\\n\\n:::note Un providers ?\\nUn module est une int\xe9gration de Terraform avec un outil externe. On peut lancer un playbook, cr\xe9er une instance sous AWS, ou m\xeame envoyer un message sur Slack.\\n:::\\n\\nJ\'utilise activement Terraform dans mes d\xe9ploiements *(cr\xe9ation et/ou peuplement d\'une VM sous Proxmox/LibVirt)*, mais depuis que mon infrastructure est bas\xe9e sous Kubernetes, je me demande de la place que Terraform occupe dans mes d\xe9ploiements. *(Hors premi\xe8re installation du cluster)*\\n\\nJe me suis donc int\xe9ress\xe9 \xe0 Terraform et Kubernetes ensembles.\\n\\n## Les avantages de Kubernetes et Terraform ?\\n\\n> Kubernetes fonctionne bien sans Terraform, pourquoi commencer \xe0 rajouter des outils dans l\'\xe9quation ?\\n\\nKubernetes souffre d\'un grand mal : le YAML.\\nEt m\xeame si j\'adore le YAML *(Vraiment, je veux pas retourner sur du JSON\u2026)* : celui-ci reste un simple format et non un r\xe9el langage de programmation.\\n\\nC\'est pourquoi le HCL peut potentiellement nous ouvrir des portes en proposant des int\xe9grations \xe0 d\'autres providers.\\n\\n### Un petit exemple en amuse-bouche\\n\\n#### Une configmap en YAML\\n\\nSi jamais je souhaite cr\xe9er une configmap contenant un YAML pour une application. Voici le fichier que je souhaite stocker :\\n\\n```ini\\ntwitter=thebidouilleur\\njobs=developper\\nfavorite.meal=rougail\\nvehicule=electricunicycle\\n```\\n\\nOn peut cr\xe9er notre fichier YAML avec la bonne ent\xeate, et indenter le contenu de notre fichier pour que YAML le reconnaisse comme un block de texte.\\n\\n```yml\\napiVersion: v1\\nkind: ConfigMap\\nmetadata:\\n  name: data-user\\n  namespace: hcl\\ndata:\\n  data.ini: |\\n    twitter=thebidouilleur\\n    jobs=developper\\n    favorite.meal=rougail\\n    vehicule=electricunicycle\\n```\\n\\nFacile, non?\\n\\n<details>\\n  <summary>Et maintenant on tente la m\xeame chose avec ce fichier ?</summary>\\n\\n```json\\n{\\n  \\"pokemon\\": [{\\n    \\"id\\": 1,\\n    \\"num\\": \\"001\\",\\n    \\"name\\": \\"Bulbasaur\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/001.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.71 m\\",\\n    \\"weight\\": \\"6.9 kg\\",\\n    \\"candy\\": \\"Bulbasaur Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 0.69,\\n    \\"avg_spawns\\": 69,\\n    \\"spawn_time\\": \\"20:00\\",\\n    \\"multipliers\\": [1.58],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"002\\",\\n      \\"name\\": \\"Ivysaur\\"\\n    }, {\\n      \\"num\\": \\"003\\",\\n      \\"name\\": \\"Venusaur\\"\\n    }]\\n  }, {\\n    \\"id\\": 2,\\n    \\"num\\": \\"002\\",\\n    \\"name\\": \\"Ivysaur\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/002.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"13.0 kg\\",\\n    \\"candy\\": \\"Bulbasaur Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.042,\\n    \\"avg_spawns\\": 4.2,\\n    \\"spawn_time\\": \\"07:00\\",\\n    \\"multipliers\\": [\\n      1.2,\\n      1.6\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"001\\",\\n      \\"name\\": \\"Bulbasaur\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"003\\",\\n      \\"name\\": \\"Venusaur\\"\\n    }]\\n  }, {\\n    \\"id\\": 3,\\n    \\"num\\": \\"003\\",\\n    \\"name\\": \\"Venusaur\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/003.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"2.01 m\\",\\n    \\"weight\\": \\"100.0 kg\\",\\n    \\"candy\\": \\"Bulbasaur Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.017,\\n    \\"avg_spawns\\": 1.7,\\n    \\"spawn_time\\": \\"11:30\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"001\\",\\n      \\"name\\": \\"Bulbasaur\\"\\n    }, {\\n      \\"num\\": \\"002\\",\\n      \\"name\\": \\"Ivysaur\\"\\n    }]\\n  }, {\\n    \\"id\\": 4,\\n    \\"num\\": \\"004\\",\\n    \\"name\\": \\"Charmander\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/004.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"0.61 m\\",\\n    \\"weight\\": \\"8.5 kg\\",\\n    \\"candy\\": \\"Charmander Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 0.253,\\n    \\"avg_spawns\\": 25.3,\\n    \\"spawn_time\\": \\"08:45\\",\\n    \\"multipliers\\": [1.65],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"005\\",\\n      \\"name\\": \\"Charmeleon\\"\\n    }, {\\n      \\"num\\": \\"006\\",\\n      \\"name\\": \\"Charizard\\"\\n    }]\\n  }, {\\n    \\"id\\": 5,\\n    \\"num\\": \\"005\\",\\n    \\"name\\": \\"Charmeleon\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/005.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"1.09 m\\",\\n    \\"weight\\": \\"19.0 kg\\",\\n    \\"candy\\": \\"Charmander Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.012,\\n    \\"avg_spawns\\": 1.2,\\n    \\"spawn_time\\": \\"19:00\\",\\n    \\"multipliers\\": [1.79],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"004\\",\\n      \\"name\\": \\"Charmander\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"006\\",\\n      \\"name\\": \\"Charizard\\"\\n    }]\\n  }, {\\n    \\"id\\": 6,\\n    \\"num\\": \\"006\\",\\n    \\"name\\": \\"Charizard\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/006.png\\",\\n    \\"type\\": [\\n      \\"Fire\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.70 m\\",\\n    \\"weight\\": \\"90.5 kg\\",\\n    \\"candy\\": \\"Charmander Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0031,\\n    \\"avg_spawns\\": 0.31,\\n    \\"spawn_time\\": \\"13:34\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"004\\",\\n      \\"name\\": \\"Charmander\\"\\n    }, {\\n      \\"num\\": \\"005\\",\\n      \\"name\\": \\"Charmeleon\\"\\n    }]\\n  }, {\\n    \\"id\\": 7,\\n    \\"num\\": \\"007\\",\\n    \\"name\\": \\"Squirtle\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/007.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.51 m\\",\\n    \\"weight\\": \\"9.0 kg\\",\\n    \\"candy\\": \\"Squirtle Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 0.58,\\n    \\"avg_spawns\\": 58,\\n    \\"spawn_time\\": \\"04:25\\",\\n    \\"multipliers\\": [2.1],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"008\\",\\n      \\"name\\": \\"Wartortle\\"\\n    }, {\\n      \\"num\\": \\"009\\",\\n      \\"name\\": \\"Blastoise\\"\\n    }]\\n  }, {\\n    \\"id\\": 8,\\n    \\"num\\": \\"008\\",\\n    \\"name\\": \\"Wartortle\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/008.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"22.5 kg\\",\\n    \\"candy\\": \\"Squirtle Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.034,\\n    \\"avg_spawns\\": 3.4,\\n    \\"spawn_time\\": \\"07:02\\",\\n    \\"multipliers\\": [1.4],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"007\\",\\n      \\"name\\": \\"Squirtle\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"009\\",\\n      \\"name\\": \\"Blastoise\\"\\n    }]\\n  }, {\\n    \\"id\\": 9,\\n    \\"num\\": \\"009\\",\\n    \\"name\\": \\"Blastoise\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/009.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"1.60 m\\",\\n    \\"weight\\": \\"85.5 kg\\",\\n    \\"candy\\": \\"Squirtle Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0067,\\n    \\"avg_spawns\\": 0.67,\\n    \\"spawn_time\\": \\"00:06\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"007\\",\\n      \\"name\\": \\"Squirtle\\"\\n    }, {\\n      \\"num\\": \\"008\\",\\n      \\"name\\": \\"Wartortle\\"\\n    }]\\n  }, {\\n    \\"id\\": 10,\\n    \\"num\\": \\"010\\",\\n    \\"name\\": \\"Caterpie\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/010.png\\",\\n    \\"type\\": [\\n      \\"Bug\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"2.9 kg\\",\\n    \\"candy\\": \\"Caterpie Candy\\",\\n    \\"candy_count\\": 12,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 3.032,\\n    \\"avg_spawns\\": 303.2,\\n    \\"spawn_time\\": \\"16:35\\",\\n    \\"multipliers\\": [1.05],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Flying\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"011\\",\\n      \\"name\\": \\"Metapod\\"\\n    }, {\\n      \\"num\\": \\"012\\",\\n      \\"name\\": \\"Butterfree\\"\\n    }]\\n  }, {\\n    \\"id\\": 11,\\n    \\"num\\": \\"011\\",\\n    \\"name\\": \\"Metapod\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/011.png\\",\\n    \\"type\\": [\\n      \\"Bug\\"\\n    ],\\n    \\"height\\": \\"0.71 m\\",\\n    \\"weight\\": \\"9.9 kg\\",\\n    \\"candy\\": \\"Caterpie Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.187,\\n    \\"avg_spawns\\": 18.7,\\n    \\"spawn_time\\": \\"02:11\\",\\n    \\"multipliers\\": [\\n      3.55,\\n      3.79\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Flying\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"010\\",\\n      \\"name\\": \\"Caterpie\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"012\\",\\n      \\"name\\": \\"Butterfree\\"\\n    }]\\n  }, {\\n    \\"id\\": 12,\\n    \\"num\\": \\"012\\",\\n    \\"name\\": \\"Butterfree\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/012.png\\",\\n    \\"type\\": [\\n      \\"Bug\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.09 m\\",\\n    \\"weight\\": \\"32.0 kg\\",\\n    \\"candy\\": \\"Caterpie Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.022,\\n    \\"avg_spawns\\": 2.2,\\n    \\"spawn_time\\": \\"05:23\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Electric\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"010\\",\\n      \\"name\\": \\"Caterpie\\"\\n    }, {\\n      \\"num\\": \\"011\\",\\n      \\"name\\": \\"Metapod\\"\\n    }]\\n  }, {\\n    \\"id\\": 13,\\n    \\"num\\": \\"013\\",\\n    \\"name\\": \\"Weedle\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/013.png\\",\\n    \\"type\\": [\\n      \\"Bug\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"3.2 kg\\",\\n    \\"candy\\": \\"Weedle Candy\\",\\n    \\"candy_count\\": 12,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 7.12,\\n    \\"avg_spawns\\": 712,\\n    \\"spawn_time\\": \\"02:21\\",\\n    \\"multipliers\\": [\\n      1.01,\\n      1.09\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"014\\",\\n      \\"name\\": \\"Kakuna\\"\\n    }, {\\n      \\"num\\": \\"015\\",\\n      \\"name\\": \\"Beedrill\\"\\n    }]\\n  }, {\\n    \\"id\\": 14,\\n    \\"num\\": \\"014\\",\\n    \\"name\\": \\"Kakuna\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/014.png\\",\\n    \\"type\\": [\\n      \\"Bug\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.61 m\\",\\n    \\"weight\\": \\"10.0 kg\\",\\n    \\"candy\\": \\"Weedle Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.44,\\n    \\"avg_spawns\\": 44,\\n    \\"spawn_time\\": \\"02:30\\",\\n    \\"multipliers\\": [\\n      3.01,\\n      3.41\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"013\\",\\n      \\"name\\": \\"Weedle\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"015\\",\\n      \\"name\\": \\"Beedrill\\"\\n    }]\\n  }, {\\n    \\"id\\": 15,\\n    \\"num\\": \\"015\\",\\n    \\"name\\": \\"Beedrill\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/015.png\\",\\n    \\"type\\": [\\n      \\"Bug\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"29.5 kg\\",\\n    \\"candy\\": \\"Weedle Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.051,\\n    \\"avg_spawns\\": 5.1,\\n    \\"spawn_time\\": \\"04:50\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"013\\",\\n      \\"name\\": \\"Weedle\\"\\n    }, {\\n      \\"num\\": \\"014\\",\\n      \\"name\\": \\"Kakuna\\"\\n    }]\\n  }, {\\n    \\"id\\": 16,\\n    \\"num\\": \\"016\\",\\n    \\"name\\": \\"Pidgey\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/016.png\\",\\n    \\"type\\": [\\n      \\"Normal\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"1.8 kg\\",\\n    \\"candy\\": \\"Pidgey Candy\\",\\n    \\"candy_count\\": 12,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 15.98,\\n    \\"avg_spawns\\": 1.598,\\n    \\"spawn_time\\": \\"01:34\\",\\n    \\"multipliers\\": [\\n      1.71,\\n      1.92\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"017\\",\\n      \\"name\\": \\"Pidgeotto\\"\\n    }, {\\n      \\"num\\": \\"018\\",\\n      \\"name\\": \\"Pidgeot\\"\\n    }]\\n  }, {\\n    \\"id\\": 17,\\n    \\"num\\": \\"017\\",\\n    \\"name\\": \\"Pidgeotto\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/017.png\\",\\n    \\"type\\": [\\n      \\"Normal\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.09 m\\",\\n    \\"weight\\": \\"30.0 kg\\",\\n    \\"candy\\": \\"Pidgey Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 1.02,\\n    \\"avg_spawns\\": 102,\\n    \\"spawn_time\\": \\"01:30\\",\\n    \\"multipliers\\": [1.79],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"016\\",\\n      \\"name\\": \\"Pidgey\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"018\\",\\n      \\"name\\": \\"Pidgeot\\"\\n    }]\\n  }, {\\n    \\"id\\": 18,\\n    \\"num\\": \\"018\\",\\n    \\"name\\": \\"Pidgeot\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/018.png\\",\\n    \\"type\\": [\\n      \\"Normal\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.50 m\\",\\n    \\"weight\\": \\"39.5 kg\\",\\n    \\"candy\\": \\"Pidgey Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.13,\\n    \\"avg_spawns\\": 13,\\n    \\"spawn_time\\": \\"01:50\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"016\\",\\n      \\"name\\": \\"Pidgey\\"\\n    }, {\\n      \\"num\\": \\"017\\",\\n      \\"name\\": \\"Pidgeotto\\"\\n    }]\\n  }, {\\n    \\"id\\": 19,\\n    \\"num\\": \\"019\\",\\n    \\"name\\": \\"Rattata\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/019.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"3.5 kg\\",\\n    \\"candy\\": \\"Rattata Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 13.05,\\n    \\"avg_spawns\\": 1.305,\\n    \\"spawn_time\\": \\"01:55\\",\\n    \\"multipliers\\": [\\n      2.55,\\n      2.73\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"020\\",\\n      \\"name\\": \\"Raticate\\"\\n    }]\\n  }, {\\n    \\"id\\": 20,\\n    \\"num\\": \\"020\\",\\n    \\"name\\": \\"Raticate\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/020.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.71 m\\",\\n    \\"weight\\": \\"18.5 kg\\",\\n    \\"candy\\": \\"Rattata Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.41,\\n    \\"avg_spawns\\": 41,\\n    \\"spawn_time\\": \\"01:56\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"019\\",\\n      \\"name\\": \\"Rattata\\"\\n    }]\\n  }, {\\n    \\"id\\": 21,\\n    \\"num\\": \\"021\\",\\n    \\"name\\": \\"Spearow\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/021.png\\",\\n    \\"type\\": [\\n      \\"Normal\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"2.0 kg\\",\\n    \\"candy\\": \\"Spearow Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 4.73,\\n    \\"avg_spawns\\": 473,\\n    \\"spawn_time\\": \\"12:25\\",\\n    \\"multipliers\\": [\\n      2.66,\\n      2.68\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"022\\",\\n      \\"name\\": \\"Fearow\\"\\n    }]\\n  }, {\\n    \\"id\\": 22,\\n    \\"num\\": \\"022\\",\\n    \\"name\\": \\"Fearow\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/022.png\\",\\n    \\"type\\": [\\n      \\"Normal\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.19 m\\",\\n    \\"weight\\": \\"38.0 kg\\",\\n    \\"candy\\": \\"Spearow Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.15,\\n    \\"avg_spawns\\": 15,\\n    \\"spawn_time\\": \\"01:11\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"021\\",\\n      \\"name\\": \\"Spearow\\"\\n    }]\\n  }, {\\n    \\"id\\": 23,\\n    \\"num\\": \\"023\\",\\n    \\"name\\": \\"Ekans\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/023.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"2.01 m\\",\\n    \\"weight\\": \\"6.9 kg\\",\\n    \\"candy\\": \\"Ekans Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 2.27,\\n    \\"avg_spawns\\": 227,\\n    \\"spawn_time\\": \\"12:20\\",\\n    \\"multipliers\\": [\\n      2.21,\\n      2.27\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"024\\",\\n      \\"name\\": \\"Arbok\\"\\n    }]\\n  }, {\\n    \\"id\\": 24,\\n    \\"num\\": \\"024\\",\\n    \\"name\\": \\"Arbok\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/024.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"3.51 m\\",\\n    \\"weight\\": \\"65.0 kg\\",\\n    \\"candy\\": \\"Ekans Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.072,\\n    \\"avg_spawns\\": 7.2,\\n    \\"spawn_time\\": \\"01:50\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"023\\",\\n      \\"name\\": \\"Ekans\\"\\n    }]\\n  }, {\\n    \\"id\\": 25,\\n    \\"num\\": \\"025\\",\\n    \\"name\\": \\"Pikachu\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/025.png\\",\\n    \\"type\\": [\\n      \\"Electric\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"6.0 kg\\",\\n    \\"candy\\": \\"Pikachu Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 0.21,\\n    \\"avg_spawns\\": 21,\\n    \\"spawn_time\\": \\"04:00\\",\\n    \\"multipliers\\": [2.34],\\n    \\"weaknesses\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"026\\",\\n      \\"name\\": \\"Raichu\\"\\n    }]\\n  }, {\\n    \\"id\\": 26,\\n    \\"num\\": \\"026\\",\\n    \\"name\\": \\"Raichu\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/026.png\\",\\n    \\"type\\": [\\n      \\"Electric\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"30.0 kg\\",\\n    \\"candy\\": \\"Pikachu Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0076,\\n    \\"avg_spawns\\": 0.76,\\n    \\"spawn_time\\": \\"23:58\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"025\\",\\n      \\"name\\": \\"Pikachu\\"\\n    }]\\n  }, {\\n    \\"id\\": 27,\\n    \\"num\\": \\"027\\",\\n    \\"name\\": \\"Sandshrew\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/027.png\\",\\n    \\"type\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"0.61 m\\",\\n    \\"weight\\": \\"12.0 kg\\",\\n    \\"candy\\": \\"Sandshrew Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 1.11,\\n    \\"avg_spawns\\": 111,\\n    \\"spawn_time\\": \\"01:58\\",\\n    \\"multipliers\\": [2.45],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"028\\",\\n      \\"name\\": \\"Sandslash\\"\\n    }]\\n  }, {\\n    \\"id\\": 28,\\n    \\"num\\": \\"028\\",\\n    \\"name\\": \\"Sandslash\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/028.png\\",\\n    \\"type\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"29.5 kg\\",\\n    \\"candy\\": \\"Sandshrew Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.037,\\n    \\"avg_spawns\\": 3.7,\\n    \\"spawn_time\\": \\"12:34\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"027\\",\\n      \\"name\\": \\"Sandshrew\\"\\n    }]\\n  }, {\\n    \\"id\\": 29,\\n    \\"num\\": \\"029\\",\\n    \\"name\\": \\"Nidoran \u2640 (Female)\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/029.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"7.0 kg\\",\\n    \\"candy\\": \\"Nidoran \u2640 (Female) Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 1.38,\\n    \\"avg_spawns\\": 138,\\n    \\"spawn_time\\": \\"01:51\\",\\n    \\"multipliers\\": [\\n      1.63,\\n      2.48\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"030\\",\\n      \\"name\\": \\"Nidorina\\"\\n    }, {\\n      \\"num\\": \\"031\\",\\n      \\"name\\": \\"Nidoqueen\\"\\n    }]\\n  }, {\\n    \\"id\\": 30,\\n    \\"num\\": \\"030\\",\\n    \\"name\\": \\"Nidorina\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/030.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"20.0 kg\\",\\n    \\"candy\\": \\"Nidoran \u2640 (Female) Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.088,\\n    \\"avg_spawns\\": 8.8,\\n    \\"spawn_time\\": \\"07:22\\",\\n    \\"multipliers\\": [\\n      1.83,\\n      2.48\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"029\\",\\n      \\"name\\": \\"Nidoran(Female)\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"031\\",\\n      \\"name\\": \\"Nidoqueen\\"\\n    }]\\n  }, {\\n    \\"id\\": 31,\\n    \\"num\\": \\"031\\",\\n    \\"name\\": \\"Nidoqueen\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/031.png\\",\\n    \\"type\\": [\\n      \\"Poison\\",\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"60.0 kg\\",\\n    \\"candy\\": \\"Nidoran \u2640 (Female) Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.012,\\n    \\"avg_spawns\\": 1.2,\\n    \\"spawn_time\\": \\"12:35\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ice\\",\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"029\\",\\n      \\"name\\": \\"Nidoran(Female)\\"\\n    }, {\\n      \\"num\\": \\"030\\",\\n      \\"name\\": \\"Nidorina\\"\\n    }]\\n  }, {\\n    \\"id\\": 32,\\n    \\"num\\": \\"032\\",\\n    \\"name\\": \\"Nidoran \u2642 (Male)\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/032.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.51 m\\",\\n    \\"weight\\": \\"9.0 kg\\",\\n    \\"candy\\": \\"Nidoran \u2642 (Male) Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 1.31,\\n    \\"avg_spawns\\": 131,\\n    \\"spawn_time\\": \\"01:12\\",\\n    \\"multipliers\\": [\\n      1.64,\\n      1.7\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"033\\",\\n      \\"name\\": \\"Nidorino\\"\\n    }, {\\n      \\"num\\": \\"034\\",\\n      \\"name\\": \\"Nidoking\\"\\n    }]\\n  }, {\\n    \\"id\\": 33,\\n    \\"num\\": \\"033\\",\\n    \\"name\\": \\"Nidorino\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/033.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.89 m\\",\\n    \\"weight\\": \\"19.5 kg\\",\\n    \\"candy\\": \\"Nidoran \u2642 (Male) Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.083,\\n    \\"avg_spawns\\": 8.3,\\n    \\"spawn_time\\": \\"09:02\\",\\n    \\"multipliers\\": [1.83],\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"032\\",\\n      \\"name\\": \\"Nidoran(Male)\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"034\\",\\n      \\"name\\": \\"Nidoking\\"\\n    }]\\n  }, {\\n    \\"id\\": 34,\\n    \\"num\\": \\"034\\",\\n    \\"name\\": \\"Nidoking\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/034.png\\",\\n    \\"type\\": [\\n      \\"Poison\\",\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"1.40 m\\",\\n    \\"weight\\": \\"62.0 kg\\",\\n    \\"candy\\": \\"Nidoran \u2642 (Male) Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.017,\\n    \\"avg_spawns\\": 1.7,\\n    \\"spawn_time\\": \\"12:16\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ice\\",\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"032\\",\\n      \\"name\\": \\"Nidoran(Male)\\"\\n    }, {\\n      \\"num\\": \\"033\\",\\n      \\"name\\": \\"Nidorino\\"\\n    }]\\n  }, {\\n    \\"id\\": 35,\\n    \\"num\\": \\"035\\",\\n    \\"name\\": \\"Clefairy\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/035.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.61 m\\",\\n    \\"weight\\": \\"7.5 kg\\",\\n    \\"candy\\": \\"Clefairy Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 0.92,\\n    \\"avg_spawns\\": 92,\\n    \\"spawn_time\\": \\"03:30\\",\\n    \\"multipliers\\": [\\n      2.03,\\n      2.14\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"036\\",\\n      \\"name\\": \\"Clefable\\"\\n    }]\\n  }, {\\n    \\"id\\": 36,\\n    \\"num\\": \\"036\\",\\n    \\"name\\": \\"Clefable\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/036.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"40.0 kg\\",\\n    \\"candy\\": \\"Clefairy Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.012,\\n    \\"avg_spawns\\": 1.2,\\n    \\"spawn_time\\": \\"03:29\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"035\\",\\n      \\"name\\": \\"Clefairy\\"\\n    }]\\n  }, {\\n    \\"id\\": 37,\\n    \\"num\\": \\"037\\",\\n    \\"name\\": \\"Vulpix\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/037.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"0.61 m\\",\\n    \\"weight\\": \\"9.9 kg\\",\\n    \\"candy\\": \\"Vulpix Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.22,\\n    \\"avg_spawns\\": 22,\\n    \\"spawn_time\\": \\"13:43\\",\\n    \\"multipliers\\": [\\n      2.74,\\n      2.81\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"038\\",\\n      \\"name\\": \\"Ninetales\\"\\n    }]\\n  }, {\\n    \\"id\\": 38,\\n    \\"num\\": \\"038\\",\\n    \\"name\\": \\"Ninetales\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/038.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"1.09 m\\",\\n    \\"weight\\": \\"19.9 kg\\",\\n    \\"candy\\": \\"Vulpix Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0077,\\n    \\"avg_spawns\\": 0.77,\\n    \\"spawn_time\\": \\"01:32\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"037\\",\\n      \\"name\\": \\"Vulpix\\"\\n    }]\\n  }, {\\n    \\"id\\": 39,\\n    \\"num\\": \\"039\\",\\n    \\"name\\": \\"Jigglypuff\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/039.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.51 m\\",\\n    \\"weight\\": \\"5.5 kg\\",\\n    \\"candy\\": \\"Jigglypuff Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 0.39,\\n    \\"avg_spawns\\": 39,\\n    \\"spawn_time\\": \\"08:46\\",\\n    \\"multipliers\\": [1.85],\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"040\\",\\n      \\"name\\": \\"Wigglytuff\\"\\n    }]\\n  }, {\\n    \\"id\\": 40,\\n    \\"num\\": \\"040\\",\\n    \\"name\\": \\"Wigglytuff\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/040.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"12.0 kg\\",\\n    \\"candy\\": \\"Jigglypuff Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.018,\\n    \\"avg_spawns\\": 1.8,\\n    \\"spawn_time\\": \\"12:28\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"039\\",\\n      \\"name\\": \\"Jigglypuff\\"\\n    }]\\n  }, {\\n    \\"id\\": 41,\\n    \\"num\\": \\"041\\",\\n    \\"name\\": \\"Zubat\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/041.png\\",\\n    \\"type\\": [\\n      \\"Poison\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"7.5 kg\\",\\n    \\"candy\\": \\"Zubat Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 6.52,\\n    \\"avg_spawns\\": 652,\\n    \\"spawn_time\\": \\"12:28\\",\\n    \\"multipliers\\": [\\n      2.6,\\n      3.67\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Ice\\",\\n      \\"Psychic\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"042\\",\\n      \\"name\\": \\"Golbat\\"\\n    }]\\n  }, {\\n    \\"id\\": 42,\\n    \\"num\\": \\"042\\",\\n    \\"name\\": \\"Golbat\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/042.png\\",\\n    \\"type\\": [\\n      \\"Poison\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.60 m\\",\\n    \\"weight\\": \\"55.0 kg\\",\\n    \\"candy\\": \\"Zubat Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.42,\\n    \\"avg_spawns\\": 42,\\n    \\"spawn_time\\": \\"02:15\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Ice\\",\\n      \\"Psychic\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"041\\",\\n      \\"name\\": \\"Zubat\\"\\n    }]\\n  }, {\\n    \\"id\\": 43,\\n    \\"num\\": \\"043\\",\\n    \\"name\\": \\"Oddish\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/043.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.51 m\\",\\n    \\"weight\\": \\"5.4 kg\\",\\n    \\"candy\\": \\"Oddish Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 1.02,\\n    \\"avg_spawns\\": 102,\\n    \\"spawn_time\\": \\"03:58\\",\\n    \\"multipliers\\": [1.5],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"044\\",\\n      \\"name\\": \\"Gloom\\"\\n    }, {\\n      \\"num\\": \\"045\\",\\n      \\"name\\": \\"Vileplume\\"\\n    }]\\n  }, {\\n    \\"id\\": 44,\\n    \\"num\\": \\"044\\",\\n    \\"name\\": \\"Gloom\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/044.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"8.6 kg\\",\\n    \\"candy\\": \\"Oddish Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.064,\\n    \\"avg_spawns\\": 6.4,\\n    \\"spawn_time\\": \\"11:33\\",\\n    \\"multipliers\\": [1.49],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"043\\",\\n      \\"name\\": \\"Oddish\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"045\\",\\n      \\"name\\": \\"Vileplume\\"\\n    }]\\n  }, {\\n    \\"id\\": 45,\\n    \\"num\\": \\"045\\",\\n    \\"name\\": \\"Vileplume\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/045.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"1.19 m\\",\\n    \\"weight\\": \\"18.6 kg\\",\\n    \\"candy\\": \\"Oddish Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0097,\\n    \\"avg_spawns\\": 0.97,\\n    \\"spawn_time\\": \\"23:58\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"043\\",\\n      \\"name\\": \\"Oddish\\"\\n    }, {\\n      \\"num\\": \\"044\\",\\n      \\"name\\": \\"Gloom\\"\\n    }]\\n  }, {\\n    \\"id\\": 46,\\n    \\"num\\": \\"046\\",\\n    \\"name\\": \\"Paras\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/046.png\\",\\n    \\"type\\": [\\n      \\"Bug\\",\\n      \\"Grass\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"5.4 kg\\",\\n    \\"candy\\": \\"Paras Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 2.36,\\n    \\"avg_spawns\\": 236,\\n    \\"spawn_time\\": \\"01:42\\",\\n    \\"multipliers\\": [2.02],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Poison\\",\\n      \\"Flying\\",\\n      \\"Bug\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"047\\",\\n      \\"name\\": \\"Parasect\\"\\n    }]\\n  }, {\\n    \\"id\\": 47,\\n    \\"num\\": \\"047\\",\\n    \\"name\\": \\"Parasect\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/047.png\\",\\n    \\"type\\": [\\n      \\"Bug\\",\\n      \\"Grass\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"29.5 kg\\",\\n    \\"candy\\": \\"Paras Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.074,\\n    \\"avg_spawns\\": 7.4,\\n    \\"spawn_time\\": \\"01:22\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Poison\\",\\n      \\"Flying\\",\\n      \\"Bug\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"046\\",\\n      \\"name\\": \\"Paras\\"\\n    }]\\n  }, {\\n    \\"id\\": 48,\\n    \\"num\\": \\"048\\",\\n    \\"name\\": \\"Venonat\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/048.png\\",\\n    \\"type\\": [\\n      \\"Bug\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"30.0 kg\\",\\n    \\"candy\\": \\"Venonat Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 2.28,\\n    \\"avg_spawns\\": 228,\\n    \\"spawn_time\\": \\"02:31\\",\\n    \\"multipliers\\": [\\n      1.86,\\n      1.9\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"049\\",\\n      \\"name\\": \\"Venomoth\\"\\n    }]\\n  }, {\\n    \\"id\\": 49,\\n    \\"num\\": \\"049\\",\\n    \\"name\\": \\"Venomoth\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/049.png\\",\\n    \\"type\\": [\\n      \\"Bug\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"1.50 m\\",\\n    \\"weight\\": \\"12.5 kg\\",\\n    \\"candy\\": \\"Venonat Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.072,\\n    \\"avg_spawns\\": 7.2,\\n    \\"spawn_time\\": \\"23:40\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"048\\",\\n      \\"name\\": \\"Venonat\\"\\n    }]\\n  }, {\\n    \\"id\\": 50,\\n    \\"num\\": \\"050\\",\\n    \\"name\\": \\"Diglett\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/050.png\\",\\n    \\"type\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"0.20 m\\",\\n    \\"weight\\": \\"0.8 kg\\",\\n    \\"candy\\": \\"Diglett Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.40,\\n    \\"avg_spawns\\": 40,\\n    \\"spawn_time\\": \\"02:22\\",\\n    \\"multipliers\\": [2.69],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"051\\",\\n      \\"name\\": \\"Dugtrio\\"\\n    }]\\n  }, {\\n    \\"id\\": 51,\\n    \\"num\\": \\"051\\",\\n    \\"name\\": \\"Dugtrio\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/051.png\\",\\n    \\"type\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"0.71 m\\",\\n    \\"weight\\": \\"33.3 kg\\",\\n    \\"candy\\": \\"Dugtrio\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.014,\\n    \\"avg_spawns\\": 1.4,\\n    \\"spawn_time\\": \\"12:37\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"050\\",\\n      \\"name\\": \\"Diglett\\"\\n    }]\\n  }, {\\n    \\"id\\": 52,\\n    \\"num\\": \\"052\\",\\n    \\"name\\": \\"Meowth\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/052.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"4.2 kg\\",\\n    \\"candy\\": \\"Meowth Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.86,\\n    \\"avg_spawns\\": 86,\\n    \\"spawn_time\\": \\"02:54\\",\\n    \\"multipliers\\": [1.98],\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"053\\",\\n      \\"name\\": \\"Persian\\"\\n    }]\\n  }, {\\n    \\"id\\": 53,\\n    \\"num\\": \\"053\\",\\n    \\"name\\": \\"Persian\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/053.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"32.0 kg\\",\\n    \\"candy\\": \\"Meowth Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.022,\\n    \\"avg_spawns\\": 2.2,\\n    \\"spawn_time\\": \\"02:44\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"052\\",\\n      \\"name\\": \\"Meowth\\"\\n    }]\\n  }, {\\n    \\"id\\": 54,\\n    \\"num\\": \\"054\\",\\n    \\"name\\": \\"Psyduck\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/054.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"19.6 kg\\",\\n    \\"candy\\": \\"Psyduck Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 2.54,\\n    \\"avg_spawns\\": 254,\\n    \\"spawn_time\\": \\"03:41\\",\\n    \\"multipliers\\": [2.27],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"055\\",\\n      \\"name\\": \\"Golduck\\"\\n    }]\\n  }, {\\n    \\"id\\": 55,\\n    \\"num\\": \\"055\\",\\n    \\"name\\": \\"Golduck\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/055.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"1.70 m\\",\\n    \\"weight\\": \\"76.6 kg\\",\\n    \\"candy\\": \\"Psyduck Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.087,\\n    \\"avg_spawns\\": 8.7,\\n    \\"spawn_time\\": \\"23:06\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"054\\",\\n      \\"name\\": \\"Psyduck\\"\\n    }]\\n  }, {\\n    \\"id\\": 56,\\n    \\"num\\": \\"056\\",\\n    \\"name\\": \\"Mankey\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/056.png\\",\\n    \\"type\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"height\\": \\"0.51 m\\",\\n    \\"weight\\": \\"28.0 kg\\",\\n    \\"candy\\": \\"Mankey Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.92,\\n    \\"avg_spawns\\": 92,\\n    \\"spawn_time\\": \\"12:52\\",\\n    \\"multipliers\\": [\\n      2.17,\\n      2.28\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Fairy\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"057\\",\\n      \\"name\\": \\"Primeape\\"\\n    }]\\n  }, {\\n    \\"id\\": 57,\\n    \\"num\\": \\"057\\",\\n    \\"name\\": \\"Primeape\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/057.png\\",\\n    \\"type\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"32.0 kg\\",\\n    \\"candy\\": \\"Mankey Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.031,\\n    \\"avg_spawns\\": 3.1,\\n    \\"spawn_time\\": \\"12:33\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Fairy\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"056\\",\\n      \\"name\\": \\"Mankey\\"\\n    }]\\n  }, {\\n    \\"id\\": 58,\\n    \\"num\\": \\"058\\",\\n    \\"name\\": \\"Growlithe\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/058.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"0.71 m\\",\\n    \\"weight\\": \\"19.0 kg\\",\\n    \\"candy\\": \\"Growlithe Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.92,\\n    \\"avg_spawns\\": 92,\\n    \\"spawn_time\\": \\"03:57\\",\\n    \\"multipliers\\": [\\n      2.31,\\n      2.36\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"059\\",\\n      \\"name\\": \\"Arcanine\\"\\n    }]\\n  }, {\\n    \\"id\\": 59,\\n    \\"num\\": \\"059\\",\\n    \\"name\\": \\"Arcanine\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/059.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"1.91 m\\",\\n    \\"weight\\": \\"155.0 kg\\",\\n    \\"candy\\": \\"Growlithe Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.017,\\n    \\"avg_spawns\\": 1.7,\\n    \\"spawn_time\\": \\"03:11\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"058\\",\\n      \\"name\\": \\"Growlithe\\"\\n    }]\\n  }, {\\n    \\"id\\": 60,\\n    \\"num\\": \\"060\\",\\n    \\"name\\": \\"Poliwag\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/060.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.61 m\\",\\n    \\"weight\\": \\"12.4 kg\\",\\n    \\"candy\\": \\"Poliwag Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 2.19,\\n    \\"avg_spawns\\": 219,\\n    \\"spawn_time\\": \\"03:40\\",\\n    \\"multipliers\\": [\\n      1.72,\\n      1.73\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"061\\",\\n      \\"name\\": \\"Poliwhirl\\"\\n    }, {\\n      \\"num\\": \\"062\\",\\n      \\"name\\": \\"Poliwrath\\"\\n    }]\\n  }, {\\n    \\"id\\": 61,\\n    \\"num\\": \\"061\\",\\n    \\"name\\": \\"Poliwhirl\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/061.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"20.0 kg\\",\\n    \\"candy\\": \\"Poliwag Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.13,\\n    \\"avg_spawns\\": 13,\\n    \\"spawn_time\\": \\"09:14\\",\\n    \\"multipliers\\": [1.95],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"060\\",\\n      \\"name\\": \\"Poliwag\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"062\\",\\n      \\"name\\": \\"Poliwrath\\"\\n    }]\\n  }, {\\n    \\"id\\": 62,\\n    \\"num\\": \\"062\\",\\n    \\"name\\": \\"Poliwrath\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/062.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Fighting\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"54.0 kg\\",\\n    \\"candy\\": \\"Poliwag Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.011,\\n    \\"avg_spawns\\": 1.1,\\n    \\"spawn_time\\": \\"01:32\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Fairy\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"060\\",\\n      \\"name\\": \\"Poliwag\\"\\n    }, {\\n      \\"num\\": \\"061\\",\\n      \\"name\\": \\"Poliwhirl\\"\\n    }]\\n  }, {\\n    \\"id\\": 63,\\n    \\"num\\": \\"063\\",\\n    \\"name\\": \\"Abra\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/063.png\\",\\n    \\"type\\": [\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"0.89 m\\",\\n    \\"weight\\": \\"19.5 kg\\",\\n    \\"candy\\": \\"Abra Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.42,\\n    \\"avg_spawns\\": 42,\\n    \\"spawn_time\\": \\"04:30\\",\\n    \\"multipliers\\": [\\n      1.36,\\n      1.95\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"064\\",\\n      \\"name\\": \\"Kadabra\\"\\n    }, {\\n      \\"num\\": \\"065\\",\\n      \\"name\\": \\"Alakazam\\"\\n    }]\\n  }, {\\n    \\"id\\": 64,\\n    \\"num\\": \\"064\\",\\n    \\"name\\": \\"Kadabra\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/064.png\\",\\n    \\"type\\": [\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"56.5 kg\\",\\n    \\"candy\\": \\"Abra Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.027,\\n    \\"avg_spawns\\": 2.7,\\n    \\"spawn_time\\": \\"11:25\\",\\n    \\"multipliers\\": [1.4],\\n    \\"weaknesses\\": [\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"063\\",\\n      \\"name\\": \\"Abra\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"065\\",\\n      \\"name\\": \\"Alakazam\\"\\n    }]\\n  }, {\\n    \\"id\\": 65,\\n    \\"num\\": \\"065\\",\\n    \\"name\\": \\"Alakazam\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/065.png\\",\\n    \\"type\\": [\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"1.50 m\\",\\n    \\"weight\\": \\"48.0 kg\\",\\n    \\"candy\\": \\"Abra Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0073,\\n    \\"avg_spawns\\": 0.73,\\n    \\"spawn_time\\": \\"12:33\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"063\\",\\n      \\"name\\": \\"Abra\\"\\n    }, {\\n      \\"num\\": \\"064\\",\\n      \\"name\\": \\"Kadabra\\"\\n    }]\\n  }, {\\n    \\"id\\": 66,\\n    \\"num\\": \\"066\\",\\n    \\"name\\": \\"Machop\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/066.png\\",\\n    \\"type\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"19.5 kg\\",\\n    \\"candy\\": \\"Machop Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.49,\\n    \\"avg_spawns\\": 49,\\n    \\"spawn_time\\": \\"01:55\\",\\n    \\"multipliers\\": [\\n      1.64,\\n      1.65\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Fairy\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"067\\",\\n      \\"name\\": \\"Machoke\\"\\n    }, {\\n      \\"num\\": \\"068\\",\\n      \\"name\\": \\"Machamp\\"\\n    }]\\n  }, {\\n    \\"id\\": 67,\\n    \\"num\\": \\"067\\",\\n    \\"name\\": \\"Machoke\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/067.png\\",\\n    \\"type\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"height\\": \\"1.50 m\\",\\n    \\"weight\\": \\"70.5 kg\\",\\n    \\"candy\\": \\"Machop Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.034,\\n    \\"avg_spawns\\": 3.4,\\n    \\"spawn_time\\": \\"10:32\\",\\n    \\"multipliers\\": [1.7],\\n    \\"weaknesses\\": [\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Fairy\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"066\\",\\n      \\"name\\": \\"Machop\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"068\\",\\n      \\"name\\": \\"Machamp\\"\\n    }]\\n  }, {\\n    \\"id\\": 68,\\n    \\"num\\": \\"068\\",\\n    \\"name\\": \\"Machamp\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/068.png\\",\\n    \\"type\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"height\\": \\"1.60 m\\",\\n    \\"weight\\": \\"130.0 kg\\",\\n    \\"candy\\": \\"Machop Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0068,\\n    \\"avg_spawns\\": 0.68,\\n    \\"spawn_time\\": \\"02:55\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Fairy\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"066\\",\\n      \\"name\\": \\"Machop\\"\\n    }, {\\n      \\"num\\": \\"067\\",\\n      \\"name\\": \\"Machoke\\"\\n    }]\\n  }, {\\n    \\"id\\": 69,\\n    \\"num\\": \\"069\\",\\n    \\"name\\": \\"Bellsprout\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/069.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.71 m\\",\\n    \\"weight\\": \\"4.0 kg\\",\\n    \\"candy\\": \\"Bellsprout Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 1.15,\\n    \\"avg_spawns\\": 115,\\n    \\"spawn_time\\": \\"04:10\\",\\n    \\"multipliers\\": [1.57],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"070\\",\\n      \\"name\\": \\"Weepinbell\\"\\n    }, {\\n      \\"num\\": \\"071\\",\\n      \\"name\\": \\"Victreebel\\"\\n    }]\\n  }, {\\n    \\"id\\": 70,\\n    \\"num\\": \\"070\\",\\n    \\"name\\": \\"Weepinbell\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/070.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"6.4 kg\\",\\n    \\"candy\\": \\"Bellsprout Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.072,\\n    \\"avg_spawns\\": 7.2,\\n    \\"spawn_time\\": \\"09:45\\",\\n    \\"multipliers\\": [1.59],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"069\\",\\n      \\"name\\": \\"Bellsprout\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"071\\",\\n      \\"name\\": \\"Victreebel\\"\\n    }]\\n  }, {\\n    \\"id\\": 71,\\n    \\"num\\": \\"071\\",\\n    \\"name\\": \\"Victreebel\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/071.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"1.70 m\\",\\n    \\"weight\\": \\"15.5 kg\\",\\n    \\"candy\\": \\"Bellsprout Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0059,\\n    \\"avg_spawns\\": 0.59,\\n    \\"spawn_time\\": \\"12:19\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"069\\",\\n      \\"name\\": \\"Bellsprout\\"\\n    }, {\\n      \\"num\\": \\"070\\",\\n      \\"name\\": \\"Weepinbell\\"\\n    }]\\n  }, {\\n    \\"id\\": 72,\\n    \\"num\\": \\"072\\",\\n    \\"name\\": \\"Tentacool\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/072.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.89 m\\",\\n    \\"weight\\": \\"45.5 kg\\",\\n    \\"candy\\": \\"Tentacool Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.81,\\n    \\"avg_spawns\\": 81,\\n    \\"spawn_time\\": \\"03:20\\",\\n    \\"multipliers\\": [2.52],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"073\\",\\n      \\"name\\": \\"Tentacruel\\"\\n    }]\\n  }, {\\n    \\"id\\": 73,\\n    \\"num\\": \\"073\\",\\n    \\"name\\": \\"Tentacruel\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/073.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"1.60 m\\",\\n    \\"weight\\": \\"55.0 kg\\",\\n    \\"candy\\": \\"Tentacool Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.082,\\n    \\"avg_spawns\\": 8.2,\\n    \\"spawn_time\\": \\"23:36\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"072\\",\\n      \\"name\\": \\"Tentacool\\"\\n    }]\\n  }, {\\n    \\"id\\": 74,\\n    \\"num\\": \\"074\\",\\n    \\"name\\": \\"Geodude\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/074.png\\",\\n    \\"type\\": [\\n      \\"Rock\\",\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"20.0 kg\\",\\n    \\"candy\\": \\"Geodude Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 1.19,\\n    \\"avg_spawns\\": 119,\\n    \\"spawn_time\\": \\"12:40\\",\\n    \\"multipliers\\": [\\n      1.75,\\n      1.76\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\",\\n      \\"Fighting\\",\\n      \\"Ground\\",\\n      \\"Steel\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"075\\",\\n      \\"name\\": \\"Graveler\\"\\n    }, {\\n      \\"num\\": \\"076\\",\\n      \\"name\\": \\"Golem\\"\\n    }]\\n  }, {\\n    \\"id\\": 75,\\n    \\"num\\": \\"075\\",\\n    \\"name\\": \\"Graveler\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/075.png\\",\\n    \\"type\\": [\\n      \\"Rock\\",\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"105.0 kg\\",\\n    \\"candy\\": \\"Geodude Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.071,\\n    \\"avg_spawns\\": 7.1,\\n    \\"spawn_time\\": \\"04:53\\",\\n    \\"multipliers\\": [\\n      1.64,\\n      1.72\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\",\\n      \\"Fighting\\",\\n      \\"Ground\\",\\n      \\"Steel\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"074\\",\\n      \\"name\\": \\"Geodude\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"076\\",\\n      \\"name\\": \\"Golem\\"\\n    }]\\n  }, {\\n    \\"id\\": 76,\\n    \\"num\\": \\"076\\",\\n    \\"name\\": \\"Golem\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/076.png\\",\\n    \\"type\\": [\\n      \\"Rock\\",\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"1.40 m\\",\\n    \\"weight\\": \\"300.0 kg\\",\\n    \\"candy\\": \\"Geodude Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0047,\\n    \\"avg_spawns\\": 0.47,\\n    \\"spawn_time\\": \\"12:16\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\",\\n      \\"Fighting\\",\\n      \\"Ground\\",\\n      \\"Steel\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"074\\",\\n      \\"name\\": \\"Geodude\\"\\n    }, {\\n      \\"num\\": \\"075\\",\\n      \\"name\\": \\"Graveler\\"\\n    }]\\n  }, {\\n    \\"id\\": 77,\\n    \\"num\\": \\"077\\",\\n    \\"name\\": \\"Ponyta\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/077.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"30.0 kg\\",\\n    \\"candy\\": \\"Ponyta Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.51,\\n    \\"avg_spawns\\": 51,\\n    \\"spawn_time\\": \\"02:50\\",\\n    \\"multipliers\\": [\\n      1.48,\\n      1.5\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"078\\",\\n      \\"name\\": \\"Rapidash\\"\\n    }]\\n  }, {\\n    \\"id\\": 78,\\n    \\"num\\": \\"078\\",\\n    \\"name\\": \\"Rapidash\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/078.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"1.70 m\\",\\n    \\"weight\\": \\"95.0 kg\\",\\n    \\"candy\\": \\"Ponyta Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.011,\\n    \\"avg_spawns\\": 1.1,\\n    \\"spawn_time\\": \\"04:00\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"077\\",\\n      \\"name\\": \\"Ponyta\\"\\n    }]\\n  }, {\\n    \\"id\\": 79,\\n    \\"num\\": \\"079\\",\\n    \\"name\\": \\"Slowpoke\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/079.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"1.19 m\\",\\n    \\"weight\\": \\"36.0 kg\\",\\n    \\"candy\\": \\"Slowpoke Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 1.05,\\n    \\"avg_spawns\\": 105,\\n    \\"spawn_time\\": \\"07:12\\",\\n    \\"multipliers\\": [2.21],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"080\\",\\n      \\"name\\": \\"Slowbro\\"\\n    }]\\n  }, {\\n    \\"id\\": 80,\\n    \\"num\\": \\"080\\",\\n    \\"name\\": \\"Slowbro\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/080.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"1.60 m\\",\\n    \\"weight\\": \\"78.5 kg\\",\\n    \\"candy\\": \\"Slowpoke Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.036,\\n    \\"avg_spawns\\": 3.6,\\n    \\"spawn_time\\": \\"02:56\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"079\\",\\n      \\"name\\": \\"Slowpoke\\"\\n    }]\\n  }, {\\n    \\"id\\": 81,\\n    \\"num\\": \\"081\\",\\n    \\"name\\": \\"Magnemite\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/081.png\\",\\n    \\"type\\": [\\n      \\"Electric\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"6.0 kg\\",\\n    \\"candy\\": \\"Magnemite Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.71,\\n    \\"avg_spawns\\": 71,\\n    \\"spawn_time\\": \\"04:04\\",\\n    \\"multipliers\\": [\\n      2.16,\\n      2.17\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Water\\",\\n      \\"Ground\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"082\\",\\n      \\"name\\": \\"Magneton\\"\\n    }]\\n  }, {\\n    \\"id\\": 82,\\n    \\"num\\": \\"082\\",\\n    \\"name\\": \\"Magneton\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/082.png\\",\\n    \\"type\\": [\\n      \\"Electric\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"60.0 kg\\",\\n    \\"candy\\": \\"Magnemite Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.023,\\n    \\"avg_spawns\\": 2.3,\\n    \\"spawn_time\\": \\"15:25\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Water\\",\\n      \\"Ground\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"081\\",\\n      \\"name\\": \\"Magnemite\\"\\n    }]\\n  }, {\\n    \\"id\\": 83,\\n    \\"num\\": \\"083\\",\\n    \\"name\\": \\"Farfetch\'d\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/083.png\\",\\n    \\"type\\": [\\n      \\"Normal\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"15.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.0212,\\n    \\"avg_spawns\\": 2.12,\\n    \\"spawn_time\\": \\"01:09\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ]\\n  }, {\\n    \\"id\\": 84,\\n    \\"num\\": \\"084\\",\\n    \\"name\\": \\"Doduo\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/084.png\\",\\n    \\"type\\": [\\n      \\"Normal\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.40 m\\",\\n    \\"weight\\": \\"39.2 kg\\",\\n    \\"candy\\": \\"Doduo Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.52,\\n    \\"avg_spawns\\": 52,\\n    \\"spawn_time\\": \\"05:10\\",\\n    \\"multipliers\\": [\\n      2.19,\\n      2.24\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"085\\",\\n      \\"name\\": \\"Dodrio\\"\\n    }]\\n  }, {\\n    \\"id\\": 85,\\n    \\"num\\": \\"085\\",\\n    \\"name\\": \\"Dodrio\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/085.png\\",\\n    \\"type\\": [\\n      \\"Normal\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.80 m\\",\\n    \\"weight\\": \\"85.2 kg\\",\\n    \\"candy\\": \\"Doduo Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.22,\\n    \\"avg_spawns\\": 22,\\n    \\"spawn_time\\": \\"02:12\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"084\\",\\n      \\"name\\": \\"Doduo\\"\\n    }]\\n  }, {\\n    \\"id\\": 86,\\n    \\"num\\": \\"086\\",\\n    \\"name\\": \\"Seel\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/086.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"1.09 m\\",\\n    \\"weight\\": \\"90.0 kg\\",\\n    \\"candy\\": \\"Seel Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.28,\\n    \\"avg_spawns\\": 28,\\n    \\"spawn_time\\": \\"06:46\\",\\n    \\"multipliers\\": [\\n      1.04,\\n      1.96\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"087\\",\\n      \\"name\\": \\"Dewgong\\"\\n    }]\\n  }, {\\n    \\"id\\": 87,\\n    \\"num\\": \\"087\\",\\n    \\"name\\": \\"Dewgong\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/087.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Ice\\"\\n    ],\\n    \\"height\\": \\"1.70 m\\",\\n    \\"weight\\": \\"120.0 kg\\",\\n    \\"candy\\": \\"Seel Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.013,\\n    \\"avg_spawns\\": 1.3,\\n    \\"spawn_time\\": \\"06:04\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Fighting\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"086\\",\\n      \\"name\\": \\"Seel\\"\\n    }]\\n  }, {\\n    \\"id\\": 88,\\n    \\"num\\": \\"088\\",\\n    \\"name\\": \\"Grimer\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/088.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.89 m\\",\\n    \\"weight\\": \\"30.0 kg\\",\\n    \\"candy\\": \\"Grimer Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.052,\\n    \\"avg_spawns\\": 5.2,\\n    \\"spawn_time\\": \\"15:11\\",\\n    \\"multipliers\\": [2.44],\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"089\\",\\n      \\"name\\": \\"Muk\\"\\n    }]\\n  }, {\\n    \\"id\\": 89,\\n    \\"num\\": \\"089\\",\\n    \\"name\\": \\"Muk\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/089.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"1.19 m\\",\\n    \\"weight\\": \\"30.0 kg\\",\\n    \\"candy\\": \\"Grimer Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0031,\\n    \\"avg_spawns\\": 0.31,\\n    \\"spawn_time\\": \\"01:28\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"088\\",\\n      \\"name\\": \\"Grimer\\"\\n    }]\\n  }, {\\n    \\"id\\": 90,\\n    \\"num\\": \\"090\\",\\n    \\"name\\": \\"Shellder\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/090.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"4.0 kg\\",\\n    \\"candy\\": \\"Shellder Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.52,\\n    \\"avg_spawns\\": 52,\\n    \\"spawn_time\\": \\"07:39\\",\\n    \\"multipliers\\": [2.65],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"091\\",\\n      \\"name\\": \\"Cloyster\\"\\n    }]\\n  }, {\\n    \\"id\\": 91,\\n    \\"num\\": \\"091\\",\\n    \\"name\\": \\"Cloyster\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/091.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Ice\\"\\n    ],\\n    \\"height\\": \\"1.50 m\\",\\n    \\"weight\\": \\"132.5 kg\\",\\n    \\"candy\\": \\"Shellder Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.015,\\n    \\"avg_spawns\\": 1.5,\\n    \\"spawn_time\\": \\"02:33\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Fighting\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"090\\",\\n      \\"name\\": \\"Shellder\\"\\n    }]\\n  }, {\\n    \\"id\\": 92,\\n    \\"num\\": \\"092\\",\\n    \\"name\\": \\"Gastly\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/092.png\\",\\n    \\"type\\": [\\n      \\"Ghost\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"0.1 kg\\",\\n    \\"candy\\": \\"Gastly Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.79,\\n    \\"avg_spawns\\": 79,\\n    \\"spawn_time\\": \\"04:21\\",\\n    \\"multipliers\\": [1.78],\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"093\\",\\n      \\"name\\": \\"Haunter\\"\\n    }, {\\n      \\"num\\": \\"094\\",\\n      \\"name\\": \\"Gengar\\"\\n    }]\\n  }, {\\n    \\"id\\": 93,\\n    \\"num\\": \\"093\\",\\n    \\"name\\": \\"Haunter\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/093.png\\",\\n    \\"type\\": [\\n      \\"Ghost\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"1.60 m\\",\\n    \\"weight\\": \\"0.1 kg\\",\\n    \\"candy\\": \\"Gastly Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.052,\\n    \\"avg_spawns\\": 5.2,\\n    \\"spawn_time\\": \\"00:10\\",\\n    \\"multipliers\\": [\\n      1.56,\\n      1.8\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"092\\",\\n      \\"name\\": \\"Gastly\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"094\\",\\n      \\"name\\": \\"Gengar\\"\\n    }]\\n  }, {\\n    \\"id\\": 94,\\n    \\"num\\": \\"094\\",\\n    \\"name\\": \\"Gengar\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/094.png\\",\\n    \\"type\\": [\\n      \\"Ghost\\",\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"1.50 m\\",\\n    \\"weight\\": \\"40.5 kg\\",\\n    \\"candy\\": \\"Gastly Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0067,\\n    \\"avg_spawns\\": 0.67,\\n    \\"spawn_time\\": \\"03:55\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"092\\",\\n      \\"name\\": \\"Gastly\\"\\n    }, {\\n      \\"num\\": \\"093\\",\\n      \\"name\\": \\"Haunter\\"\\n    }]\\n  }, {\\n    \\"id\\": 95,\\n    \\"num\\": \\"095\\",\\n    \\"name\\": \\"Onix\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/095.png\\",\\n    \\"type\\": [\\n      \\"Rock\\",\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"8.79 m\\",\\n    \\"weight\\": \\"210.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.10,\\n    \\"avg_spawns\\": 10,\\n    \\"spawn_time\\": \\"01:18\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\",\\n      \\"Fighting\\",\\n      \\"Ground\\",\\n      \\"Steel\\"\\n    ]\\n  }, {\\n    \\"id\\": 96,\\n    \\"num\\": \\"096\\",\\n    \\"name\\": \\"Drowzee\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/096.png\\",\\n    \\"type\\": [\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"32.4 kg\\",\\n    \\"candy\\": \\"Drowzee Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 3.21,\\n    \\"avg_spawns\\": 321,\\n    \\"spawn_time\\": \\"01:51\\",\\n    \\"multipliers\\": [\\n      2.08,\\n      2.09\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"097\\",\\n      \\"name\\": \\"Hypno\\"\\n    }]\\n  }, {\\n    \\"id\\": 97,\\n    \\"num\\": \\"097\\",\\n    \\"name\\": \\"Hypno\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/097.png\\",\\n    \\"type\\": [\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"1.60 m\\",\\n    \\"weight\\": \\"75.6 kg\\",\\n    \\"candy\\": \\"Drowzee Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.10,\\n    \\"avg_spawns\\": 10,\\n    \\"spawn_time\\": \\"02:17\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"096\\",\\n      \\"name\\": \\"Drowzee\\"\\n    }]\\n  }, {\\n    \\"id\\": 98,\\n    \\"num\\": \\"098\\",\\n    \\"name\\": \\"Krabby\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/098.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"6.5 kg\\",\\n    \\"candy\\": \\"Krabby Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 2.12,\\n    \\"avg_spawns\\": 212,\\n    \\"spawn_time\\": \\"03:33\\",\\n    \\"multipliers\\": [\\n      2.36,\\n      2.4\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"099\\",\\n      \\"name\\": \\"Kingler\\"\\n    }]\\n  }, {\\n    \\"id\\": 99,\\n    \\"num\\": \\"099\\",\\n    \\"name\\": \\"Kingler\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/099.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"60.0 kg\\",\\n    \\"candy\\": \\"Krabby Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.062,\\n    \\"avg_spawns\\": 6.2,\\n    \\"spawn_time\\": \\"03:44\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"098\\",\\n      \\"name\\": \\"Krabby\\"\\n    }]\\n  }, {\\n    \\"id\\": 100,\\n    \\"num\\": \\"100\\",\\n    \\"name\\": \\"Voltorb\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/100.png\\",\\n    \\"type\\": [\\n      \\"Electric\\"\\n    ],\\n    \\"height\\": \\"0.51 m\\",\\n    \\"weight\\": \\"10.4 kg\\",\\n    \\"candy\\": \\"Voltorb Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.65,\\n    \\"avg_spawns\\": 65,\\n    \\"spawn_time\\": \\"04:36\\",\\n    \\"multipliers\\": [\\n      2.01,\\n      2.02\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"101\\",\\n      \\"name\\": \\"Electrode\\"\\n    }]\\n  }, {\\n    \\"id\\": 101,\\n    \\"num\\": \\"101\\",\\n    \\"name\\": \\"Electrode\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/101.png\\",\\n    \\"type\\": [\\n      \\"Electric\\"\\n    ],\\n    \\"height\\": \\"1.19 m\\",\\n    \\"weight\\": \\"66.6 kg\\",\\n    \\"candy\\": \\"Voltorb Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.02,\\n    \\"avg_spawns\\": 2,\\n    \\"spawn_time\\": \\"04:10\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"100\\",\\n      \\"name\\": \\"Voltorb\\"\\n    }]\\n  }, {\\n    \\"id\\": 102,\\n    \\"num\\": \\"102\\",\\n    \\"name\\": \\"Exeggcute\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/102.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"2.5 kg\\",\\n    \\"candy\\": \\"Exeggcute Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.78,\\n    \\"avg_spawns\\": 78,\\n    \\"spawn_time\\": \\"09:09\\",\\n    \\"multipliers\\": [\\n      2.7,\\n      3.18\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Poison\\",\\n      \\"Flying\\",\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"103\\",\\n      \\"name\\": \\"Exeggutor\\"\\n    }]\\n  }, {\\n    \\"id\\": 103,\\n    \\"num\\": \\"103\\",\\n    \\"name\\": \\"Exeggutor\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/103.png\\",\\n    \\"type\\": [\\n      \\"Grass\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"2.01 m\\",\\n    \\"weight\\": \\"120.0 kg\\",\\n    \\"candy\\": \\"Exeggcute Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.014,\\n    \\"avg_spawns\\": 1.4,\\n    \\"spawn_time\\": \\"12:34\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Poison\\",\\n      \\"Flying\\",\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"102\\",\\n      \\"name\\": \\"Exeggcute\\"\\n    }]\\n  }, {\\n    \\"id\\": 104,\\n    \\"num\\": \\"104\\",\\n    \\"name\\": \\"Cubone\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/104.png\\",\\n    \\"type\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"6.5 kg\\",\\n    \\"candy\\": \\"Cubone Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.61,\\n    \\"avg_spawns\\": 61,\\n    \\"spawn_time\\": \\"01:51\\",\\n    \\"multipliers\\": [1.67],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"105\\",\\n      \\"name\\": \\"Marowak\\"\\n    }]\\n  }, {\\n    \\"id\\": 105,\\n    \\"num\\": \\"105\\",\\n    \\"name\\": \\"Marowak\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/105.png\\",\\n    \\"type\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"45.0 kg\\",\\n    \\"candy\\": \\"Cubone Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.02,\\n    \\"avg_spawns\\": 2,\\n    \\"spawn_time\\": \\"03:59\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"104\\",\\n      \\"name\\": \\"Cubone\\"\\n    }]\\n  }, {\\n    \\"id\\": 106,\\n    \\"num\\": \\"106\\",\\n    \\"name\\": \\"Hitmonlee\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/106.png\\",\\n    \\"type\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"height\\": \\"1.50 m\\",\\n    \\"weight\\": \\"49.8 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.02,\\n    \\"avg_spawns\\": 2,\\n    \\"spawn_time\\": \\"03:59\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Fairy\\"\\n    ]\\n  }, {\\n    \\"id\\": 107,\\n    \\"num\\": \\"107\\",\\n    \\"name\\": \\"Hitmonchan\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/107.png\\",\\n    \\"type\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"height\\": \\"1.40 m\\",\\n    \\"weight\\": \\"50.2 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.022,\\n    \\"avg_spawns\\": 2.2,\\n    \\"spawn_time\\": \\"05:58\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Flying\\",\\n      \\"Psychic\\",\\n      \\"Fairy\\"\\n    ]\\n  }, {\\n    \\"id\\": 108,\\n    \\"num\\": \\"108\\",\\n    \\"name\\": \\"Lickitung\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/108.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"1.19 m\\",\\n    \\"weight\\": \\"65.5 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.011,\\n    \\"avg_spawns\\": 1.1,\\n    \\"spawn_time\\": \\"02:46\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ]\\n  }, {\\n    \\"id\\": 109,\\n    \\"num\\": \\"109\\",\\n    \\"name\\": \\"Koffing\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/109.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"0.61 m\\",\\n    \\"weight\\": \\"1.0 kg\\",\\n    \\"candy\\": \\"Koffing Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.20,\\n    \\"avg_spawns\\": 20,\\n    \\"spawn_time\\": \\"08:16\\",\\n    \\"multipliers\\": [1.11],\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"110\\",\\n      \\"name\\": \\"Weezing\\"\\n    }]\\n  }, {\\n    \\"id\\": 110,\\n    \\"num\\": \\"110\\",\\n    \\"name\\": \\"Weezing\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/110.png\\",\\n    \\"type\\": [\\n      \\"Poison\\"\\n    ],\\n    \\"height\\": \\"1.19 m\\",\\n    \\"weight\\": \\"9.5 kg\\",\\n    \\"candy\\": \\"Koffing Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.016,\\n    \\"avg_spawns\\": 1.6,\\n    \\"spawn_time\\": \\"12:17\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ground\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"109\\",\\n      \\"name\\": \\"Koffing\\"\\n    }]\\n  }, {\\n    \\"id\\": 111,\\n    \\"num\\": \\"111\\",\\n    \\"name\\": \\"Rhyhorn\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/111.png\\",\\n    \\"type\\": [\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"115.0 kg\\",\\n    \\"candy\\": \\"Rhyhorn Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.63,\\n    \\"avg_spawns\\": 63,\\n    \\"spawn_time\\": \\"03:21\\",\\n    \\"multipliers\\": [1.91],\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\",\\n      \\"Fighting\\",\\n      \\"Ground\\",\\n      \\"Steel\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"112\\",\\n      \\"name\\": \\"Rhydon\\"\\n    }]\\n  }, {\\n    \\"id\\": 112,\\n    \\"num\\": \\"112\\",\\n    \\"name\\": \\"Rhydon\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/112.png\\",\\n    \\"type\\": [\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"height\\": \\"1.91 m\\",\\n    \\"weight\\": \\"120.0 kg\\",\\n    \\"candy\\": \\"Rhyhorn Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.022,\\n    \\"avg_spawns\\": 2.2,\\n    \\"spawn_time\\": \\"05:50\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Grass\\",\\n      \\"Ice\\",\\n      \\"Fighting\\",\\n      \\"Ground\\",\\n      \\"Steel\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"111\\",\\n      \\"name\\": \\"Rhyhorn\\"\\n    }]\\n  }, {\\n    \\"id\\": 113,\\n    \\"num\\": \\"113\\",\\n    \\"name\\": \\"Chansey\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/113.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"1.09 m\\",\\n    \\"weight\\": \\"34.6 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.013,\\n    \\"avg_spawns\\": 1.3,\\n    \\"spawn_time\\": \\"04:46\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ]\\n  }, {\\n    \\"id\\": 114,\\n    \\"num\\": \\"114\\",\\n    \\"name\\": \\"Tangela\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/114.png\\",\\n    \\"type\\": [\\n      \\"Grass\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"35.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.228,\\n    \\"avg_spawns\\": 22.8,\\n    \\"spawn_time\\": \\"23:13\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Ice\\",\\n      \\"Poison\\",\\n      \\"Flying\\",\\n      \\"Bug\\"\\n    ]\\n  }, {\\n    \\"id\\": 115,\\n    \\"num\\": \\"115\\",\\n    \\"name\\": \\"Kangaskhan\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/115.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"2.21 m\\",\\n    \\"weight\\": \\"80.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.0086,\\n    \\"avg_spawns\\": 0.86,\\n    \\"spawn_time\\": \\"02:40\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ]\\n  }, {\\n    \\"id\\": 116,\\n    \\"num\\": \\"116\\",\\n    \\"name\\": \\"Horsea\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/116.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"8.0 kg\\",\\n    \\"candy\\": \\"Horsea Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 1.13,\\n    \\"avg_spawns\\": 113,\\n    \\"spawn_time\\": \\"02:53\\",\\n    \\"multipliers\\": [2.23],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"117\\",\\n      \\"name\\": \\"Seadra\\"\\n    }]\\n  }, {\\n    \\"id\\": 117,\\n    \\"num\\": \\"117\\",\\n    \\"name\\": \\"Seadra\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/117.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"1.19 m\\",\\n    \\"weight\\": \\"25.0 kg\\",\\n    \\"candy\\": \\"Horsea Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.034,\\n    \\"avg_spawns\\": 3.4,\\n    \\"spawn_time\\": \\"03:18\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"116\\",\\n      \\"name\\": \\"Horsea\\"\\n    }]\\n  }, {\\n    \\"id\\": 118,\\n    \\"num\\": \\"118\\",\\n    \\"name\\": \\"Goldeen\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/118.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.61 m\\",\\n    \\"weight\\": \\"15.0 kg\\",\\n    \\"candy\\": \\"Goldeen Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 2.18,\\n    \\"avg_spawns\\": 218,\\n    \\"spawn_time\\": \\"03:14\\",\\n    \\"multipliers\\": [\\n      2.15,\\n      2.2\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"119\\",\\n      \\"name\\": \\"Seaking\\"\\n    }]\\n  }, {\\n    \\"id\\": 119,\\n    \\"num\\": \\"119\\",\\n    \\"name\\": \\"Seaking\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/119.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"39.0 kg\\",\\n    \\"candy\\": \\"Goldeen Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.08,\\n    \\"avg_spawns\\": 8,\\n    \\"spawn_time\\": \\"05:21\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"118\\",\\n      \\"name\\": \\"Goldeen\\"\\n    }]\\n  }, {\\n    \\"id\\": 120,\\n    \\"num\\": \\"120\\",\\n    \\"name\\": \\"Staryu\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/120.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"34.5 kg\\",\\n    \\"candy\\": \\"Staryu Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 1.95,\\n    \\"avg_spawns\\": 195,\\n    \\"spawn_time\\": \\"22:59\\",\\n    \\"multipliers\\": [\\n      2.38,\\n      2.41\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"121\\",\\n      \\"name\\": \\"Starmie\\"\\n    }]\\n  }, {\\n    \\"id\\": 121,\\n    \\"num\\": \\"121\\",\\n    \\"name\\": \\"Starmie\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/121.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"1.09 m\\",\\n    \\"weight\\": \\"80.0 kg\\",\\n    \\"candy\\": \\"Staryu Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.034,\\n    \\"avg_spawns\\": 3.4,\\n    \\"spawn_time\\": \\"06:57\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"120\\",\\n      \\"name\\": \\"Staryu\\"\\n    }]\\n  }, {\\n    \\"id\\": 122,\\n    \\"num\\": \\"122\\",\\n    \\"name\\": \\"Mr. Mime\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/122.png\\",\\n    \\"type\\": [\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"54.5 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.0031,\\n    \\"avg_spawns\\": 0.31,\\n    \\"spawn_time\\": \\"01:51\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ]\\n  }, {\\n    \\"id\\": 123,\\n    \\"num\\": \\"123\\",\\n    \\"name\\": \\"Scyther\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/123.png\\",\\n    \\"type\\": [\\n      \\"Bug\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.50 m\\",\\n    \\"weight\\": \\"56.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.14,\\n    \\"avg_spawns\\": 14,\\n    \\"spawn_time\\": \\"05:43\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Electric\\",\\n      \\"Ice\\",\\n      \\"Flying\\",\\n      \\"Rock\\"\\n    ]\\n  }, {\\n    \\"id\\": 124,\\n    \\"num\\": \\"124\\",\\n    \\"name\\": \\"Jynx\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/124.png\\",\\n    \\"type\\": [\\n      \\"Ice\\",\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"1.40 m\\",\\n    \\"weight\\": \\"40.6 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.35,\\n    \\"avg_spawns\\": 35,\\n    \\"spawn_time\\": \\"05:41\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Bug\\",\\n      \\"Rock\\",\\n      \\"Ghost\\",\\n      \\"Dark\\",\\n      \\"Steel\\"\\n    ]\\n  }, {\\n    \\"id\\": 125,\\n    \\"num\\": \\"125\\",\\n    \\"name\\": \\"Electabuzz\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/125.png\\",\\n    \\"type\\": [\\n      \\"Electric\\"\\n    ],\\n    \\"height\\": \\"1.09 m\\",\\n    \\"weight\\": \\"30.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.074,\\n    \\"avg_spawns\\": 7.4,\\n    \\"spawn_time\\": \\"04:28\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ground\\"\\n    ]\\n  }, {\\n    \\"id\\": 126,\\n    \\"num\\": \\"126\\",\\n    \\"name\\": \\"Magmar\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/126.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"44.5 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.10,\\n    \\"avg_spawns\\": 10,\\n    \\"spawn_time\\": \\"20:36\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ]\\n  }, {\\n    \\"id\\": 127,\\n    \\"num\\": \\"127\\",\\n    \\"name\\": \\"Pinsir\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/127.png\\",\\n    \\"type\\": [\\n      \\"Bug\\"\\n    ],\\n    \\"height\\": \\"1.50 m\\",\\n    \\"weight\\": \\"55.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.99,\\n    \\"avg_spawns\\": 99,\\n    \\"spawn_time\\": \\"03:25\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Flying\\",\\n      \\"Rock\\"\\n    ]\\n  }, {\\n    \\"id\\": 128,\\n    \\"num\\": \\"128\\",\\n    \\"name\\": \\"Tauros\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/128.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"1.40 m\\",\\n    \\"weight\\": \\"88.4 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.12,\\n    \\"avg_spawns\\": 12,\\n    \\"spawn_time\\": \\"00:37\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ]\\n  }, {\\n    \\"id\\": 129,\\n    \\"num\\": \\"129\\",\\n    \\"name\\": \\"Magikarp\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/129.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.89 m\\",\\n    \\"weight\\": \\"10.0 kg\\",\\n    \\"candy\\": \\"Magikarp Candy\\",\\n    \\"candy_count\\": 400,\\n    \\"egg\\": \\"2 km\\",\\n    \\"spawn_chance\\": 4.78,\\n    \\"avg_spawns\\": 478,\\n    \\"spawn_time\\": \\"14:26\\",\\n    \\"multipliers\\": [\\n      10.1,\\n      11.8\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"130\\",\\n      \\"name\\": \\"Gyarados\\"\\n    }]\\n  }, {\\n    \\"id\\": 130,\\n    \\"num\\": \\"130\\",\\n    \\"name\\": \\"Gyarados\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/130.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"6.50 m\\",\\n    \\"weight\\": \\"235.0 kg\\",\\n    \\"candy\\": \\"Magikarp Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0032,\\n    \\"avg_spawns\\": 0.32,\\n    \\"spawn_time\\": \\"02:15\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"129\\",\\n      \\"name\\": \\"Magikarp\\"\\n    }]\\n  }, {\\n    \\"id\\": 131,\\n    \\"num\\": \\"131\\",\\n    \\"name\\": \\"Lapras\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/131.png\\",\\n    \\"type\\": [\\n      \\"Water\\",\\n      \\"Ice\\"\\n    ],\\n    \\"height\\": \\"2.49 m\\",\\n    \\"weight\\": \\"220.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.006,\\n    \\"avg_spawns\\": 0.6,\\n    \\"spawn_time\\": \\"08:59\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Fighting\\",\\n      \\"Rock\\"\\n    ]\\n  }, {\\n    \\"id\\": 132,\\n    \\"num\\": \\"132\\",\\n    \\"name\\": \\"Ditto\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/132.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"4.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0,\\n    \\"avg_spawns\\": 0,\\n    \\"spawn_time\\": \\"N/A\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ]\\n  }, {\\n    \\"id\\": 133,\\n    \\"num\\": \\"133\\",\\n    \\"name\\": \\"Eevee\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/133.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.30 m\\",\\n    \\"weight\\": \\"6.5 kg\\",\\n    \\"candy\\": \\"Eevee Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 2.75,\\n    \\"avg_spawns\\": 275,\\n    \\"spawn_time\\": \\"05:32\\",\\n    \\"multipliers\\": [\\n      2.02,\\n      2.64\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"134\\",\\n      \\"name\\": \\"Vaporeon\\"\\n    }, {\\n      \\"num\\": \\"135\\",\\n      \\"name\\": \\"Jolteon\\"\\n    }, {\\n      \\"num\\": \\"136\\",\\n      \\"name\\": \\"Flareon\\"\\n    }]\\n  }, {\\n    \\"id\\": 134,\\n    \\"num\\": \\"134\\",\\n    \\"name\\": \\"Vaporeon\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/134.png\\",\\n    \\"type\\": [\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"29.0 kg\\",\\n    \\"candy\\": \\"Eevee Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.014,\\n    \\"avg_spawns\\": 1.4,\\n    \\"spawn_time\\": \\"10:54\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"133\\",\\n      \\"name\\": \\"Eevee\\"\\n    }]\\n  }, {\\n    \\"id\\": 135,\\n    \\"num\\": \\"135\\",\\n    \\"name\\": \\"Jolteon\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/135.png\\",\\n    \\"type\\": [\\n      \\"Electric\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"24.5 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.012,\\n    \\"avg_spawns\\": 1.2,\\n    \\"spawn_time\\": \\"02:30\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ground\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"133\\",\\n      \\"name\\": \\"Eevee\\"\\n    }]\\n  }, {\\n    \\"id\\": 136,\\n    \\"num\\": \\"136\\",\\n    \\"name\\": \\"Flareon\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/136.png\\",\\n    \\"type\\": [\\n      \\"Fire\\"\\n    ],\\n    \\"height\\": \\"0.89 m\\",\\n    \\"weight\\": \\"25.0 kg\\",\\n    \\"candy\\": \\"Eevee Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.017,\\n    \\"avg_spawns\\": 1.7,\\n    \\"spawn_time\\": \\"07:02\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Ground\\",\\n      \\"Rock\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"133\\",\\n      \\"name\\": \\"Eevee\\"\\n    }]\\n  }, {\\n    \\"id\\": 137,\\n    \\"num\\": \\"137\\",\\n    \\"name\\": \\"Porygon\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/137.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"0.79 m\\",\\n    \\"weight\\": \\"36.5 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"5 km\\",\\n    \\"spawn_chance\\": 0.012,\\n    \\"avg_spawns\\": 1.2,\\n    \\"spawn_time\\": \\"02:49\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ]\\n  }, {\\n    \\"id\\": 138,\\n    \\"num\\": \\"138\\",\\n    \\"name\\": \\"Omanyte\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/138.png\\",\\n    \\"type\\": [\\n      \\"Rock\\",\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"7.5 kg\\",\\n    \\"candy\\": \\"Omanyte Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.14,\\n    \\"avg_spawns\\": 14,\\n    \\"spawn_time\\": \\"10:23\\",\\n    \\"multipliers\\": [2.12],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Fighting\\",\\n      \\"Ground\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"139\\",\\n      \\"name\\": \\"Omastar\\"\\n    }]\\n  }, {\\n    \\"id\\": 139,\\n    \\"num\\": \\"139\\",\\n    \\"name\\": \\"Omastar\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/139.png\\",\\n    \\"type\\": [\\n      \\"Rock\\",\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.99 m\\",\\n    \\"weight\\": \\"35.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"Omanyte Candy\\",\\n    \\"spawn_chance\\": 0.0061,\\n    \\"avg_spawns\\": 0.61,\\n    \\"spawn_time\\": \\"05:04\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Fighting\\",\\n      \\"Ground\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"138\\",\\n      \\"name\\": \\"Omanyte\\"\\n    }]\\n  }, {\\n    \\"id\\": 140,\\n    \\"num\\": \\"140\\",\\n    \\"name\\": \\"Kabuto\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/140.png\\",\\n    \\"type\\": [\\n      \\"Rock\\",\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"0.51 m\\",\\n    \\"weight\\": \\"11.5 kg\\",\\n    \\"candy\\": \\"Kabuto Candy\\",\\n    \\"candy_count\\": 50,\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.10,\\n    \\"avg_spawns\\": 10,\\n    \\"spawn_time\\": \\"00:05\\",\\n    \\"multipliers\\": [\\n      1.97,\\n      2.37\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Fighting\\",\\n      \\"Ground\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"141\\",\\n      \\"name\\": \\"Kabutops\\"\\n    }]\\n  }, {\\n    \\"id\\": 141,\\n    \\"num\\": \\"141\\",\\n    \\"name\\": \\"Kabutops\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/141.png\\",\\n    \\"type\\": [\\n      \\"Rock\\",\\n      \\"Water\\"\\n    ],\\n    \\"height\\": \\"1.30 m\\",\\n    \\"weight\\": \\"40.5 kg\\",\\n    \\"candy\\": \\"Kabuto Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0032,\\n    \\"avg_spawns\\": 0.32,\\n    \\"spawn_time\\": \\"23:40\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Electric\\",\\n      \\"Grass\\",\\n      \\"Fighting\\",\\n      \\"Ground\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"140\\",\\n      \\"name\\": \\"Kabuto\\"\\n    }]\\n  }, {\\n    \\"id\\": 142,\\n    \\"num\\": \\"142\\",\\n    \\"name\\": \\"Aerodactyl\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/142.png\\",\\n    \\"type\\": [\\n      \\"Rock\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.80 m\\",\\n    \\"weight\\": \\"59.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.018,\\n    \\"avg_spawns\\": 1.8,\\n    \\"spawn_time\\": \\"23:40\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Electric\\",\\n      \\"Ice\\",\\n      \\"Rock\\",\\n      \\"Steel\\"\\n    ]\\n  }, {\\n    \\"id\\": 143,\\n    \\"num\\": \\"143\\",\\n    \\"name\\": \\"Snorlax\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/143.png\\",\\n    \\"type\\": [\\n      \\"Normal\\"\\n    ],\\n    \\"height\\": \\"2.11 m\\",\\n    \\"weight\\": \\"460.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.016,\\n    \\"avg_spawns\\": 1.6,\\n    \\"spawn_time\\": \\"23:40\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fighting\\"\\n    ]\\n  }, {\\n    \\"id\\": 144,\\n    \\"num\\": \\"144\\",\\n    \\"name\\": \\"Articuno\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/144.png\\",\\n    \\"type\\": [\\n      \\"Ice\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.70 m\\",\\n    \\"weight\\": \\"55.4 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0,\\n    \\"avg_spawns\\": 0,\\n    \\"spawn_time\\": \\"N/A\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Fire\\",\\n      \\"Electric\\",\\n      \\"Rock\\",\\n      \\"Steel\\"\\n    ]\\n  }, {\\n    \\"id\\": 145,\\n    \\"num\\": \\"145\\",\\n    \\"name\\": \\"Zapdos\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/145.png\\",\\n    \\"type\\": [\\n      \\"Electric\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"1.60 m\\",\\n    \\"weight\\": \\"52.6 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0,\\n    \\"avg_spawns\\": 0,\\n    \\"spawn_time\\": \\"N/A\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ice\\",\\n      \\"Rock\\"\\n    ]\\n  }, {\\n    \\"id\\": 146,\\n    \\"num\\": \\"146\\",\\n    \\"name\\": \\"Moltres\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/146.png\\",\\n    \\"type\\": [\\n      \\"Fire\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"2.01 m\\",\\n    \\"weight\\": \\"60.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0,\\n    \\"avg_spawns\\": 0,\\n    \\"spawn_time\\": \\"N/A\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Water\\",\\n      \\"Electric\\",\\n      \\"Rock\\"\\n    ]\\n  }, {\\n    \\"id\\": 147,\\n    \\"num\\": \\"147\\",\\n    \\"name\\": \\"Dratini\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/147.png\\",\\n    \\"type\\": [\\n      \\"Dragon\\"\\n    ],\\n    \\"height\\": \\"1.80 m\\",\\n    \\"weight\\": \\"3.3 kg\\",\\n    \\"candy\\": \\"Dratini Candy\\",\\n    \\"candy_count\\": 25,\\n    \\"egg\\": \\"10 km\\",\\n    \\"spawn_chance\\": 0.30,\\n    \\"avg_spawns\\": 30,\\n    \\"spawn_time\\": \\"06:41\\",\\n    \\"multipliers\\": [\\n      1.83,\\n      1.84\\n    ],\\n    \\"weaknesses\\": [\\n      \\"Ice\\",\\n      \\"Dragon\\",\\n      \\"Fairy\\"\\n    ],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"148\\",\\n      \\"name\\": \\"Dragonair\\"\\n    }, {\\n      \\"num\\": \\"149\\",\\n      \\"name\\": \\"Dragonite\\"\\n    }]\\n  }, {\\n    \\"id\\": 148,\\n    \\"num\\": \\"148\\",\\n    \\"name\\": \\"Dragonair\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/148.png\\",\\n    \\"type\\": [\\n      \\"Dragon\\"\\n    ],\\n    \\"height\\": \\"3.99 m\\",\\n    \\"weight\\": \\"16.5 kg\\",\\n    \\"candy\\": \\"Dratini Candy\\",\\n    \\"candy_count\\": 100,\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.02,\\n    \\"avg_spawns\\": 2,\\n    \\"spawn_time\\": \\"11:57\\",\\n    \\"multipliers\\": [2.05],\\n    \\"weaknesses\\": [\\n      \\"Ice\\",\\n      \\"Dragon\\",\\n      \\"Fairy\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"147\\",\\n      \\"name\\": \\"Dratini\\"\\n    }],\\n    \\"next_evolution\\": [{\\n      \\"num\\": \\"149\\",\\n      \\"name\\": \\"Dragonite\\"\\n    }]\\n  }, {\\n    \\"id\\": 149,\\n    \\"num\\": \\"149\\",\\n    \\"name\\": \\"Dragonite\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/149.png\\",\\n    \\"type\\": [\\n      \\"Dragon\\",\\n      \\"Flying\\"\\n    ],\\n    \\"height\\": \\"2.21 m\\",\\n    \\"weight\\": \\"210.0 kg\\",\\n    \\"candy\\": \\"Dratini Candy\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0.0011,\\n    \\"avg_spawns\\": 0.11,\\n    \\"spawn_time\\": \\"23:38\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Ice\\",\\n      \\"Rock\\",\\n      \\"Dragon\\",\\n      \\"Fairy\\"\\n    ],\\n    \\"prev_evolution\\": [{\\n      \\"num\\": \\"147\\",\\n      \\"name\\": \\"Dratini\\"\\n    }, {\\n      \\"num\\": \\"148\\",\\n      \\"name\\": \\"Dragonair\\"\\n    }]\\n  }, {\\n    \\"id\\": 150,\\n    \\"num\\": \\"150\\",\\n    \\"name\\": \\"Mewtwo\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/150.png\\",\\n    \\"type\\": [\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"2.01 m\\",\\n    \\"weight\\": \\"122.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0,\\n    \\"avg_spawns\\": 0,\\n    \\"spawn_time\\": \\"N/A\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ]\\n  }, {\\n    \\"id\\": 151,\\n    \\"num\\": \\"151\\",\\n    \\"name\\": \\"Mew\\",\\n    \\"img\\": \\"http://www.serebii.net/pokemongo/pokemon/151.png\\",\\n    \\"type\\": [\\n      \\"Psychic\\"\\n    ],\\n    \\"height\\": \\"0.41 m\\",\\n    \\"weight\\": \\"4.0 kg\\",\\n    \\"candy\\": \\"None\\",\\n    \\"egg\\": \\"Not in Eggs\\",\\n    \\"spawn_chance\\": 0,\\n    \\"avg_spawns\\": 0,\\n    \\"spawn_time\\": \\"N/A\\",\\n    \\"multipliers\\": null,\\n    \\"weaknesses\\": [\\n      \\"Bug\\",\\n      \\"Ghost\\",\\n      \\"Dark\\"\\n    ]\\n  }]\\n}\\n```\\n\\n</details>\\n\\nCe n\'est \xe9videmment pas impossible, mais cela donne un fichier assez **ilisible** et complexe \xe0 maintenir.\\n\\n#### Une configmap en HCL\\n\\nMaintenant.. l\'avantage de Terraform est de pouvoir **s\xe9parer** le manifest des donn\xe9es.\\n\\n```hcl\\nresource \\"kubernetes_config_map\\" \\"data_user\\" {\\n  metadata {\\n    name      = \\"data-user\\"\\n    namespace = \\"hcl\\"\\n  }\\n\\n  data = {\\n    \\"data.ini\\" = \\"${file(\\"${path.module}/data.ini\\")}\\"\\n  }\\n}\\n```\\n\\nLe HCL n\'a rien \xe0 envier du YAML de Kubernetes.\\n\\n## Et concernant un d\xe9ploiement ?\\n\\nDans un bon \xe9cosyst\xe8me, nous d\xe9ployons via Helm, voyons comment Hashicorp nous pr\xe9sente \xe7a.\\n\\n:::info Qu\'est ce que Helm ?\\n\\nHelm est un outil de templating YAML similaire \xe0 Jinja2, on l\'utilise dans les d\xe9ploiements n\xe9c\xe9ssitant de nombreux fichiers YAML *(service, deploy, pvc, scaler\u2026)*\\n\\n:::\\n\\nHashicorp propose \xe9galement un module **Helm** :\\n\\n```terraform\\nvariable \\"if_clusterenabled\\" {\\n  type = string\\n  default = \\"true\\"\\n}\\n\\n\\nresource \\"helm_release\\" \\"redisexample\\" {\\n  name       = \\"my-redis-release\\"\\n  repository = \\"https://charts.bitnami.com/bitnami\\"\\n  chart      = \\"redis\\"\\n  version    = \\"17.3.9\\"\\n  namespace  = \\"hcl\\"\\n\\n  values = [\\n    \\"${file(\\"values.yaml\\")}\\"\\n  ]\\n\\n  set {\\n    name  = \\"cluster.enabled\\"\\n    value = var.if_clusterenabled\\n  }\\n\\n  set {\\n    name  = \\"metrics.enabled\\"\\n    value = \\"true\\"\\n  }\\n\\n}\\n\\n```\\n\\n[![asciicast](https://asciinema.org/a/1IkT2YDIoMiqd9dhomn4mnmDM.svg)](https://asciinema.org/a/1IkT2YDIoMiqd9dhomn4mnmDM)\\n\\nDans ce cas l\xe0, je peux injecter les variables:\\n\\n- provenants du fichier `values.yaml`\\n- pr\xe9sentes dans le fichier terraform\\n\\nComme dit dans l\'introduction de cet article : la force de terraform vient de ses providers, il est donc possible de r\xe9cup\xe9rer des variables depuis un serveur Vault, un bitwarden, ou m\xeame un KeePass.\\n\\n## k2tf - Migrer ses yaml vers Terraform\\n\\nHistoire de convaincre les flemmards, voici un projet Github permettant de **convertir ses fichiers YAML vers des fichiers Terraform**.\\nLes fichiers g\xe9n\xe9r\xe9s n\'ont besoin que d\'un `provider.tf` avant de pouvoir \xeatre d\xe9ploy\xe9s.\\n\\n[![asciicast](https://asciinema.org/a/5LzAc7Eha7w7dwrktAxcMdpIc.svg)](https://asciinema.org/a/5LzAc7Eha7w7dwrktAxcMdpIc)\\n\\n## Conclusion\\n\\nLe HCL apporte de nombreux avantages dans l\'administration d\'un cluster Kubernetes. En int\xe9grant les modules Terraform,on se soustrait d\'une configuration statique sans alourdir le cluster. *(par exemple,l\'usage des initPods qui peuvent \xeatre utilis\xe9s pour r\xe9cup\xe9rer du contenu stock\xe9 ailleurs alors que Terraform peut le faire durant le d\xe9ploiement)*. J\'ai h\xe2te de voir comment Terraform et Kubernetes fonctionneront \xe0 l\'avenir, et quelles int\xe9grations seront possibles.\\n\\n:::caution Pulumi?\\n\\nMais pour vous ouvrir d\'autres possibilit\xe9s et vous d\xe9barasser d\'un DSL, il existe un outil bien pratique nomm\xe9 Pulumi qui permet de faire les m\xeames choses que Terraform depuis un r\xe9el langage de programmation comme le Python, le Go, le Java etc\u2026\\n\\n:::\\n\\nMerci de votre lecture!"},{"id":"cluster-maj","metadata":{"permalink":"/TheBidouilleur.xyz/blog/cluster-maj","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2022-11-10-Cluster-MAJ/index.md","source":"@site/blog/2022-11-10-Cluster-MAJ/index.md","title":"Gardez vos clusters \xe0 jour","description":"Introduction","date":"2022-11-10T00:00:00.000Z","formattedDate":"10 novembre 2022","tags":[{"label":"docker","permalink":"/TheBidouilleur.xyz/blog/tags/docker"},{"label":"swarm","permalink":"/TheBidouilleur.xyz/blog/tags/swarm"},{"label":"kubernetes","permalink":"/TheBidouilleur.xyz/blog/tags/kubernetes"}],"readingTime":5.505,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"cluster-maj","title":"Gardez vos clusters \xe0 jour","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["docker","swarm","kubernetes"]},"prevItem":{"title":"Kubernetes en HCL","permalink":"/TheBidouilleur.xyz/blog/kubernetes-hcl"},"nextItem":{"title":"Remarkable, une avanc\xe9e dans les prises de notes","permalink":"/TheBidouilleur.xyz/blog/remarkable"}},"content":"## Introduction\\r\\n\\r\\nDepuis que le mouvement DevOps a commenc\xe9 (ou plut\xf4t *Platform engineering*), on met le th\xe8me de la haute-disponibilit\xe9 sur le devant de la sc\xe8ne. Et une des solutions les plus polyvalentes pour faire de la haute disponibilit\xe9 est de cr\xe9er des clusters d\'applications. (et *de facto* : des conteneurs)\\r\\n\\r\\nJ\'ai donc administr\xe9 un cluster Swarm pendant quelques ann\xe9es et je suis r\xe9cemment pass\xe9 sous Kubernetes *(k3s pour \xeatre pr\xe9cis)*. Et \xe0 force d\'avoir des clusters contenant plusieurs centaines de conteneurs, on en oublie la maintenance et la mise \xe0 jour.\\r\\n\\r\\nEt dans cet article, on va parler des mises \xe0 jour.\\r\\n\\r\\n## Solutions de mise \xe0 jour de conteneur hors cluster\\r\\n\\r\\n### WatchTower\\r\\n\\r\\nJe pense que la solution la plus connue est [Watchtower](https://containrrr.dev/watchtower/)\\r\\n\\r\\nWatchtower est facile d\'utilisation et se base (comme beaucoup d\'autre) sur les **labels**. Un label permet de d\xe9finir quelques param\xe8tres et d\'activer (ou de d\xe9sactiver) la surveillance des mises \xe0 jour.\\r\\n\\r\\n:::note Mettre \xe0 jour, ce n\'est pas toujours bien\u2026\\r\\nAttention \xe0 ne pas mettre \xe0 jour automatiquement des programmes sensibles ! Nous ne pouvons pas v\xe9rifier ce que contient une mise \xe0 jour si elle ne va pas casser quelque chose.\\r\\nIl ne tient qu\'\xe0 vous de choisir les applications \xe0 surveiller, et \xe0 d\xe9clencher une mise \xe0 jour ou non.\\r\\n:::\\r\\n\\r\\nWatchTower vous notifiera de plusieurs mani\xe8res :\\r\\n\\r\\n- email\\r\\n- slack\\r\\n- msteams\\r\\n- gotify\\r\\n- shoutrrr\\r\\n\\r\\nEt parmi ces m\xe9thodes, vous n\'avez pas que des solutions propri\xe9taires, libre \xe0 vous d\'h\xe9berger un shoutrrr, un gotify ou d\'utiliser votre smtp pour que ces informations ne sortent pas de votre SI ! *(Je reproche beaucoup l\'usage de msteams, slack, discord pour recevoir ses notifications)*\\r\\n\\r\\nWatchTower scannera les mises \xe0 jour de mani\xe8re r\xe9guli\xe8re *(configurable)*.\\r\\n\\r\\n### container-updater (de [@PAPAMICA](https://github.com/PAPAMICA))\\r\\n\\r\\nLa solution la plus fournie/complexe n\'est pas toujours la meilleure. Papamica a mis en place un script bash r\xe9pondant \xe0 ses besoins pr\xe9cis *(que beaucoup d\'autres personnes doivent avoir)* : un syst\xe8me de mise \xe0 jour le notifiant par Discord et Zabbix.\\r\\n\\r\\nCelui-ci se base aussi par les labels et prend \xe9galement en charge le cas o\xf9 l\'on veut mettre \xe0 jour par docker-compose. (*au lieu de faire un docker pull, docker restart comme Watchtower*)\\r\\n\\r\\n```yaml\\r\\nlabels:\\r\\n    - \\"autoupdate=true\\"\\r\\n    - \\"autoupdate.docker-compose=/link/to/docker-compose.yml\\"\\r\\n```\\r\\n\\r\\nM\xeame si je ne m\'en sers pas, j\'ai eu une \xe9poque o\xf9 j\'utilisais Zabbix et o\xf9 j\'avais le besoin d\'\xeatre notifi\xe9 sur mon Zabbix. *(qui lui me notifiait par Mail/Gotify)*\\r\\n\\r\\nPapamica pr\xe9cise qu\'il compte ajouter le support de registre priv\xe9 *(pour le moment que le github registry ou dockerhub)* ainsi que d\'autres m\xe9thodes de notification.\\r\\n\\r\\n## Solutions pour Swarm\\r\\n\\r\\nSwarm est surement l\'orchestrateur de conteneur sur lequel j\'ai pris le plus de plaisir : c\'est ****simple**** ! On apprend vite, on d\xe9couvre vite et on a vite des r\xe9sultats.\\r\\nMais j\'ai d\xe9j\xe0 \xe9crit des \xe9loges \xe0 Swarm dans un [autre article](/blog/presentation-docker-swarm/)...\\r\\n\\r\\n### Sheperd\\r\\n\\r\\nCe que j\'aime dans le programme de Papamica (et qui va avec Sheperd) c\'est qu\'on garde le bash comme langage central. Un langage que l\'on connait tous dans les grandes lignes gr\xe2ce \xe0 Linux, et que l\'on peut lire et modifier pour peu qu\'on y prenne le temps.\\r\\n\\r\\nLe code de Sheperd ne fait que [~200 lignes](https://github.com/djmaze/shepherd/blob/master/shepherd) et fonctionne tr\xe8s bien comme \xe7a.\\r\\n\\r\\n```yaml\\r\\nversion: \\"3\\"\\r\\nservices:\\r\\n  ...\\r\\n  shepherd:\\r\\n    build: .\\r\\n    image: mazzolino/shepherd\\r\\n    volumes:\\r\\n      - /var/run/docker.sock:/var/run/docker.sock\\r\\n    deploy:\\r\\n      placement:\\r\\n        constraints:\\r\\n        - node.role == manager\\r\\n```\\r\\n\\r\\nCelui-ci acceptera plusieurs registres priv\xe9s, ce qui donne un bel avantage compar\xe9 aux autres solutions pr\xe9sent\xe9es.\\r\\nExemple\xa0:\\r\\n\\r\\n```yaml\\r\\n    deploy:\\r\\n        labels:\\r\\n            - shepherd.enable=true\\r\\n            - shepherd.auth.config=blog\\r\\n```\\r\\n\\r\\nSheperd n\'inclut pas *(par d\xe9faut)* de syst\xe8me de notification. C\'est pourquoi son cr\xe9ateur a d\xe9cid\xe9 de proposer un [sidecar Apprise en alternative](https://github.com/djmaze/shepherd/blob/master/docker-compose.apprise.yml). Qui peut rediriger vers beaucoup de choses comme Telegram, SMS, Gotify, Mail, Slack, msteams etc....\\r\\n\\r\\nJe pense que c\'est la solution la plus simple et la plus polyvalente. J\'esp\xe8re qu\'on la retrouvera dans d\'autres contextes. *(mais je ne m\'\xe9tale pas trop sur le sujet, j\'aimerais bien \xe9crire un article sur \xe7a)*.\\r\\n\\r\\nJ\'ai utilis\xe9 Sheperd pendant une bonne p\xe9riode et je n\'ai eu aucun soucis.\\r\\n\\r\\n## Solutions pour Kubernetes\\r\\n\\r\\nPour Kubernetes, on commence \xe0 perdre en simplicit\xe9. D\'autant plus qu\'avec l\'option `imagePullPolicy: Always`, il suffit juste de red\xe9marrer un pod pour r\xe9cup\xe9rer la derni\xe8re image avec le m\xeame *tag*.\\r\\nPendant un long moment, j\'ai utilis\xe9 ArgoCD pour mettre \xe0 jour mes configurations et re-d\xe9ployer mes images \xe0 chaque mise \xe0 jour sur Git.\\r\\n\\r\\nMais ArgoCD ne sert qu\'\xe0 **mettre \xe0 jour la configuration** et non pas l\'image. La m\xe9thodologie est incorrecte et il est n\xe9cessaire de trouver un outil adapt\xe9 pour \xe7a.\\r\\n\\r\\n### Keel.sh\\r\\n\\r\\nKeel est un outil r\xe9pondant au m\xeame besoin : Mettre \xe0 jour les images des pods. Mais il incorpore plusieurs fonctionnalit\xe9s qu\'on ne retrouve pas ailleurs.\\r\\n\\r\\n![Keel](https://keel.sh/img/keel_high_level.png)\\r\\n\\r\\nSi on souhaite garder le m\xeame fonctionnement que les alternatives *(c.-\xe0-d r\xe9guli\xe8rement v\xe9rifier les mises \xe0 jour)*, c\'est possible\xa0:\\r\\n\\r\\n```yaml\\r\\nmetadata:\\r\\n  annotations:\\r\\n    keel.sh/policy: force\\r\\n    keel.sh/trigger: poll\\r\\n    keel.sh/pollSchedule: \\"@every 3m\\"\\r\\n```\\r\\n\\r\\nMais l\xe0 o\xf9 Keel brille, c\'est qu\'il propose des **triggers** et des **approvals**.\\r\\n\\r\\nUn trigger, c\'est un \xe9v\xe9nement qui va d\xe9clencher la mise \xe0 jour de Keel. On peut imaginer un webhook provenant de Github, Dockerhub, Gitea qui va d\xe9clencher la mise \xe0 jour du serveur. *(On \xe9vite donc une crontab r\xe9guli\xe8re et on \xe9conomise des ressources, du trafic et du temps)*\\r\\nComme l\'usage de webhook s\'est beaucoup r\xe9pandu dans les syst\xe8mes de CICD, on peut coupler \xe7a \xe0 de nombreux cas d\'usages.\\r\\n\\r\\nLes approvals, c\'est la petite perle qui manquait aux autres outils. En effet, j\'ai pr\xe9cis\xe9 que *mettre \xe0 jour des images : c\'est dangereux et il faut ne pas cibler des applications sensibles dans les mises \xe0 jour automatiques*. Et c\'est juste en r\xe9ponse \xe0 \xe7a que Keel a d\xe9velopp\xe9 les *approvals*.\\r\\n\\r\\n![Syst\xe8me d\'approval de Keel](https://keel.sh/img/docs/approvals.png)\\r\\n\\r\\nL\'id\xe9e est de donner l\'autorisation \xe0 Keel de mettre \xe0 jour le pod. On peut de ce fait choisir le moment et v\xe9rifier manuellement.\\r\\n\\r\\nJe trouve quand m\xeame dommage qu\'on ait Slack ou MSTeams d\'impos\xe9 pour les approvals, c\'est alors une fonctionnalit\xe9 que je n\'utiliserai pas.\\r\\n\\r\\n:::note Une UI\\r\\nAlors pour le moment, j\'utilise Keel sans son interface web, il se peut qu\'elle apporte de nouvelles fonctionnalit\xe9s, mais j\'aimerais \xe9viter une \xe9ni\xe8me interface \xe0 g\xe9rer.\\r\\n:::\\r\\n\\r\\n## Conclusion\\r\\n\\r\\nMettre \xe0 jour un conteneur, ce n\'est pas si simple que \xe7a quand on cherche l\'automatisation et la s\xe9curit\xe9. Si aujourd\'hui, je trouve que Keel correspond \xe0 mes besoins, j\'ai l\'impression que les outils se ressemblent sans proposer de r\xe9elles innovations. *(j\'envisage d\'aborder le principe de canary un jour)*\\r\\nJ\'esp\xe8re d\xe9couvrir de nouvelles solutions prochainement en esp\xe9rant qu\'elles collent plus \xe0 mes besoins."},{"id":"remarkable","metadata":{"permalink":"/TheBidouilleur.xyz/blog/remarkable","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2022-10-14-Remarkable/index.md","source":"@site/blog/2022-10-14-Remarkable/index.md","title":"Remarkable, une avanc\xe9e dans les prises de notes","description":"Introduction","date":"2022-10-14T00:00:00.000Z","formattedDate":"14 octobre 2022","tags":[{"label":"quotidien","permalink":"/TheBidouilleur.xyz/blog/tags/quotidien"}],"readingTime":3.68,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"remarkable","title":"Remarkable, une avanc\xe9e dans les prises de notes","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["quotidien"]},"prevItem":{"title":"Gardez vos clusters \xe0 jour","permalink":"/TheBidouilleur.xyz/blog/cluster-maj"},"nextItem":{"title":"NixOS, Ma nouvelle distribution","permalink":"/TheBidouilleur.xyz/blog/nixos"}},"content":"## Introduction\\n\\nR\xe9cemment, j\'ai suivi une formation de ~8 mois durant laquelle je n\'avais qu\'un clavier pour prendre des notes. Pour moi : aucun probl\xe8me, je ne demande que \xe7a : un support que j\'utilise personnellement et professionnellement.\\nJe tape plut\xf4t vite *(environ ~100 mots/minutes)*, j\'utilise des macros, et des raccourcis pour me simplifier la vie et si jamais j\'ai besoin d\'un sch\xe9ma : je prend mon temps sur [draw.io](https://draw.io).\\n\\nMais durant des travaux d\'\xe9quipes, j\'ai compris l\'importance *(et la puissance)* d\'un crayon et d\'une feuille de papier.\\nSans m\xe9thode de repr\xe9sentation comme des sch\xe9mas : on se perd vite.\\n\\n---\\n\\nJ\'ai donc achet\xe9 [*The Tablette*](https://fr.aliexpress.com/item/1005002840252915.html). Un jouet pour enfant fonctionnant comme n\'importe quel tableau-magique que l\'on avait en \xe9tant enfant.\\n![The Tablette](./TheTablette.png)\\n\\nEt ce jouet de 5\u20ac m\'a sauv\xe9 la vie plusieurs fois durant les projets \xe0 plusieurs. C\'\xe9tait suffisant pour \xe9viter l\'achat de papier durant ces 8 mois.\\n\\nJe garde toujours cette tablette sur mon bureau, mais j\'aimerai bien un syst\xe8me similaire mais gardant en m\xe9moire mes \xe9crits/dessins.\\n\\nC\'est ainsi que j\'ai achet\xe9...\\n\\n## La Remarkable\\n\\n![Remarkable 2](./1080.jpg)\\n\\nAyant un coll\xe8gue avec ce m\xeame bijou, j\'ai pu me renseigner \xe0 l\'avance *(et m\xeame tester)* cette *liseuse*. C\'est une tablette bas\xe9e sous Linux permettant de lire des PDF, et de prendre des notes via un stylet en imitant le plus possible la sensation du papier.\\n\\nLa prise en main demande un peu d\'entra\xeenement mais apr\xe8s quelques heures on peut se rendre compte de la puissance du jouet entre ses mains.\\n\\nOn peut mettre des pdf de son ordinateur vers la tablette via USB ou directement en d\xe9posant les fichiers sur le cloud Remarkable.\\n\\n:::info autres m\xe9thodes\\nJe crois qu\'il \xe9galement possible de d\xe9poser ses fichiers en wifi directement \u2026 jamais test\xe9\\n:::\\n\\nMais si vous utilisez une tablette remarkable, n\'oubliez pas que celle-ci va constamment se synchroniser avec les serveurs AWS de la marque en embarquant vos PDF.\\n\\nC\'est tout de m\xeame f\xe2cheux \u2026 Si seulement on avait une solution !\\n\\n### Remarkable Fake Cloud\\n\\nDans son fonctionnement, la remarkable est un **Linux** avec un daemon systemd (nomm\xe9 xochtl) qui va g\xe9rer l\'\xe9cran e-ink. Et une fois le mot de passe root obtenu dans les param\xe8tres *(apr\xe8s avoir lu que remarkable adore l\'open-source, d\'ailleurs c\'est agr\xe9able qu\'ils aient laiss\xe9s le plein-pouvoir sur la tablette)* on peut s\'amuser \xe0 faire pleins de choses\u2026\\n\\nLa tablette peut donc acqu\xe9rir de nouvelles fonctionnalit\xe9s et \xe9galement h\xe9berger quelques petites applications *(dans la limite du raisonnable)*.\\nEt moi ce qui m\'a int\xe9ress\xe9 l\xe0-dedans : c\'est la possibilit\xe9 d\'avoir son propre cloud remarkable pour que ses fichiers restent \xe0 la maison !\\n\\nSi \xe7a en int\xe9ressent certains, voici le [lien du GitHub avec le lien vers la documentation](https://github.com/ddvk/rmfakecloud).\\n\\n![RMFakeCloud](./rmfakecloud.png)\\n\\nL\'UI me permet d\'uploader des PDF qui sont synchronis\xe9s d\xe8s que la tablette est sur le WiFi. Et je peux m\xeame envoyer des fichiers depuis mon propre smtp (chose impossible nativement).\\n\\n:::info Pour trouver, il faut chercher\\nP\'tite parenth\xe8se sur l\'auteur (DDVK) du projet.\\nIl publie r\xe9guli\xe8rement des programmes pour rendre sa tablette + performante, + ergonomique mais il est tr\xe8s peu actif sur les forums / reddit, je vous invite \xe0 lui laisser une \xe9toile pour \xeatre inform\xe9 de ses nouveaux projets.\\n:::\\n\\nJe peux donc fanfaronner en voyant mon utilisateur \xeatre *admin* sur la tablette.. :)\\n![General settings](./generalsettings.png)\\n\\n## Conclusion\\n\\nOn a commenc\xe9 \xe0 aborder la prise de note de mani\xe8re diff\xe9rente \xe0 la sortie des iPads qui proposaient une exp\xe9rience entre le PC et le smartphone. Remarkable a cr\xe9\xe9 un produit incroyable en proposant une remise \xe0 plat de cette fonctionnalit\xe9 : pas de clavier, pas de souris.. juste un stylet et un \xe9cran *\\"papier\\"*.\\nEt comme la tablette est sous Linux, je suis s\xfbr que nous n\'avons pas fini d\'exploiter son potentiel en la bidouillant.  (Je n\'ai pas pr\xe9cis\xe9, mais nous avons un acc\xe8s root sur la RM2)\\n![Dat acc\xe8s root](./password.jpg)\\nHate de voir une remarkable dans un cluster Kubernetes !\\n\\n:::caution S\xe9curit\xe9\\n(Edit le 24/10)\\nAttention \xe0 ne rien stocker de confidentiel, la tablette n\'est pas chiffr\xe9e ! Bien que les acc\xe8s ne soient pas \xe9vident (Il faudrait d\xe9monter et dump la carte eMMC), il est possible de retrouver vos fichiers assez facilement.\\nSi le sujet vous interesse, voici un article qui en parle et porpose m\xeame une solution : <https://blog.redteam-pentesting.de/2021/remarkable-encryption/>\\n:::\\n\\n:::note\\n*(Attention, j\'ai pas parl\xe9 du prix.. restez accroch\xe9 si vous voulez vous l\'acheter)*\\n:::"},{"id":"nixos","metadata":{"permalink":"/TheBidouilleur.xyz/blog/nixos","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2022-09-26-NixOS.md","source":"@site/blog/2022-09-26-NixOS.md","title":"NixOS, Ma nouvelle distribution","description":"Introduction \xe0 Nix et NixOS","date":"2022-09-26T00:00:00.000Z","formattedDate":"26 septembre 2022","tags":[{"label":"NixOS","permalink":"/TheBidouilleur.xyz/blog/tags/nix-os"},{"label":"devops","permalink":"/TheBidouilleur.xyz/blog/tags/devops"}],"readingTime":4.705,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"nixos","title":"NixOS, Ma nouvelle distribution","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["NixOS","devops"]},"prevItem":{"title":"Remarkable, une avanc\xe9e dans les prises de notes","permalink":"/TheBidouilleur.xyz/blog/remarkable"},"nextItem":{"title":"Mes d\xe9buts \xe0 la gyroroue","permalink":"/TheBidouilleur.xyz/blog/gyroroue"}},"content":"## Introduction \xe0 Nix et NixOS\\n\\nNixOS est une distribution Linux sortie initialement en 2003 et cr\xe9\xe9e par ([Eelco Dolstra](https://www.linkedin.com/in/edolstra), un chercheur travaillant sur la cr\xe9ation d\'un syst\xe8me immuable.\\nCelle-ci se base sur le gestionnaire de paquet **Nix** qui permet de g\xe9rer la configuration du syst\xe8me \xe0 l\'aide de fichiers Nix (un langage de programmation similaire au Haskell).\\n\\nAinsi si je souhaite cr\xe9er un utilisateur *kiko* sur mon syst\xe8me, je peux \xe9crire ceci dans mon fichier *configuration.nix* (qui est le fichier de configuration de l\'OS initial)\\n\\n```haskell\\n  users.users.kiko = {\\n    isNormalUser = true;\\n    description = \\"kiko\\";\\n    extraGroups = [ \\"networkmanager\\" \\"wheel\\" \\"sudo\\" ];\\n    packages = with pkgs; [\\n      firefox\\n      vim\\n      neovim\\n      kubectl\\n      terraform\\n    ];\\n  };\\n ```\\n\\n Ou si je veux installer des programmes dans le syst\xe8me, je peux \xe9crire \xe7a :\\n\\n ```haskell\\n   environment.systemPackages = with pkgs; [\\n    vim\\n    wget\\n    htop\\n  ];\\n ```\\n\\nEt l\xe0, si vous \xeates habitu\xe9s aux gestionnaires de paquets normaux : vous avez remarqu\xe9 que mon utilisateur peut installer des librairies de mani\xe8re autonome.\\n\\nC\'est l\'un des points forts de Nix ! Des environnements \xe9ph\xe9m\xe8res, des librairies contradictoires qui peuvent cohabiter, et des utilisateurs enti\xe8rements ind\xe9pendants.\\n\\nNix *(nous parlons du gestionnaire de paquets)* autorise chaque utilisateur \xe0 avoir son propre PATH (ex: `/run/wrappers/bin:/home/kiko/.nix-profile/bin:/etc/profiles/per-user/kiko/bin:/nix/var/nix/profiles/default/bin:/run/current-system/sw/bin`).\\nMais il ne se limite pas qu\'\xe0 \xe7a : on peut cr\xe9er des environnements temporaires assez rapidement pour ne pas avoir \xe0 installer un programme et pouvoir s\'en servir ponctuellement.\\n\\n```bash\\n\u276f cowsay\\nThe program \'cowsay\' is not in your PATH. It is provided by several packages.\\nYou can make it available in an ephemeral shell by typing one of the following:\\n  nix-shell -p cowsay\\n  nix-shell -p neo-cowsay\\n\\n~ \\n\u276f nix-shell -p cowsay\\nthis path will be fetched (0.01 MiB download, 0.05 MiB unpacked):\\n  /nix/store/9647mfqndy0aa8qkniqa05qc9yi575ny-cowsay-3.04\\ncopying path \'/nix/store/9647mfqndy0aa8qkniqa05qc9yi575ny-cowsay-3.04\' from \'https://cache.nixos.org\'...\\n\\n~ via \u2744\ufe0f  impure (shell) \\n\u276f cowsay \\"J aime la bidouille\\"\\n _____________________ \\n< J aime la bidouille >\\n --------------------- \\n        \\\\   ^__^\\n         \\\\  (oo)\\\\_______\\n            (__)\\\\       )\\\\/\\\\\\n                ||----w |\\n                ||     ||\\n\\n~ via \u2744\ufe0f  impure (shell) \\n\u276f exit\\nexit\\n\\n~ took 44s \\n\u276f cowsay\\nThe program \'cowsay\' is not in your PATH. It is provided by several packages.\\nYou can make it available in an ephemeral shell by typing one of the following:\\n  nix-shell -p cowsay\\n  nix-shell -p neo-cowsay\\n\\n```\\n\\nNous avons cr\xe9\xe9 un environnement similaire au notre.. mais avec le binaire cowsay.\\n\\nMais nous avons parl\xe9 d\'environnement, alors cr\xe9ons un r\xe9el nix-shell plus complet...\\n\\n## Nix-Shell\\n\\nCr\xe9ons 2 fichiers.\\n\\n```haskell\\n# default.nix\\nwith (import <nixpkgs> {});\\nlet\\n  my-python-packages = python-packages: with python-packages; [\\n    requests\\n  ];\\n  python-with-my-packages = python3.withPackages my-python-packages;\\nin\\nmkShell {\\n  buildInputs = [\\n    python-with-my-packages\\n  ];\\n}\\n```\\n\\n```python app.py\\n# app.py\\nimport requests\\nresponse = requests.get(\'http://perdu.com\')\\nprint(response.content)\\n```\\n\\nLe fichier app.py est notre *tr\xe8s compl\xe8xe* application tandis que le fichier *default.nix* d\xe9crit l\'environnement requis.\\nSi je lance directement l\'application `python3 app.py` je me retrouve avec une erreur car je n\'ai pas install\xe9 python3 dans mon environnement..\\nJe peux cr\xe9er un nix-shell avec python et lancer mon app.py :\\n\\n```bash\\n\u276f nix-shell -p python38 # cr\xe9ation d\'un env avec python3.8\\n\\n/tmp/python via \ud83d\udc0d v3.8.13 via \u2744\ufe0f  impure (shell) \\n\u276f python3 app.py \\nTraceback (most recent call last):\\n  File \\"app.py\\", line 1, in <module>\\n    import requests\\nModuleNotFoundError: No module named \'requests\'\\n```\\n\\nMais nous nous retrouvons avec un autre probl\xe8me de d\xe9pendance..\\nIl est donc possible de cr\xe9er notre environnement \xe0 l\'aide du fichier **default.nix** qui contiendra Python et la librairie requests *(indispensable pour notre application*.\\n\\nPar d\xe9faut, nix-shell va chercher les fichiers nomm\xe9s default.nix dans notre r\xe9pertoire courant.\\n\\n```bash\\n/tmp/python via \ud83d\udc0d took 5m28s \\n\u276f nix-shell \\n\\n/tmp/python via \ud83d\udc0d v3.9.13 via \u2744\ufe0f  impure (nix-shell) \\n\u276f python3 app.py \\nb\\"<html><head><title>Vous Etes Perdu ?</title></head><body><h1>Perdu sur l\'Internet ?</h1><h2>Pas de panique, on va vous aider</h2><strong><pre>    * <----- vous &ecirc;tes ici</pre></strong></body></html>\\\\n\\"\\n```\\n\\nAvec cette m\xe9thode, il est possible d\'avoir plusieurs environnements pour lancer des applications diff\xe9rentes sans se soucier des effets de bords sur nos autres programmes.\\n\\n## Home-Manager\\n\\nSi jamais je r\xe9sume ce que nous avons vu :\\n\\n- Comment NixOS peut automatiser une configuration d\'OS *(On pourrait voir comment l\'installer de la m\xeame mani\xe8re)*\\n- Comment cr\xe9er des environnements ind\xe9pendants\\nIl reste un aspect essentiel au passage sur Nix: le d\xe9ploiement d\'une configuration utilisateur !\\n\\nNix permet de d\xe9ployer bien plus que quelques programmes, il existe une librairie d\'instruction pour faciliter la configuration/d\xe9ploiement d\'un logiciel.\\nPar exemple, \xe0 la cr\xe9ation de mon utilisateur quotidien, je dois parametrer Git avec mon nom, et mon mail avant chaque commit..\\n\\n```bash\\ngit config --global user.name \\"Toto\\"\\ngit config --global user.email \\"toto@toto.com\\"\\n```\\n\\nAvec Nix, je peux cr\xe9er un fichier dans mon home et garder cette configuration en dur :\\n\\n```haskell\\n  programs = {\\n    git = {\\n    enable = true;\\n    userName = \\"Toto\\";\\n    userEmail = \\"toto@toto.com\\";\\n    ignores =  [\\n      \\"*~\\"\\n      \\"*.swp\\"\\n     ];\\n    };\\n  };\\n```\\n\\nJ\'ai donc plusieurs fichiers Nix me permettant d\'installer mes programmes, de configurer Git, d\'installer mon EMacs-Doom avec mes param\xe8tres, de d\xe9poser mes dotfiles aux bons endroits.\\nPour l\'instant.. ma configuration est publique et disponible [ici](https://github.com/QJoly/home.nix), \xe0 voir ce que j\'en ferai \xe0 l\'avenir.. :)\\n\\n## Conclusion\\n\\nNix est vaste, tr\xe8s vaste, et il peut \xeatre compliqu\xe9 d\'en apprendre les bases. La communaut\xe9 est au courant du manque de documentation et fait beaucoup d\'effort pour donner une image agr\xe9able \xe0 Nix pour les d\xe9butants.\\nJe pense que Nix a un potentiel non-n\xe9gligeable pour les workstations/serveurs et pourrait m\xeame remplacer des outils de d\xe9ploiement d\'OS comme [Packer](https://packer.io).\\n\\nOn peut trouver les instructions / packages sur l\'incroyable site [search.nix.org](https://search.nixorg.org).\\nJe pense continuer \xe0 apprendre Nix jusqu\'\xe0 pouvoir moi-m\xeame contribuer \xe0 la communaut\xe9 et maintenir mes propres packages.\\n\\nSeule complexit\xe9 reste d\'apprendre le langage Nix !\\n*Mais avez-vous entendu parler de [Guix](https://guix.gnu.org/fr/).. ?*"},{"id":"gyroroue","metadata":{"permalink":"/TheBidouilleur.xyz/blog/gyroroue","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2022-08-10-Gyroroue/index.md","source":"@site/blog/2022-08-10-Gyroroue/index.md","title":"Mes d\xe9buts \xe0 la gyroroue","description":"J\'ai eu l\'occasion de tester de nombreux moyens de transport alternatifs pour des d\xe9placements quotidiens en ville (Trottinettes, V\xe9lo \xe9lectrique) mais aucun ne m\'a jamais autant tent\xe9 que la gyroroue !","date":"2022-08-10T00:00:00.000Z","formattedDate":"10 ao\xfbt 2022","tags":[{"label":"gyroroue","permalink":"/TheBidouilleur.xyz/blog/tags/gyroroue"},{"label":"vie quotidienne","permalink":"/TheBidouilleur.xyz/blog/tags/vie-quotidienne"}],"readingTime":4.59,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"gyroroue","title":"Mes d\xe9buts \xe0 la gyroroue","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["gyroroue","vie quotidienne"]},"prevItem":{"title":"NixOS, Ma nouvelle distribution","permalink":"/TheBidouilleur.xyz/blog/nixos"},"nextItem":{"title":"Longhorn, stockage distribu\xe9","permalink":"/TheBidouilleur.xyz/blog/longhorn"}},"content":"J\'ai eu l\'occasion de tester de nombreux moyens de transport alternatifs pour des d\xe9placements quotidiens en ville *(Trottinettes, V\xe9lo \xe9lectrique)* mais aucun ne m\'a jamais autant tent\xe9 que la **gyroroue** !\\nDepuis que j\'ai d\xe9couvert ce v\xe9hicule via les vid\xe9os de *Thomas*(**[Mr.Flex sur YouTube](https://www.youtube.com/c/MonsieurFlex)**), je fantasme sur l\'id\xe9e de pouvoir m\'en servir pour mes d\xe9placements en plus de pouvoir prendre le train, bus ou tram.\\n\\n<center>\\n<video>\\n<source src=\\"https://yewtu.be/embed/gig7h5cky4k\\" autoplay=\\"false\\"></source>\\n</video>\\n</center>\\n\\nJusque-l\xe0, je me d\xe9pla\xe7ais exclusivement en *v\xe9lo \xe9lectrique (avec environ ~10 km pour arriver au travail)*, seuls les deux-roues m\'int\xe9ressaient.\\nPuis, pendant mes vacances d\'\xe9t\xe9s de 2022, et \xe9tant donn\xe9 que j\'avais beaucoup de temps libre : je me suis dit \\"**Pourquoi pas ?**\\".\\nJe me suis donc procur\xe9 un appareil d\'occasion nomm\xe9 le **Kingsong ks-16b**.\\n![Image montrant la gyroroue](./kingsong-ks16b.jpg)\\n\\nUtiliser un appareil d\'occasion me rassure pas mal en sachant que je ne veux pas ab\xeemer du *neuf*, je r\xe9cup\xe8re cette roue avec un kilom\xe9trage de **265 km** et une batterie de **680Wh** *(me suffisant pour faire 40km)*.\\nJ\'ai essay\xe9 de faire au moins 20 minutes d\'apprentissages par jour pour me familiariser avec la b\xeate et esp\xe9rer la ma\xeetriser en moins d\'une semaine. *(Ce que les gens promettent parfois sur les r\xe9seaux.)*\\n\\nJe vais donc r\xe9sumer dans la prochaine partie mes avanc\xe9es dans l\'apprentissage de la gyroroue.\\n\\n## La longue route\\n\\n### Lundi 08/08\\n\\nPremi\xe8re s\xe9ance de *30min*. Je comprends \xe0 quel point on sous-estime le simple fait de monter sur la roue sans s\'appuyer sur un mur. J\'arrive \xe0 monter avec peine mais je suis surpris de pouvoir y arriver en si peu de temps.\\nJe peux d\xe9marrer et faire 1-2m sans tomber.\\n\\n### Mardi 09/08\\n\\nJe m\'accroche pendant une belle heure, objectif : *aller d\'un point A \xe0 un point B*. *(En l\'occurrence : traverser mon garage)*\\nJe prends une ceinture *(\xe0 mettre dans le trolley, \xe7a aide \xe0 ce que la roue ne tombe pas alors que je descends de la roue)* et je d\xe9marre pour faire une simple ligne droite. Aucun succ\xe8s, pas moyen de faire quelques m\xe8tres sans devoir mettre pied \xe0 terre.\\nJe ne d\xe9sesp\xe8re pas en r\xe9ussissant \xe0 faire *le pendule* contre un mur mais je suis un peu d\xe9\xe7u de ne pas pouvoir faire mieux.\\n\\n### Mercredi 10/08\\n\\nMercredi se d\xe9compose en 2 s\xe9ances d\'une heure chacune : matin, et apr\xe8s-midi.\\nLe matin, aucune avanc\xe9e. Des pendules, j\'avance contre un mur \xe0 droite, j\'avance *(un peu)* contre un mur \xe0 gauche mais insatisfait de ma progression.\\nJe me motive \xe0 faire une nouvelle s\xe9ance qui commence de la m\xeame mani\xe8re. *(Je traverse un peu mon garage en long mais incapable de me tenir droit)*\\nJe suis conscient que je dois aller vite et projeter mon regard, mais comment faire des dizaines de m\xe8tres si je n\'arrive pas \xe0 tenir droit sur 2-3m ? Et en d\xe9cidant de prendre une grande ligne droite et d\'appuyer sur le champignon : j\'arrive \xe0 me stabiliser **pendant** les 2-3 premiers m\xe8tres avant de continuer sur ma lanc\xe9e.\\nLa solution \xe0 comprendre : C\'est normal que je sois d\xe9s\xe9quilibr\xe9 au d\xe9but, c\'est justement *pour trouver ma stabilit\xe9* !\\nJe m\'amuse \xe0 faire 20\u2026 30 et 50 m\xe8tres, je n\'arrive pas \xe0 rouler droit, mais j\'avance, et c\'est ce qui compte.\\n\\n### Jeudi 11/08\\n\\nPlein de confiance, je reprends l\xe0 o\xf9 je me suis arr\xeat\xe9. Je file plus ou moins droit mais je n\'ai aucune difficult\xe9 \xe0 avancer.\\nJe m\'arr\xeate apr\xe8s 20min \xe0 cause d\'une douleur du pied droit, en sachant que je suis encore tr\xe8s crisp\xe9 : \xe7a ne m\'\xe9tonnerait pas que \xe7a soit \xe0 cause de mon manque de confiance.\\nJ\'arrive \xe0 faire un virage parfait *(pas saccad\xe9)*, h\xe2te de m\'entra\xeener \xe0 faire de belles courbes.\\n\\n### Samedi 13/08\\n\\nJ\'arrive \xe0 tourner \xe0 90\xb0 !\\nJ\'ai quelques douleurs musculaires, je prend quelques pauses entre chaque s\xe9ance pour \xe9viter de conserver ces douleurs.\\n\\n### Samedi 20/08\\n\\nApr\xe8s la bonne pause d\'une semaine, je profite d\'une sortie en famille pour faire de la gyroroue en parc.\\nJ\'ai roul\xe9 ~30min pour une distance d\'environ 4km (!). J\'arrivais \xe0 esquiver les groupes de personnes sans soucis et \xe0 atteindre une vitesse de **23km/h**.\\nIl me manque surement de la pr\xe9cision, mais je me sens vraiment en confiance.\\n\\nJ\'ai bien pens\xe9 \xe0 enregistrer le trajet via l\'application **Euc World** mais aucun moyen de le partager via le site officiel. Voici une capture d\'\xe9cran prise le jour-m\xeame.\\n![Trajet](./trajet.jpg)\\n\\n## Equipement\\n\\nJ\'envisage de me servir de la roue au quotidien. Et tout comme le v\xe9lo, je souhaite m\'imposer un certain \xe9quipement.\\nCasque int\xe9gral *(moto, moto-cross ou VTT)* et protection au dos seront mon minimum. J\'envisage aussi de mettre des genouill\xe8res et des protections aux coudes.\\n\\n### Casque\\n\\nJ\'ai beaucoup r\xe9fl\xe9chi \xe0 un casque int\xe9gral qui pourrait \xeatre confortable, pratique et s\xe9curisant.\\nMa premi\xe8re suggestion \xe9tait un casque de VTT/BMX qui recouvrirait le menton *(pour prot\xe9ger la machoire)* mais je me suis finalement orient\xe9 vers un casque moto classique. [Lien ici](https://www.amazon.fr/Casque-Speedway-modulaire-homologu%C3%A9-visi%C3%A8re-Blanc-Noir-Mat/dp/B07YZD2VXL/)\\n\\n![casque1](./casque1.jpg)\\n![casque2](./casque2.jpg)\\n![casque3](./casque3.jpg)\\n\\nN\'ayant jamais \xe9t\xe9 sur la moindre moto, je trouve ce casque un peu lourd mais j\'imagine que c\'est un poids correct pour un r\xe9el casque int\xe9gral. (1.6kg)\\n\\n## Assurance\\n\\nPour rouler sur route, je souhaite avoir une assurance pour prot\xe9ger les gens et me prot\xe9ger. Comme de nombreux Wheelers, ~~je pense me tourner vers Wizza~~\\n![mes tarifs](./assurance.png)\\n\\nEn contactant la MAIF (avec laquelle je poss\xe8de un contrat), j\'ai remarqu\xe9 qu\'ils avaient \xe9galement une offre pour les EDPMs, et donc les gyroroues.\\nLe prix est d\'environ 5\u20ac/mois."},{"id":"longhorn","metadata":{"permalink":"/TheBidouilleur.xyz/blog/longhorn","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2022-07-24-Longhorn/index.md","source":"@site/blog/2022-07-24-Longhorn/index.md","title":"Longhorn, stockage distribu\xe9","description":"Je suis en plein apprentissage de Kubernetes et des solutions pour g\xe9rer un cluster, je pratique sur un cluster de test sur lequel se trouve des petits conteneurs comme celui g\xe9rant thebidouilleur.xyz.","date":"2022-07-24T00:00:00.000Z","formattedDate":"24 juillet 2022","tags":[{"label":"kubernetes","permalink":"/TheBidouilleur.xyz/blog/tags/kubernetes"}],"readingTime":3.815,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"longhorn","title":"Longhorn, stockage distribu\xe9","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["kubernetes"]},"prevItem":{"title":"Mes d\xe9buts \xe0 la gyroroue","permalink":"/TheBidouilleur.xyz/blog/gyroroue"},"nextItem":{"title":"Mes d\xe9buts avec s3","permalink":"/TheBidouilleur.xyz/blog/s3contabo"}},"content":"Je suis en plein apprentissage de Kubernetes et des solutions pour g\xe9rer un cluster, je pratique sur un cluster de test sur lequel se trouve des petits conteneurs comme celui g\xe9rant *thebidouilleur.xyz*.\\r\\n\\r\\nLonghorn est un incontournable dans l\'univers Kubernetes *(et notamment **k3s**)*, je ne pouvais pas continuer \xe0 apprendre sans m\'attarder sur Longhorn.\\r\\nMais avant tout..\\r\\n\\r\\n## Qu\'est ce que Longhorn ?\\r\\n\\r\\nLonghorn se pr\xe9sente sous cette simple phrase :\\r\\n> Longhorn is a lightweight, reliable and easy-to-use distributed block storage system for Kubernetes.\\r\\n\\r\\nMais on peut aller un peu plus loin que cette simple phrase...\\r\\nLonghorn est syst\xe8me de centralisation de stockage entre les noeuds du cluster. Cela veut dire qu\'au lieu d\'utiliser un stockage externe comme un NFS *([ou autre, voici la liste des possibilit\xe9s](https://kubernetes.io/docs/concepts/storage/storage-classes/)* on va pouvoir utiliser garder les donn\xe9es en internes en utiliser les disques de nos machines pr\xe9sentes dans le cluster.\\r\\n\\r\\nEt si vous vous posez la m\xeame question que moi avant de connaitre : Longhorn va faire l\'\xe9quivalent d\'un RAID 0 en r\xe9plicant les donn\xe9es sur plusieurs noeuds pour \xe9viter que la perte d\'une machine entraine la perte de donn\xe9e.\\r\\n\\r\\n### Valeurs concr\xe8tes\\r\\n\\r\\nPar exemple, en comptant les disques de mes noeuds j\'ai 4x32Gio et 1x16Gio, soit 144Gio *( ou 132Go parce que Rancher utilise cette valeur )*.\\r\\nSur ces 132Go, j\'en occupe 36 actuellement, je peux en utiliser 56 sur Longhorn, et j\'en ai 40 r\xe9serv\xe9s aux r\xe9plicas. *(par d\xe9faut, Rancher g\xe9n\xe8re 3 replicas)*\\r\\n\\r\\n![panel longhorn](./dashboard_longhorn.png)\\r\\n\\r\\n## Comment d\xe9ployer Longhorn ?\\r\\n\\r\\n[*lien de la documentation officielle*](https://longhorn.io/docs/1.3.0/deploy/install/)\\r\\n\\r\\nOn peut d\xe9ployer Longhorn via Helm, le catalogue Rancher ou juste via Kubectl *(l\'option que j\'ai choisi)*\\r\\n\\r\\n  kubectl apply -f <https://raw.githubusercontent.com/longhorn/longhorn/v1.3.0/deploy/longhorn.yaml>\\r\\n\\r\\n:::note Version !\\r\\nAttention, cette commande va uniquement d\xe9ployer la version **1.3.0** de longhorn, pensez \xe0 r\xe9cup\xe9rer le dernier lien dans la documentation *(ou \xe9diter le lien que j\'ai mis)*\\r\\n\\r\\nPar mesure de s\xe9curit\xe9, il faut toujours v\xe9rifier ce que contient le yaml appliqu\xe9. Pensez \xe0 jeter un coup d\'oeil !\\r\\n:::\\r\\n\\r\\nIl faudra attendre que les pods se d\xe9ploient pour commencer \xe0 utiliser Longhorn.\\r\\nPour v\xe9rifier l\'\xe9tat en temps r\xe9el, la documentation vous propose la commande suivante:\\r\\n\\r\\n```bash\\r\\nkubectl get pods \\\\\\r\\n--namespace longhorn-system \\\\\\r\\n--watch\\r\\n```\\r\\n\\r\\nMais vous pouvez aussi bien utiliser **[k9s](https://k9scli.io/)**.\\r\\n\\r\\nUne fois OK, nous pourrons d\xe9ployer notre premier pod li\xe9 \xe0 longhorn.\\r\\n\\r\\n## Mise en pratique Longhorn\\r\\n\\r\\nVoici le manifest que l\'on va d\xe9ployer pour utiliser un volume dans longhorn:\\r\\n\\r\\n```yaml\\r\\napiVersion: v1\\r\\nkind: PersistentVolumeClaim\\r\\nmetadata:\\r\\n  name: longhorn-nginx-thebidouilleur-demo\\r\\nspec:\\r\\n  accessModes:\\r\\n    - ReadWriteOnce\\r\\n  storageClassName: longhorn\\r\\n  resources:\\r\\n    requests:\\r\\n      storage: 1Gi\\r\\n---\\r\\napiVersion: v1\\r\\nkind: Pod\\r\\nmetadata:\\r\\n  name: longhorn-thebidouilleur-demo\\r\\n  namespace: default\\r\\nspec:\\r\\n  containers:\\r\\n    - name: block-volume-test\\r\\n      image: nginx:stable-alpine\\r\\n      imagePullPolicy: IfNotPresent\\r\\n      volumeMounts:\\r\\n        - name: volume-longhorn\\r\\n          mountPath: \\"/usr/share/nginx/html\\"\\r\\n      ports:\\r\\n        - containerPort: 80\\r\\n  volumes:\\r\\n    - name: volume-longhorn\\r\\n      persistentVolumeClaim:\\r\\n        claimName: longhorn-nginx-thebidouilleur-demo \\r\\n```\\r\\n\\r\\n![Volume fonctionnel](./volume_ok.png)\\r\\n\\r\\nOn demande bien 1Gio \xe0 allouer \xe0 ce volume *(\xe7a influera sur le stockage allou\xe9 pour les replicas)* et on d\xe9ploie un nginx classique.\\r\\nUne fois d\xe9ploy\xe9, on va ouvrir un tunnel vers ce pod:\\r\\n\\r\\n```bash\\r\\nkubectl port-forward longhorn-thebidouilleur-demo 8080:80\\r\\n```\\r\\n\\r\\n:::tip\\r\\n En sachant que le tunnel doit s\'ouvrir sur votre poste **local** *(et non sur un des noeuds du cluster)*.\\r\\n Je vous invite \xe0 consulter [cette page](/docs/Kubernetes/kube-client) pour mettre kubectl sur votre machine.\\r\\n:::\\r\\n\\r\\net si on interroge le nginx, on tombe \xe9videmment sur une erreur 403 puisque le dossier longhorn est vide.\\r\\nOn va donc cr\xe9er notre fichier *index.html* directement depuis le pod.\\r\\n\\r\\n```bash\\r\\nkubectl exec longhorn-thebidouilleur-demo -i -t -- /bin/sh\\r\\necho \\"Hello World\\" > /usr/share/nginx/html/index.html\\r\\n```\\r\\n\\r\\nEt en r\xe9interrogeant notre pod : on tombe bien sur notre *Hello World*\\r\\n\\r\\n```bash\\r\\n[thebidouilleur@bertha ~]$ curl localhost:8080\\r\\nHello World\\r\\n```\\r\\n\\r\\nMaintenant.. c\'est bien mignon mais est-ce que nous gardons bien notre page en cas de suppression du pod ?\\r\\n\\r\\n```bash\\r\\nkubectl delete pod longhorn-thebidouilleur-demo\\r\\n```\\r\\n\\r\\nOn voit bien que sur le dashboard longhorn : le volume est pass\xe9 en deattach. *(ce qui veut dire que les donn\xe9es sont toujours pr\xe9sentes mais pas utilis\xe9es sur un pod)*\\r\\n\\r\\nOn va r\xe9-appliquer le m\xeame manifest pour recr\xe9er notre pod et refaire le m\xeame tunnel pour acc\xe9der au nginx\\r\\n\\r\\n```bash\\r\\n[thebidouilleur@bertha ~]$ curl localhost:8080\\r\\nHello World\\r\\n```\\r\\n\\r\\nNous retrouvons bel et bien notre page \\"Hello World\\"!\\r\\n\\r\\n## Conclusion\\r\\n\\r\\nLonghorn est un outil extremement simple d\'utilisation et permettant d\'\xe9viter de cr\xe9er une solution externe au cluster qui serait moins pratique \xe0 g\xe9rer. Je ne suis pas non-plus aller tr\xe8s loin dans ses fonctionnalit\xe9es et je vous laisse vous faire votre propre avis pour *longhorn en production* (et pour \xe7a, allez voir l\'article du site [*easyadmin.tech*](https://easyadmin.tech/longhorn-solution-volumes-kubernetes-production))\\r\\nLonghorn est le bienvenue dans mon Homelab de test et sera au centre de celui-ci !"},{"id":"s3contabo","metadata":{"permalink":"/TheBidouilleur.xyz/blog/s3contabo","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2022-06-26-Decouvrir-S3.md","source":"@site/blog/2022-06-26-Decouvrir-S3.md","title":"Mes d\xe9buts avec s3","description":"Introduction","date":"2022-06-26T00:00:00.000Z","formattedDate":"26 juin 2022","tags":[{"label":"kubernetes","permalink":"/TheBidouilleur.xyz/blog/tags/kubernetes"},{"label":"s3","permalink":"/TheBidouilleur.xyz/blog/tags/s-3"}],"readingTime":3.485,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"s3contabo","title":"Mes d\xe9buts avec s3","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["kubernetes","s3"]},"prevItem":{"title":"Longhorn, stockage distribu\xe9","permalink":"/TheBidouilleur.xyz/blog/longhorn"},"nextItem":{"title":"Pr\xe9sentation rapide de Packer","permalink":"/TheBidouilleur.xyz/blog/presentation-packer"}},"content":"## Introduction\\r\\n\\r\\nMon premier cluster Kubernetes est actuellement en ligne. C\'est encore un banc de test mais je l\'ai pris pr\xe9maturement en prod pour me forcer \xe0 l\'administrer de mani\xe8re s\xe9rieuse.\\r\\nAujourd\'hui *(et en esp\xe9rant que \xe7a ait d\xe9j\xe0 \xe9volu\xe9 lorsque vous lirez l\'article)*, mes pods utilisent un backend storage en NFS *(accessible sur mon NAS)*.\\r\\n\\r\\nJe veux que Kubernetes devienne mon manager de conteneur principal, je pense donc essentiel de d\xe9couvrir les particularit\xe9s g\xe9n\xe9rales de Kubernetes avant de commencer \xe0 y d\xe9ployer des applications un peu plus complexes.\\r\\nLe stockage S3 est souvent r\xe9f\xe9renc\xe9 comme pratique et utile avec Kubernetes.\\r\\n\\r\\n:::note remarque\\r\\n\\r\\nJ\'ai d\xe9j\xe0 utilis\xe9 [Minio](https://min.io/) dans un autre contexte. Mais *je ne compte pas* utiliser Minio pour d\xe9buter S3, je veux une solution d\xe9j\xe0 pr\xeate et g\xe9n\xe9rique *(apprendre la normalit\xe9 avant de se sp\xe9cialiser)*.\\r\\nInutile de pr\xe9ciser qu\'\xe0 l\'avenir : Minio sera ma solution principale en Object Storage.\\r\\n\\r\\n:::\\r\\n\\r\\nJe me suis donc orient\xe9 vers ~~AWS~~ [Contabo](https://contabo.com/en/object-storage/) qui propose une solution bien moins ch\xe8re que notre amis am\xe9ricain.\\r\\n*je paye 2,39\u20ac mensuels pour 250Go \xe0 la place des 5,75\u20ac demand\xe9s par Amazon.*\\r\\n\\r\\n## Qu\'est ce que le S3 ?\\r\\n\\r\\nPas besoin de faire une d\xe9finition bancale, voici directement l\'explication d\'Amazon :\\r\\n\\r\\n> Amazon Simple Storage Service (Amazon S3) est un service de stockage d\'objets qui offre une capacit\xe9 de mise \xe0 l\'\xe9chelle, une disponibilit\xe9 des donn\xe9es, une s\xe9curit\xe9 et des performances de pointe. Les clients de toutes les tailles et de tous les secteurs peuvent stocker et prot\xe9ger n\'importe quelle quantit\xe9 de donn\xe9es pour la quasi-totalit\xe9 des cas d\'utilisation, par exemple les lacs de donn\xe9es ainsi que les applications natives cloud et mobiles. Gr\xe2ce \xe0 des classes de stockage \xe9conomiques et \xe0 des fonctions de gestion faciles \xe0 utiliser, vous pouvez optimiser les co\xfbts, organiser les donn\xe9es et configurer des contr\xf4les d\'acc\xe8s affin\xe9s pour r\xe9pondre \xe0 des exigences op\xe9rationnelles, organisationnelles et de conformit\xe9 sp\xe9cifiques.\\r\\n\\r\\nTraduction : C\'est une m\xe9thode performante et rapide de transf\xe9rer des masses de donn\xe9es.\\r\\n\\r\\n## Et comment utiliser un stockage S3 ?\\r\\n\\r\\nIl convient avant tout de rappeler une notion importante dans l\'utilisation d\'un Cloud :\\r\\n![Un cloud n\'est que l\'ordinateur de quelqu\'un d\'autre](https://res.cloudinary.com/teepublic/image/private/s--ecoADk1u--/t_Preview/b_rgb:191919,c_lpad,f_jpg,h_630,q_90,w_1200/v1573678143/production/designs/6718252_0.jpg)\\r\\n\\r\\nSi vous ne stockez pas chez vous : considerez que vos donn\xe9es peuvent \xeatre visionn\xe9es sans votre concentement. (*Gouv, NSA, Mamie, Hacker etc...*)\\r\\nAlors il convient de **chiffrer vos donn\xe9es**.\\r\\n*Nous parlerons de Minio dans sur une autre page, une solution libre et open-source \xe0 h\xe9berger \xe0 la maison.*\\r\\n\\r\\nOn peut dialoguer avec un serveur S3 via de nombreux outils :\\r\\n\\r\\n- [cntb](https://docs.contabo.com/docs/products/Object-Storage/Tools/cntb/) (Outil officiel de contabo)\\r\\n- [aws-cli](https://aws.amazon.com/fr/cli/) (Outil d\'amazon mais compatible partout)\\r\\n- [rclone](https://rclone.org/)\\r\\n- [cyberduck](https://cyberduck.io/)\\r\\n- [s3-fuse](https://github.com/s3fs-fuse/s3fs-fuse)\\r\\net bien d\'autres..\\r\\n\\r\\nPour chiffrer mes donn\xe9es, je peux tr\xe8s bien passer par un simple script Bash chiffrant via GPG, puis envoyant les objets vers mon s3. Mais je n\'appr\xe9cie pas cette solution bancale, et autant utiliser une solution all-in-one comme **rclone** ou **restic**.\\r\\nEt c\'est effectivement avec **restic** que l\'on va chiffrer et push les donn\xe9es.\\r\\n\\r\\n## Chiffrer puis envoyer ses objets\\r\\n\\r\\nComme dit pr\xe9c\xe9demment : restic va \xeatre notre outil principal. Celui-ci fonctionne avec un syst\xe8me de \\"d\xe9pot\\"\\r\\n\\r\\n### Cr\xe9ation du d\xe9pot restic\\r\\n\\r\\nRestic permet de cr\xe9er un d\xe9pot *(qui peut \xeatre distant ou local)*, ce d\xe9pot chiffr\xe9 sera le lieu o\xf9 nous enverrons nos objets. Pour une premi\xe8re utilisation, on doit initialiser le d\xe9pot avec un **restic init** qui va cr\xe9er la structure de fichier, et d\xe9cider de la cl\xe9 de chiffrement. Une fois le d\xe9pot cr\xe9er, nous pourrons envoyer nos snapshots.  \\r\\n\\r\\nRestic autorise l\'utilisation de variables d\'environnement. On peut les d\xe9finir avant d\'utiliser restic.\\r\\n\\r\\n```bash\\r\\nexport AWS_ACCESS_KEY_ID=ab5u8coxxpvjxwq4zu74jifmvfvxfu2y\\r\\nexport AWS_SECRET_ACCESS_KEY=3hs9sopqqto9sf8hhet8i92di987qcs6\\r\\nbucketName=\\"thebidouilleur\\"        # variable s\xe9par\xe9e pour pouvoir la r\xe9utiliser ailleurs\\r\\nexport RESTIC_PASSWORD=Smudge9476       # Mot de passe de chiffrement \\r\\nexport RESTIC_REPOSITORY=\\"s3:https://eu2.contabostorage.com/${bucketName}\\"\\r\\n```\\r\\n\\r\\n*Ce ne sont pas mes vrais tokens, ne tentez pas d\'utiliser les m\xeames variables.*\\r\\n\\r\\nOn peut enfin laisser restic cr\xe9er notre d\xe9pot :\\r\\n\\r\\n```bash\\r\\nrestic init\\r\\n```\\r\\n\\r\\nSi aucune erreur n\'apparait ... f\xe9licitation ! On peut faire un *restic backup* pour cr\xe9er notre premi\xe8re snapshot !\\r\\n\\r\\nL\'usage d\'un S3 me permettra \xe9galement de sauvegarder mes conteneurs utilisant des volumes sur Longhorn. Je pourrai ainsi sauvegarder mes donn\xe9es et les restaurer sur un autre cluster."},{"id":"presentation-packer","metadata":{"permalink":"/TheBidouilleur.xyz/blog/presentation-packer","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2022-02-15-Presentation-Packer/index.md","source":"@site/blog/2022-02-15-Presentation-Packer/index.md","title":"Pr\xe9sentation rapide de Packer","description":"Cette page est tr\xe8s certainement obsol\xe8te. Prennez-la comme une base de travail, mais je ne peux pas garantir que tout fonctionne comme pr\xe9vu.","date":"2022-02-15T00:00:00.000Z","formattedDate":"15 f\xe9vrier 2022","tags":[{"label":"proxmox","permalink":"/TheBidouilleur.xyz/blog/tags/proxmox"},{"label":"packer","permalink":"/TheBidouilleur.xyz/blog/tags/packer"},{"label":"devops","permalink":"/TheBidouilleur.xyz/blog/tags/devops"}],"readingTime":5.415,"hasTruncateMarker":true,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"presentation-packer","title":"Pr\xe9sentation rapide de Packer","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["proxmox","packer","devops"]},"prevItem":{"title":"Mes d\xe9buts avec s3","permalink":"/TheBidouilleur.xyz/blog/s3contabo"},"nextItem":{"title":"Traefik, le reverse-proxy multi-provider","permalink":"/TheBidouilleur.xyz/blog/traefik"}},"content":":::info Un peu obsol\xe8te\\n\\nCette page est tr\xe8s certainement obsol\xe8te. Prennez-la comme une base de travail, mais je ne peux pas garantir que tout fonctionne comme pr\xe9vu.\\n\\n:::\\n\\n## Introduction\\n\\nBientot 7 ans que mon infra principale est sous *Proxmox*. C\'est l\'hyperviseur dans lequel j\'ai le plus confiance, et qui est \xe9galement **gratuit**. D\xe8s que je dois d\xe9ployer plus de 2 machines virtuelles et qu eje peux choisir l\'environnement : Proxmox sera mon premier choix.\\nIl propose une webui compl\xe8te et efficace, sans oublier l\'avantage des outils en cli.\\nJe n\'exclue pas qu\'un jour, je puisse changer d\'environnement. Et aujourd\'hui, j\'ai de nouveaux besoins dans mon hyperviseur : Automatiser un d\xe9ploiement complet de mon infrastructure, et comme je vais pas r\xe9installer **chaque** machine individuellement, je dois partir d\'une \\"*base*\\" qui servira de *template* pour que le syst\xe8me des machines soit pr\xe9-configur\xe9 comme je le souhaite.\\nEt cette fameuse template, je peux la faire \xe0 la main.... ou je peux la d\xe9ployer automatiquement via ****Packer**** !\\n\x3c!--truncate--\x3e\\n## Qu\'est ce que Packer?\\n\\nPacker est un outil d\xe9velopp\xe9 par *hashicorp (une entreprise qui fourni des programmes open-sources dans l\'univers du devops)* promettant de d\xe9ployer une machine virtuelle de template de mani\xe8re automatique.\\n\\nDans un cas pratique, Packer va se connecter \xe0 votre cloud-publique*(aws, oracle, scaleway)* / hyperviseur*(proxmox, qemu, esxi)* pour envoyer les instructions permettant d\'installer la machine virtuelle\\n\\nDans mon cas, je me suis amus\xe9 \xe0 d\xe9ployer des templates Alpine et debian sous Qemu et Proxmox.\\n\\n## Comment fonctionne Packer ?\\n\\nPacker poss\xe8de peu de d\xe9pendances, il a besoin d\'un hyperviseur/cloud publique, d\'un acc\xe8s \xe0 \\"l\'\xe9cran\\" de la machine virtuelle, et d\'un acc\xe8s *ssh* pour que Packer v\xe9rifie que l\'installation s\'est bien termin\xe9e (et \xe9galement pour lancer un outil de gestion de config comme **ansible**.\\n\\n### Un peu de vocabulaire\\n\\nOn appelle *Builder* l\'endroit o\xf9 Packer d\xe9ploie la VM, dans mon cas : c\'est Proxmox ! Et le terme *provisionner* d\xe9signe l\'outil qui va finir la configuration de la VM apr\xe8s Packer (*Ex: Ansible*).\\n\\n## Cr\xe9er notre premi\xe8re template\\n\\nPour permettre \xe0 Packer d\'automatiser l\'installation de notre machine virtuelle, nous devons lui fournir un fichier de configuration. Ce fichier est appel\xe9 **Preseed** dans le cas de Debian, **Answer-file** dans le cas d\'Alpine, **Kickstart** dans le cas de CentOS, et **Autoyast** dans le cas de Suse.\\n\\nCe fichier preseed sera rendu accessible par Packer via un serveur web temporaire. Notre machine virtuelle va donc t\xe9l\xe9charger ce fichier, et l\'utiliser pour installer le syst\xe8me d\'exploitation.\\n\\nCe fichier **Preseed** est d\xe9j\xe0 pr\xe9-\xe9crit, nous n\'avons qu\'\xe0 le modifier pour qu\'il corresponde \xe0 nos besoins. J\'utilise *Jinja2* pour g\xe9n\xe9rer mon fichier preseed, mais vous pouvez utiliser n\'importe quel outil de templating.\\n\\nLes variables pass\xe9es dans le fichier template sont attribu\xe9es \xe0 des variables d\'environnement, qui seront ensuite r\xe9cup\xe9r\xe9es par Packer. J\'utilise un script bash pour d\xe9finir ces variables.\\n\\n**/!\\\\ Le code source de mon Packer est disponible sur mon Github: [Debian Template Proxmox](https://github.com/QJoly/Debian-Template-Proxmox).**\\n\\nVoici mon fichier Packer r\xe9pondant aux questions:\\n\\n```json\\n{\\n    \\"description\\": \\"Debian 11 (bulleyes)\\",\\n    \\"variables\\": {\\n        \\"proxmox_url\\": \\"{{env `proxmox_url`}}\\",\\n        \\"proxmox_vm_storage\\": \\"{{env `proxmox_vm_storage`}}\\",\\n        \\"proxmox_iso_storage\\": \\"{{env `proxmox_iso_storage`}}\\",\\n        \\"proxmox_iso_checksum\\": \\"{{env `proxmox_iso_checksum`}}\\",\\n        \\"proxmox_node\\": \\"{{env `proxmox_node`}}\\",\\n        \\"proxmox_username\\": \\"{{env `proxmox_username`}}\\",\\n        \\"proxmox_iso_url\\": \\"{{env `proxmox_iso_url`}}\\",\\n        \\"proxmox_password\\": \\"{{env `proxmox_password`}}\\",\\n        \\"vm_id\\": \\"{{env `vm_id`}}\\",\\n        \\"vm_name\\": \\"{{env `vm_name`}}\\",\\n        \\"template_description\\": \\"{{env `template_description`}}\\",\\n        \\"vm_default_user\\": \\"{{env `vm_default_user`}}\\",\\n        \\"vm_cpu\\": \\"{{env `vm_cpu`}}\\",\\n        \\"vm_disk\\": \\"{{env `vm_disk`}}\\",\\n        \\"vm_memory\\": \\"{{env `vm_memory`}}\\",\\n        \\"ssh_username\\": \\"root\\",\\n        \\"ssh_password\\": \\"{{env `ssh_password`}}\\",\\n       \\"proxmox_storage\\": \\"{{env `proxmox_storage`}}\\",\\n       \\"proxmox_network\\": \\"{{env `proxmox_network`}}\\"\\n    },\\n    \\"sensitive-variables\\": [\\"proxmox_password\\", \\"ssh_password\\" ],\\n    \\"builders\\": [\\n        {\\n            \\"type\\": \\"proxmox\\",\\n            \\"proxmox_url\\":  \\"{{user `proxmox_url`}}\\",\\n            \\"node\\": \\"{{user `proxmox_node`}}\\",\\n            \\"insecure_skip_tls_verify\\": true,\\n            \\"username\\": \\"{{user `proxmox_username`}}\\",\\n            \\"password\\": \\"{{user `proxmox_password`}}\\",\\n            \\"template_description\\":\\"{{user `template_description`}}\\",\\n            \\"vm_id\\":  \\"{{user `vm_id`}}\\",\\n            \\"vm_name\\": \\"{{user `vm_name`}}\\",\\n            \\"memory\\": \\"{{user `vm_memory`}}\\",\\n            \\"cores\\": \\"{{user `vm_cpu`}}\\",\\n            \\"os\\": \\"l26\\",\\n\\n            \\"http_directory\\": \\"http\\",\\n\\n            \\"network_adapters\\": [\\n              {\\n                \\"model\\": \\"virtio\\",\\n                \\"bridge\\": \\"{{user `proxmox_network`}}\\"\\n              }\\n            ],\\n\\n            \\"disks\\": [\\n              {\\n                \\"type\\": \\"virtio\\",\\n                \\"disk_size\\": \\"{{user `vm_disk`}}\\",\\n                \\"storage_pool\\": \\"{{ user `proxmox_vm_storage`}}\\",\\n                \\"storage_pool_type\\": \\"directory\\",\\n                \\"format\\": \\"raw\\"\\n              }\\n            ],\\n            \\"qemu_agent\\": \\"true\\",\\n            \\"ssh_username\\": \\"{{user `ssh_username`}}\\",\\n            \\"ssh_password\\": \\"{{user `ssh_password`}}\\",\\n            \\"ssh_timeout\\": \\"30m\\",\\n            \\"iso_url\\": \\"{{user `proxmox_iso_url`}}\\",  \\n            \\"iso_storage_pool\\": \\"{{user `proxmox_iso_storage`}}\\",  \\n            \\"iso_checksum\\": \\"{{user `proxmox_iso_checksum`}}\\",\\n            \\"unmount_iso\\": true,\\n            \\"boot_wait\\": \\"10s\\",\\n            \\"boot_command\\": [\\n                \\"<esc><wait>\\",\\n                \\"auto <wait>\\",\\n                \\"console-keymaps-at/keymap=fr <wait>\\",\\n                \\"console-setup/ask_detect=false <wait>\\",\\n                \\"debconf/frontend=noninteractive <wait>\\",\\n                \\"debian-installer=fr_FR <wait>\\",\\n                \\"fb=false <wait>\\",\\n                \\"install <wait>\\",\\n              \\"packer_host={{ .HTTPIP }} <wait>\\",\\n              \\"packer_port={{ .HTTPPort }} <wait>\\",\\n                \\"kbd-chooser/method=fr <wait>\\",\\n                \\"keyboard-configuration/xkb-keymap=fr <wait>\\",\\n                \\"locale=fr_FR <wait>\\",\\n                \\"netcfg/get_hostname={{user `vm_name`}} <wait>\\",\\n                \\"preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/preseed.cfg <wait>\\",\\n                \\"<enter><wait>\\"\\n            ]\\n        }\\n    ],\\n    \\"provisioners\\": [\\n     {\\n      \\"type\\": \\"ansible\\",\\n      \\"ansible_env_vars\\": [ \\"ANSIBLE_FORCE_COLOR=1\\",\\"ANSIBLE_HOST_KEY_CHECKING=False\\" ],\\n      \\"playbook_file\\": \\"ansible/provisioning.yml\\"\\n     }\\n    ]\\n}\\n\\n\\n```\\n\\nNous allons rapidement d\xe9cortiquer la structure de ce Packer :\\n\\n- la partie \\"*Variable*\\" concerne les variables statiques et/ou variables d\'environnements *(On va voir \xe7a un peu plus tard)*\\n- *Provisionner* designe la commande que l\'on va lancer **apr\xe8s** la cr\xe9ation de la template\\n- et ce qui concerne la template elle-m\xeame (param\xe8tres, hyperviseurs...) est dans la partie *builder*\\n\\net la partie *boot_command* dans *Builder* est la liste de **toutes** les entr\xe9es au clavier que Packer va taper, On y place souvent le t\xe9l\xe9chargement du Preseed de Packer vers la VM.\\n\\n**petite explication sur le transfert de fichier de packer vers la template :** Packer, \xe0 son lancement, va cr\xe9er un serveur web avec le contenu du dossier *http/*, si on y place des fichiers \xe0 l\'interieur, on peut dire \xe0 packer de taper la commande suivante pour r\xe9cup\xe9rer des fichiers. (Ex: Preseed, cl\xe9s ssh etc..)\\n\\n```bash\\ncurl  http://{{ .HTTPIP }}:{{ .HTTPPort }}/fichier\\n```\\n\\nAinsi, dans cette installation d\'Alpine, je vais r\xe9pondre une \xe0 une aux questions, avec des timer pr\xe9-configur\xe9s (qui se comptent en seconde).\\nEt \xe0 la fin de l\'installation, nous lan\xe7ons le playbook **provisionning** qui me permet d\'installer les d\xe9pendances utiles \xe0 mes VMs.\\nIl n\'est pas necessaire d\'aller tr\xe8s loin dans le playbook : \xe7a reste une template.\\n\\n### Build.sh, Vault, et la cr\xe9ation de authorized_keys\\n\\nSi vous \xeates all\xe9 voir mon d\xe9pot (dont le lien est plus haut), vous avez surement vu le fichier **buid.sh**.\\n\\n```bash\\n#!/bin/bash\\n\\n# Param\xe8tres du Proxmox\\nexport proxmox_url=\\"https://IP_PROXMOX:8006/api2/json\\"\\nexport proxmox_node=\\"NOM_NOEUD\\"\\nexport proxmox_username=\\"root@pam\\"\\nexport proxmox_password=\\"Password\\" # Il est pr\xe9f\xe9rable d\'utiliser un utilisateur d\xe9di\xe9 \xe0 Proxmox\\nexport proxmox_vm_storage=\\"local-zfs\\"\\nexport proxmox_iso_url=\\"https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-11.6.0-amd64-netinst.iso\\"\\nexport proxmox_iso_checksum=\\"sha256:e482910626b30f9a7de9b0cc142c3d4a079fbfa96110083be1d0b473671ce08d\\"\\nexport proxmox_iso_storage=\\"local\\"\\nexport proxmox_network=\\"vmbr0\\"\\n\\n# Ressources attribu\xe9es \xe0 la VM\\nexport vm_id=9002\\nexport vm_name=\\"debian-11-tf\\"\\nexport template_description=\\"VM debian\\"\\nexport vm_default_user=\\"root\\"\\nexport vm_cpu=2\\nexport vm_disk=\\"8G\\"\\nexport vm_memory=1024\\n\\n# Param\xe8tres de la VM Template\\nexport prefix_disk=\\"vd\\"\\nexport ssh_username=\\"root\\"\\nexport ssh_password=\\"HugePassword\\"\\nexport userdeploy_password=\\"HugePassword\\"\\n\\nexport vm_keys=$(echo \\"$(cat ~/.ssh/id_ed25519.pub)\\")\\n\\n# set variables\\nj2 http/preseed.cfg.j2 > http/preseed.cfg\\n\\n#PACKER_LOG=1 packer build debian-test.json\\npacker build debian-11-amd64-proxmox.json\\n\\nrm -f http/preseed.cfg\\n\\n\\n```\\n\\nce fichier va donner les param\xe8tres essentiels \xe0 Packer. Les premi\xe8res variables sont les identifiants pour se connecter \xe0 proxmox\\n\\nEvidemment : l\'usage de vault n\'est pas du tout une contrainte, vous pouvez tr\xe8s bien mettre les identifiants en clair dans le fichier."},{"id":"traefik","metadata":{"permalink":"/TheBidouilleur.xyz/blog/traefik","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2022-01-26-Traefik/index.md","source":"@site/blog/2022-01-26-Traefik/index.md","title":"Traefik, le reverse-proxy multi-provider","description":"L\'ann\xe9e derni\xe8re, j\'ai dit que j\'appr\xe9ciais particuli\xe8rement Caddy qui \xe9tait simple, pratique, rapide et efficace. Caddy permet, \xe0 partir d\'une ligne aussi simple que :","date":"2022-01-26T00:00:00.000Z","formattedDate":"26 janvier 2022","tags":[{"label":"traefik","permalink":"/TheBidouilleur.xyz/blog/tags/traefik"},{"label":"docker","permalink":"/TheBidouilleur.xyz/blog/tags/docker"}],"readingTime":9.075,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"traefik","title":"Traefik, le reverse-proxy multi-provider","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["traefik","docker"]},"prevItem":{"title":"Pr\xe9sentation rapide de Packer","permalink":"/TheBidouilleur.xyz/blog/presentation-packer"},"nextItem":{"title":"Utilisation de Loki pour Centraliser les logs","permalink":"/TheBidouilleur.xyz/blog/loki-grafana"}},"content":"L\'ann\xe9e derni\xe8re, j\'ai dit que j\'appr\xe9ciais particuli\xe8rement **Caddy** qui \xe9tait simple, pratique, rapide et efficace. Caddy permet, \xe0 partir d\'une ligne aussi simple que :\\n\\n```json\\ndomain.tld {\\n  reverse_proxy 127.0.0.1:80\\n}\\n```\\n\\nEn plus de \xe7a, Caddy va constamment v\xe9rifier l\'expiration de vos certificats letsencrypt et de les renouveler automatiquement sans aucune interaction n\xe9c\xe9ssaire.\\nCaddy est \xe9galement facile \xe0 d\xe9ployer via Docker.\\n\\nQue demander de plus ?\\n\\n> De l\'automatisation\u202f?\\n\\nParfaitement, cher lecteur ! Vous m\'\xe9tonnez toujours !\\nJ\'ai donc cr\xe9\xe9 un R\xf4le Ansible g\xe9n\xe9rant ma configuration automatiquement \xe0 partir d\'un d\xe9p\xf4t Git avec les IP correspondant aux domaines que je souhaite utiliser.\\nMaintenant, \xe0 partir de \xe7a, je peux faire un script Bash r\xe9cup\xe9rant les ports de mes conteneurs, puis push sur mon Git les nouvelles redire\u2026.\\n> C\'est une usine \xe0 gaz\u2026\\n\\nEt vous avez raison ! Ce syst\xe8me est obsol\xe8te en quelques secondes lorsqu\'on utilise un syst\xe8me de *service discovery* permettant de r\xe9cup\xe9rer mes services et automatiser l\'ajout de ces services sur mon g\u2026. Bon d\'accord, toujours \\"*usine \xe0 gaz*\\" !\\n\\nPas le choix, je vais devoir en cons\xe9quence remplacer Caddy par quelque chose d\'autre. Et justement : je sais exactement le soft \xe0 utiliser.\\n\\nPlace \xe0 **Traefik**, le RP (Reverse proxy) multi-provider avec du service discovery.\\n\\nCet article sur **Traefik** est en cours de r\xe9daction, vous pouvez me suivre sur [twitter](https://twitter.com/TheBidouilleur) pour \xeatre au courant des prochaines \xe9critures ainsi que mon avancement dans mes projets !\\n\\n## Qu\'est-ce que Traefik ?\\n\\n![logo de traefik](https://i.imgur.com/XxOB7Fo.png)\\n\\nComme expliqu\xe9 juste au-dessus, Traefik est un reverse-proxy qui se d\xe9marque des autres par son systeme de provider et de middleware. Il ne r\xe9invente pas la roue, mais il est particuli\xe8rement efficace lorsque l\'on a un grand nombre de redirections \xe0 param\xe9trer ou que nous avons des r\xe8gles qui changent r\xe9guli\xe8rement.\\n\\n[*si vous ignorez ce qu\'est un reverse-proxy, je vous invite \xe0 consulter cet article de Ionos*](https://www.ionos.fr/digitalguide/serveur/know-how/quest-ce-quun-reverse-proxy-le-serveur-reverse-proxy/)\\n\\nTraefik n\'est **pas** fait pour vous si :\\n\\n- Vous n\'utilisez pas Docker, Kubernetes ou Consul\\n- Si vous avez peu de r\xe8gles (et surtout si elles sont statiques)\\n- Vous ne vous souciez pas d\'automatiser votre RP\\n\\net en revanche :\\nTraefik est **fait** pour vous si :\\n\\n- Vos services sont r\xe9partis sur de nombreuses machines\\n- Vous avez un Swarm / Kubernetes\\n\\nTraefik, ce n\'est pas pour tout le monde. Mais il y a de nombreux cas, et de nombreux domaines o\xf9 Traefik n\'est pas employ\xe9 alors qu\'il le devrait.\\n\\n## Comment fonctionne Traefik ?\\n\\nTraefik se base sur un syst\xe8me de **Provider**. Un Provider est un moyen de r\xe9cup\xe9rer les fameuses r\xe8gles \\"domaine -> IP\\" de mani\xe8re *automatique* (ou presque).\\nPar exemple, sur Caddy, notre provider (la mani\xe8re dont on r\xe9cup\xe8re notre configuration) est un simple fichier.\\nNotre seule mani\xe8re d\'automatiser Caddy se repose donc sur notre gestion de ce fichier. (le **Caddyfile**)\\n\\nEt c\'est justement cet unique provider qui va me faire pencher vers Traefik, qui poss\xe8de une grande liste de provider. Parmis ces providers, nous avons :\\n\\n- Docker\\n- Kubernetes / Rancher\\n- Redis\\n- des Fichiers classiques\\n- Une API Json\\n\\net en fonction des providers que l\'on accorde \xe0 Traefik(et du contenu), celui-ci va s\'adapter pour cr\xe9er les redirections de mani\xe8re automatique.\\n\\nNous allons tester \xe7a directement dans notre premier Traefik de test !\\nOn va avant-tout cr\xe9er le r\xe9seau Docker qui permettra \xe0 notre reverse-proxy d\'acc\xe9der aux conteneurs.\\n\\n```bash\\ndocker network create --driver=overlay traefik-net\\n```\\n\\net on va cr\xe9er notre docker-compose contenant Traefik:\\n\\n```yml\\nversion: \\"3.7\\"\\n\\nservices:\\n  traefik:\\n    image: \\"traefik:v2.5\\"\\n    container_name: \\"traefik\\"\\n    hostname: \\"traefik\\"\\n    networks:\\n      - traefik-net\\n    ports:\\n      - \\"80:80\\"\\n      - \\"443:443\\"\\n      - \\"8080:8080\\"\\n    volumes:\\n      - \\"/var/run/docker.sock:/var/run/docker.sock:ro\\"\\n      - \\"./config:/etc/traefik\\"\\nnetworks:\\n  traefik-net:\\n    external: true\\n    driver: overlay\\n    name: traefik-net\\n```\\n\\nPuis, dans un dossier **./config**, nous allons cr\xe9er le fichier **traefik.yml** qui va contenir notre configuration, et nos providers.\\n\\n```yml\\n# fichier traefik.yml, \xe0 mettre dans un dossier ./config\\n---\\nlog:\\n  level: \\"INFO\\"\\n  format: \\"common\\"\\n\\nproviders:\\n  docker:\\n    endpoint: \\"unix:///var/run/docker.sock\\"   # Provider Docker sur la machine locale\\n    exposedByDefault: false                   # Par d\xe9faut, les conteneurs ne poss\xe8dent pas de redirection\\n    network: \\"traefik-net\\"                    # Le r\xe9seau docker dans lequel il y aura.\\n    watch: true   \\n  file:\\n    filename: \\"/etc/traefik/dynamic.yml\\"      # Fichier contenant les r\xe8gles statiques\\n    watch: true                               # Va actualiser son contenu r\xe9guli\xe8rement pour mettre les r\xe8gles \xe0 jour\\n  providersThrottleDuration: 10               # Va actualiser les r\xe8gles chaque 10s\\n\\napi:                                          # Va rendre le Dashboard de Traefik accessible en http\\n  dashboard: true\\n  debug: false\\n  insecure: true\\n\\nentryPoints:                                  # Notre entr\xe9e, nous acceptons les requetes via https sur le port 80\\n  insecure:\\n    address: \\":80\\"\\n```\\n\\nEt notre fichier **dynamic.yml** qui contiendra nos r\xe8gles statiques :\\n\\n```yml\\nhttp:\\n  routers:\\n    helloworld-http:\\n      rule: \\"Host(`hello-world.tld`)\\" \\n      service: hello-world\\n      entryPoints:\\n        - insecure \\n\\n  services:\\n    hello-world:\\n      loadBalancer:\\n        servers:\\n           - url: \\"http://192.168.128.1:80\\"\\n```\\n\\nEn d\xe9marrant Traefik, on on remarque qu\'il va se mettre \xe0 jour chaque 10s en interrogeant le daemon Docker ainsi que le fichier.\\n\\nOn peut maintenant cr\xe9er notre premier conteneur \xe0 rajouter de cette mani\xe8re:\\n\\n```yml\\nversion: \\"3.7\\"\\n\\nservices:\\n  whoami:\\n    image: \\"containous/whoami\\"\\n    container_name: \\"whoami\\"\\n    hostname: \\"whoami\\"\\n    labels:\\n      - \\"traefik.enable=true\\"\\n      - \\"traefik.http.routers.whoami.entrypoints=insecure\\"\\n      - \\"traefik.http.routers.whoami.rule=Host(`whoami-tf.thebidouilleur.xyz`)\\"\\n      - \\"traefik.http.routers.whoami.tls.certresolver=letsencrypt\\"\\n\\nnetworks:\\n  default:\\n    external:\\n      name: traefik_net\\n\\n```\\n\\nNous avons alors cr\xe9\xe9 la r\xe8gle \\"whoami-tf.thebidouilleur.xyz\\" vers notre conteneur. On remarque que **nous n\'avons pas expos\xe9 de port**, Traefik va passer par le r\xe9seau interne *traefik_net* pour acc\xe9der au service.  C\'est une couche de s\xe9curit\xe9 \xe0 ne pas n\xe9gliger, vos services seront accessibles entre eux, et via le reverse-proxy.\\n\\n### Gestion des certificats https\\n\\nMaintenant, si vous passez par internet pour acc\xe9der \xe0 vos services.. C\'est peut-\xeatre pratique d\'avoir du https, et justement\xa0: Traefik g\xe8rera vos certificats de mani\xe8re automatique.\\nTraefik utilise l\'api gratuite de **LetsEncrypt** pour obtenir ses certificats, nous devons donc cr\xe9er une entr\xe9e d\xe9di\xe9e au https sur le port 443\\n\\nOn va donc mettre \xe0 jour notre configuration comme ceci\xa0:\\n\\n```yml\\nentryPoints:\\n  insecure:\\n    address: \\":80\\"\\n    http:\\n     redirections:\\n       entryPoint:\\n         to: secure\\n  secure:\\n    address: \\":443\\" \\n\\ncertificatesResolvers:\\n  letsencrypt:\\n    acme:\\n      email: \\"contact@thoughtless.eu\\"\\n      storage: \\"/etc/traefik/acme.json\\"\\n        #      caServer: \\"https://acme-staging-v02.api.letsencrypt.org/directory\\"\\n      keyType: \\"EC256\\"\\n      httpChallenge:\\n        entryPoint: \\"insecure\\"\\n```\\n\\nRed\xe9marrez Traefik, et celui-ci tentera de g\xe9n\xe9rer les certificats pour les domaines configur\xe9s !\\nEn acc\xe9dant \xe0 la page suivante\xa0: *<http://traefik:8080>* ,vous aurez un dashboard sur lequel vous verrez les routeurs \\"domaines d\'entr\xe9s\\", les \\"services\\" (redirections), et si ce symbole apparait : Traefik a bien appliqu\xe9 un certificat \xe0 ce router.\\n\\nIl est \xe9galement possible, avec un peu plus de configuration, d\'obtenir un certificat **Wildcard** (*certificat valide pour un domaine entier*)  avec Traefik. Pour le moment : je n\'ai pas besoin d\'un wildcard pour mes domaines.\\nSi le sujet vous int\xe9resse, voici un lien pour approfondir \xe7a : [Certificat Wildcard Traefik](https://computerz.solutions/traefik-ssl-wildcard-letsencrypt/)\\n\\nEt si on allait plus loin ?\\n\\n### Traefik et Swarm\\n\\nDepuis maintenant un peu plus d\'un an, mes conteneurs tournent sur un **cluster swarm** *(Si vous ne savez pas ce qu\'est un Swarm, je vous renvoie vers [cet article](https://thebidouilleur.xyz/posts/DockerSwarm/))*, et \xe7a peut complexifier les choses lorsque les labels (permettant \xe0 traefik de comprendre quel docker correspond \xe0 quel domaine) fonctionnent un peu diff\xe9remment.\\n\\nLes labels classiquent ne fonctionnent que sur la machine *hote* (par exemple: *Worker01*) mais si Traefik est sur la machine *Worker02*, les labels des conteneurs ne seront pas visibles.\\nPour palier \xe0 ce probl\xe8me, nous devons utiliser les m\xeames labels \u2026 dans la section **deploy** d\'un docker-compose.\\n\\nVoici le docker-compose whoami adapt\xe9 pour Swarm:\\n\\n```yaml\\nversion: \\"3.7\\"\\n\\nservices:\\n  whoami:\\n    image: \\"containous/whoami\\"\\n    container_name: \\"whoami\\"\\n    hostname: \\"whoami\\"\\n    deploy:\\n      labels:\\n        - \\"traefik.enable=true\\"\\n        - \\"traefik.http.routers.whoami.entrypoints=insecure\\"\\n        - \\"traefik.http.routers.whoami.rule=Host(`whoami-tf.thebidouilleur.xyz`)\\"\\n        - \\"traefik.http.routers.whoami.tls.certresolver=letsencrypt\\"\\n\\nnetworks:\\n  default:\\n    external:\\n      name: traefik_net\\n\\n```\\n\\n:::danger\\n\xe0 noter que cette structure ne fonctionne qu\'avec les docker-compose de version >3.7\\n:::\\n\\nEt pour que le conteneur traefik puisse lire ces labels.. Il doit \xeatre s\xfbr **un manager** du swarm. Nous devons donc \xe9galement mettre \xe0 jour notre docker-compose de Traefik :\\n\\n```yaml\\nversion: \\"3.7\\"\\n\\nservices:\\n  traefik:\\n    image: \\"traefik:v2.5\\"\\n    container_name: \\"traefik\\"\\n    hostname: \\"traefik\\"\\n    networks:\\n      - traefik-net\\n    ports:\\n      - \\"80:80\\"\\n      - \\"443:443\\"\\n      - \\"8080:8080\\"\\n    volumes:\\n      - \\"/var/run/docker.sock:/var/run/docker.sock:ro\\"\\n      - \\"./config:/etc/traefik\\"\\n    deploy:\\n      placement:\\n        constraints:\\n          - node.role == manager\\n      labels:\\n        - \\"traefik.enable=true\\"\\n        - \\"traefik.http.routers.traefik.entrypoints=secure\\"\\n        - \\"traefik.http.routers.traefik.rule=Host(`traefik.forky.ovh`)\\"\\n        - \\"traefik.http.routers.traefik.tls.certresolver=letsencrypt\\"\\n        - \\"traefik.http.services.traefik.loadbalancer.server.port=8080\\"\\n\\n\\nnetworks:\\n  traefik-net:\\n    external: true\\n    driver: overlay\\n    name: traefik-net\\n```\\n\\net nous pouvons le d\xe9ployer dans le swarm avec la commande\\n\\n```bash\\ndocker stack deploy -c docker-compose.yml traefik\\n```\\n\\nAutre sp\xe9cificit\xe9 du Swarm : Si le port d\'\xe9coute du service n\'est **pas 80**, il faudra pr\xe9ciser \xe0 Traefik le port \xe0 utiliser. C\'est ce qu\'on peut voir sur le docker-compose ci-dessus avec `traefik.http.services.traefik.loadbalancer.server.port`, \xe7a sera la derni\xe8re diff\xe9rence entre Traefik sur une machine standalone et un cluster.\\n\\nMaintenant, comment faire si nous voulons cr\xe9er une r\xe8gle automatique avec une machine qui n\'est **pas** dans notre swarm ?\\n\\n## Astuce pour machines isol\xe9es du cluster\\n\\nJusque-l\xe0, nous avons **2 providers** : le provider *Docker (pour le cluster)* et le provider *file* qui concerne les r\xe8gles statiques *(comme mon pfsense)*.\\nTraefik n\'accepte pas qu\'on ait *2 providers du m\xeame type*, ce qui veut dire que je ne peux pas surveiller le daemon docker de ma machine, ainsi que celui d\'une machine distante.\\n\\nPar exemple, mon *Gitea* est un conteneur qui n\'est pas dans mon swarm, et comme c\'est une machine que je redeploie r\xe9guli\xe8rement (et donc IP diff\xe9rente), j\'aimerai beaucoup laisser traefik faire son travail, mais en le laissant en m\xeame temps s\'occuper du swarm !\\n\\nC\'est l\xe0 que j\'ai d\xe9couvert un projet Github r\xe9pondant \xe0 ce besoin : [Traefik-pop](https://github.com/jittering/traefik-kop)\\n\\nLe sch\xe9ma ASCII du d\xe9p\xf4t parle de lui-m\xeame\xa0:\\n\\n```scheme\\n                        +---------------------+          +---------------------+\\n                        |                     |          |                     |\\n+---------+     :443    |  +---------+        |     :3000|  +------------+     |\\n|   WAN   |---------------\x3e| traefik |---------------------\x3e|    gitea   |     |\\n+---------+             |  +---------+        |          |  +------------+     |\\n                        |       |             |          |                     |\\n                        |  +---------+        |          |  +-------------+    |\\n                        |  |  redis  |<---------------------| traefik-kop |    |\\n                        |  +---------+        |          |  +-------------+    |\\n                        |             swarm   |          |             gitea   |\\n                        +---------------------+          +---------------------+\\n\\n```\\n\\n*J\'ai un peu modifi\xe9 le dessin pour qu\'il colle \xe0 mon exemple*.\\n\\nSi le dessin est un peu compliqu\xe9 : Nous allons cr\xe9er une base de donn\xe9e **Redis** *(C\'est plus facile pour moi de le mettre sur le swamr, mais th\xe9oriquement, vous pouvez la mettre o\xf9 vous voulez)*. Cette bdd, sera utilis\xe9e en tant que **provider Traefik** pour mettre \xe0 jour les r\xe8gles automatiquements !\\nLe docker-compose de mon gitea devient donc :\\n\\n```yml\\nversion: \\"3\\"\\nnetworks:\\n  gitea:\\n    external: false\\nservices:\\n  server:\\n    image: gitea/gitea:latest\\n    container_name: gitea\\n    environment:\\n      - USER_UID=1000\\n      - USER_GID=1000\\n      - GIT_DISCOVERY_ACROSS_FILESYSTEM=1\\n    restart: always\\n    networks:\\n      - gitea\\n    volumes:\\n      - ./gitea:/data\\n      - /etc/timezone:/etc/timezone:ro\\n      - /etc/localtime:/etc/localtime:ro\\n    ports:\\n      - \\"3000:3000\\"\\n      - \\"2200:22\\"\\n    labels:\\n      - \\"traefik.enable=true\\"\\n      - \\"traefik.http.routers.gitea.entrypoints=secure\\"\\n      - \\"traefik.http.routers.gitea.rule=Host(`git.thoughtless.eu`)\\"\\n      - \\"traefik.http.routers.gitea.tls.certresolver=letsencrypt\\"\\n      - \\"traefik.http.services.gitea.loadbalancer.server.port=3000\\"\\n```\\n\\nEn red\xe9marrant Traefik, et en acc\xe9dant au panel, on remarque un nouvel provider : *Redis*.\\n\\net en visualisant les r\xe8gles : nous avons bien notre r\xe8gle concernant Gitea !\\n\\n# Conclusion\\n\\nTraefik est un des meilleurs reverses-proxy pour les infrastructures grandissantes. Celui-ci s\'adapte \xe0 de nombreux besoins en proposant une couche d\'automatisation sans n\xe9gliger la gestion statique et manuelle.\\nCelui-ci demande un temps d\'adaptation qui sera vite rentabilis\xe9.\\n\\nJ\'esp\xe8re que ce reverse-proxy vous inspirera pour une infrastructure scalable simple et fiable.\\n\\nMerci de m\'avoir lu !"},{"id":"loki-grafana","metadata":{"permalink":"/TheBidouilleur.xyz/blog/loki-grafana","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2021-12-12-Loki.md","source":"@site/blog/2021-12-12-Loki.md","title":"Utilisation de Loki pour Centraliser les logs","description":"[ Cet article provient de mon ancien-blog, celui-ci sera \xe9galement disponible dans la partie \\"Documentation\\" du site ]","date":"2021-12-12T00:00:00.000Z","formattedDate":"12 d\xe9cembre 2021","tags":[{"label":"Docker","permalink":"/TheBidouilleur.xyz/blog/tags/docker"},{"label":"Logs","permalink":"/TheBidouilleur.xyz/blog/tags/logs"}],"readingTime":7.365,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"loki-grafana","title":"Utilisation de Loki pour Centraliser les logs","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["Docker","Logs"]},"prevItem":{"title":"Traefik, le reverse-proxy multi-provider","permalink":"/TheBidouilleur.xyz/blog/traefik"},"nextItem":{"title":"Mon voyage autour des loadbalancers","permalink":"/TheBidouilleur.xyz/blog/caddy"}},"content":"[ Cet article provient de mon ancien-blog, celui-ci sera \xe9galement disponible dans la partie \\"Documentation\\" du site ]\\n\\n## Introduction\\n\\nDepuis que jai commenc\xe9 l\'informatique (depuis un peu moins d\'une dizaine d\'ann\xe9e), je ne me suis jamais pr\xe9occup\xe9 de comment je visualisais mes logs. Un petit *view* par ci, un gros *grep* par l\xe0.. mais aucune gestion avanc\xe9e.\\n\\nJ\'ai bas\xe9 ma supervision sur Zabbix et Grafana qui m\'affichent les metriques de chaque machine virtuelle individuellement. Et m\xeame si c\'est bien pratique, je n\'ai presque aucun visuel sur l\'\xe9tat de mes applications !\\nJ\'ai donc d\xe9cid\xe9 de me renseigner sur Graylog et Elastic Search proposant une stack assez fiable et facile \xe0 mettre en place. Puis en voyant les ressources demand\xe9es, j\'ai remis ce besoin \xe0 \\"plus tard\\", et j\'ai remis \\"plus tard\\" \xe0 l\'ann\xe9e prochaine.. Et ainsi de suite !\\n\\n>> 2 ans plus tard\u2026\\n\\nAujourd\'hui *(Decembre 2021)*, une grosse faille 0day est d\xe9voil\xe9e concernant Log4J, et on ne parle pas d\'une \\"petite\\" faille, c\'est une bonne grosse RCE comme on les aime !\\n\\nJe ne suis pas concern\xe9 par Log4J, ce n\'est pas utilis\xe9 dans Jenkins, et je n\'ai aucune autre application bas\xe9e sur Java ouverte sur internet. Mais j\'aurai bien aim\xe9 savoir si mon serveur a \xe9t\xe9 scann\xe9 par les m\xeames IP que l\'on retrouve sur les listes \xe0 bannir.\\nEt c\'est avec cet \xe9venement que j\'ai d\xe9cid\xe9 de me renseigner sur *\\"Comment centraliser et visualiser ses logs?\\"*.\\n\\n## Le choix de la stack\\n\\nune stack est un groupement de logiciel permettant de r\xe9pondre \xe0 une fonction.\\nUn exemple classique est celui de la stack \\"G.I.T.\\" *(et non pas comme l\'outil de versioning!)* :\\n\\n- Grafana\\n- Influxdb\\n- Telegraf\\n\\nC\'est une stack qui permet de visualiser les mectriques de diff\xe9rentes machines, InfluxDB est la base de donn\xe9e stockant les informations, Telegraf est l\'agent qui permet aux machines d\'envoyer les m\xe9triques, et Grafana est le service web permettant de les visualiser.\\n\\nComme dit dans l\'introduction, j\'utilise Zabbix qui me permet de monitorer et collecter les metriques, et j\'y ai coupl\xe9 Grafana pour les afficher avec beaucoup de param\xe8trages.\\n\\nDans la centralisation de logs (et la visualisation), on parle souvent de la stack suivant:\\n\\n****ELK****:\\n\\n- ElasticSearch\\n- Logstash\\n- Kibana\\n\\nMais cette stack n\'est pas \xe0 d\xe9ployer dans n\'importe quel environnement, il est efficace, mais tr\xe8s lourd.\\n\\nDans ma qu\xeate pour trouver une stack permettant la centralisation de logs, j\'appr\xe9cierai utiliser des services que je dispose d\xe9j\xe0.  \\nEt voici le miracle \xe0 la mode de 2021 ! La stack GLP : **Grafana, Loki, Promtail**.\\n\\n## Stack GLP\\n\\nL\xe0 o\xf9 j\'appr\xe9cie particuli\xe8rement cette stack, c\'est qu\'il est l\xe9ger. Beaucoup\\nplus l\xe9ger que ELK qui, m\xeame si tr\xe8s efficace, demande beaucoup.\\n\\n![Extrait doc ELK](https://i.imgur.com/oWOwWsJ.png)\\n\\nDe m\xeame que Graylog2 + Elastic Search (une tr\xe8s bonne alternative) qui demande presque un serveur baremetal low-cost \xe0 lui seul.\\n![Extrait doc graylog](https://i.imgur.com/FkAq6sO.png)\\n\\nAlors que Grafana / Loki ne demanderont que 2Go pour fonctionner efficacement et sans contraintes. (Grand maximum, \xe0 mon \xe9chelle : j\'utiliserai beaucoup moins que 2Go)\\n\\n## Installer notre stack\\n\\nJe pars du principe que tout le monde sait installer un Grafana, c\'est souvent vers ce service que les gens commencent l\'auto-hebergement *(en m\xeame temps, les graphiques de grafana sont super sexy !)*.\\n\\nMais si vous n\'avez pas encore install\xe9 votre Grafana *(dans ce cas, quittez la salle et revenez plus tard)*, [voici un lien qui vous permettra de le faire assez rapidement](https://grafana.com/docs/grafana/latest/installation/)\\n\\nPar simplicit\xe9, je ne vais pas utiliser Docker dans cette installation.\\n\\n## Partie Loki\\n\\nJ\'ai install\xe9 Loki sur un conteneur LXC en suivant le guide sur le site officiel [ici](https://grafana.com/docs/loki/latest/installation/local/).\\nJe passe par systemd pour lancer l\'executable, et je cr\xe9\xe9 \xe0 l\'avance un fichier\\navec le minimum syndical (qui est disponible sur le github de Grafana)\\n\\n```yaml\\nauth_enabled: false\\n\\nserver:\\n  http_listen_port: 3100\\n  grpc_listen_port: 9096\\n\\ncommon:\\n  path_prefix: /tmp/loki\\n  storage:\\n    filesystem:\\n      chunks_directory: /tmp/loki/chunks\\n      rules_directory: /tmp/loki/rules\\n  replication_factor: 1\\n  ring:\\n    instance_addr: 127.0.0.1\\n    kvstore:\\n      store: inmemory\\n\\nschema_config:\\n  configs:\\n    - from: 2020-10-24\\n      store: boltdb-shipper\\n      object_store: filesystem\\n      schema: v11\\n      index:\\n        prefix: index_\\n        period: 24h\\n```\\n\\nJe n\'ai pas pris la peine d\'activer l\'authentification en sachant que je suis dans un LAN avec uniquement mes machines virtuelles. Je consid\xe8re pas que mon Loki comme un point sensible de mon infra.\\n\\nApr\xe8s seulement 2-3 minutes de configuration, notre Loki est d\xe9j\xe0 disponible !\\n\\nOn peut d\xe8s maintenant l\'ajouter en tant que *datasource* sur notre Grafana :\\n![Configuration de Loki sur Grafana](https://i.imgur.com/G3tWx1r.png)\\n\\n:::tip Contexte\\n\\n- J\'utilise localhost car la machine poss\xe9dant le grafana h\xe9berge \xe9galement le Loki.*\\n- Il se peut que Grafana rale un peu car notre base de donn\xe9e Loki est vide.\\n\\n:::\\n\\n## Partie Promtail\\n\\nPromtail est l\'agent qui va nous permettre d\'envoyer nos logs \xe0 Loki, j\'ai \xe9cris un role Ansible assez simple me permettant d\'installer notre agent sur de nombreuses machines en surveillant les logs provenant de Docker, varlog et syslog.\\n\\nVoici ma template Jinja2 \xe0 propos de ma configuration :\\n\\n```jinja2\\nserver:\\n  http_listen_port: 9080\\n  grpc_listen_port: 0\\n\\npositions:\\n  filename: /tmp/positions.yaml\\n\\nclients:\\n{% if loki_url is defined %}\\n  - url: {{ loki_url }}\\n{% endif %}\\n\\n\\nscrape_configs:\\n\\n\\n- job_name: authlog\\n  static_configs:\\n  - targets:\\n      - localhost\\n    labels:\\n{% if ansible_hostname is defined %}\\n      host: {{ ansible_hostname }}\\n{% endif %}\\n      job: authlog\\n      __path__: /var/log/auth.log\\n\\n\\n- job_name: syslog\\n  static_configs:\\n  - targets:\\n      - localhost\\n    labels:\\n{% if ansible_hostname is defined %}\\n      host: {{ ansible_hostname }}\\n{% endif %}\\n      job: syslog\\n      __path__: /var/log/syslog\\n\\n- job_name: Containers\\n  static_configs:\\n  - targets:\\n      - localhost\\n    labels:\\n{% if ansible_hostname is defined %}\\n      host: {{ ansible_hostname }}\\n{% endif %}\\n      job: containerslogs\\n      __path__: /var/lib/docker/containers/*/*-json.log\\n\\n- job_name: DaemonLog\\n  static_configs:\\n  - targets:\\n      - localhost\\n    labels:\\n{% if ansible_hostname is defined %}\\n      host: {{ ansible_hostname }}\\n{% endif %}\\n      job: daemon\\n      __path__: /var/log/daemon.log\\n\\n```\\n\\n*Si vous n\'\xeates pas \xe0 l\'aise avec des templates Jinja2, vous trouverez une version \\"pure\\" de la config [ici](https://github.com/QJoly/promtail-ansible)*\\n\\nVous pouvez bien evidemment adapter cette template \xe0 vos besoins. Mon id\xe9e premi\xe8re est d\'avoir une \\"base\\" que je peux mettre sur chaque machine *(en sachant aussi que si aucun log n\'est disponible, comme pour Docker, Promtail ne causera pas une erreur en ne trouvant pas les fichiers)*\\n\\nUne fois Promtail configur\xe9, on peut le d\xe9marrer :\\nvia l\'executable directement :\\n\\n```bash\\n/opt/promtail/promtail -config.file /opt/promtail/promtail-local-config.yaml\\n```\\n\\nou via systemd *(automatique si vous passez par mon playbook)* :  \\n`systemctl start promtail`\\n\\nUne fois cet agent un peu partout, on va directement aller s\'amuser sur Grafana !\\n\\n## Faire des requetes \xe0 Loki depuis Grafana\\n\\nOn va faire quelque chose d\'assez contre-intuitif : nous n\'allons pas commencer par faire un Dashboard : on va d\'abord tester nos requetes !\\n*Scrollez pas, je vous jure que c\'est la partie la plus fun !*\\n\\nSur Grafana, nous avons un onglet \\"Explore\\". Celui-ci va nous donner acc\xe8s \xe0 Loki en \xe9crivant des requetes, celles-ci sont assez simple, et surtout en utilisant l\'outil \\"click-o-drome\\" en d\xe9pliant le *Log Browser*\\n![Metric browser](https://i.imgur.com/UNL2s6m.png)\\n*Pardon j\'ai un chou\xefa avanc\xe9 sans vous...*\\n\\nAvec la template que je vous ai donn\xe9, vous aurez 4 jobs :\\n\\n- daemon\\n- authlog\\n- syslog\\n- containersjobs\\n\\nCes jobs permettent de trier les logs, on va tester \xe7a ensemble. Nous allons donc selectionner la machine *\\"Ansible\\"*, puis demander le job *\\"authlog\\"*.\\nJe commence par cliquer sur Ansible, puis Authlog. Grafana me proposera exactement si je souhaite choisir un fichier sp\xe9cifique. Si on ne pr\xe9cise pas de fichier(*filename*) Grafana prendra tous les fichiers *(donc aucune importance si nous n\'avons qu\'un seul fichier)*\\n\\n*vous remarquerez plus tard que d\xe8s notre 1ere selection, grafana va cacher les jobs/h\xf4te/fichier qui ne concernent pas notre d\xe9but de requete.*\\n\\n![Selections de param\xe8tres](https://i.imgur.com/MWFQCyl.png)\\n\\nEn validant notre requete (*bouton **show logs***)\\n\\n![Visualisation des logs de la machine \'Ansible\'](https://i.imgur.com/RCpb5GI.png)\\n\\nNous avons donc le r\xe9sultat de la requete vers Loki dans le lapse de temps configur\xe9 dans Grafana (1h pour moi).\\nMon authlog n\'est pas tr\xe8s interessant, et mon syslog est pollu\xe9 par beaucoup\\nde message pas tr\xe8s pertinents.\\n\\nNous allons donc commencer \xe0 **trier** nos logs !\\n\\nEn cliquant sur le petit \\"***?***\\" au dessus de notre requete, nous avons une\\n\\"cheatsheet\\" r\xe9sumant les fonctions basiques de Loki.\\nNous d\xe9couvrons comment faire une recherche exacte avec *|=*, comment ignorer\\nles lignes avec *!=* et comment utiliser une expression reguli\xe8re avec *|~*\\n\\nJe vous partage \xe9galement une cheatsheet un peu plus compl\xe8te que j\'ai trouv\xe9\\nsur un blog : [ici](https://megamorf.gitlab.io/cheat-sheets/loki/)\\n\\nAinsi, on peut directement obtenir des logs un peu plus color\xe9s qui nous permettrons de cibler l\'essentiel !\\n\\n![Log de la machine \'Drone-Runner\'](https://i.imgur.com/HzTwmwW.png)\\n\\n(L\'id\xe9e est de cibler les logs sympas avec les couleurs qui vont avec)\\n\\n## Conclusion\\n\\nSi on entend souvent parler de la suite ELK, \xe7a n\'est pas non-plus une raison\\npour s\'en servir \xe0 tout prix ! Loki est une bonne alternative proposant des\\nfonctionnalit\xe9es basiques qui suffiront pour la plupart.\\n\\n:::danger\\nCe projet est obsol\xe8te, il peut \xeatre risqu\xe9 de s\'en servir dans un environnement sensible.\\n:::"},{"id":"caddy","metadata":{"permalink":"/TheBidouilleur.xyz/blog/caddy","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2021-09-14-Caddy/index.md","source":"@site/blog/2021-09-14-Caddy/index.md","title":"Mon voyage autour des loadbalancers","description":"Changelog (janv 2022) - Aujourd\'hui, j\'ai remplac\xe9 Caddy par Traefik, \xe0 voir dans un futur article","date":"2021-09-14T00:00:00.000Z","formattedDate":"14 septembre 2021","tags":[{"label":"caddy","permalink":"/TheBidouilleur.xyz/blog/tags/caddy"},{"label":"reverse-proxy","permalink":"/TheBidouilleur.xyz/blog/tags/reverse-proxy"}],"readingTime":2.365,"hasTruncateMarker":false,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"caddy","title":"Mon voyage autour des loadbalancers","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["caddy","reverse-proxy"]},"prevItem":{"title":"Utilisation de Loki pour Centraliser les logs","permalink":"/TheBidouilleur.xyz/blog/loki-grafana"},"nextItem":{"title":"Pr\xe9sentation rapide de Docker-Swarm","permalink":"/TheBidouilleur.xyz/blog/presentation-docker-swarm"}},"content":"Changelog (janv 2022) - Aujourd\'hui, j\'ai remplac\xe9 Caddy par Traefik, \xe0 voir dans un futur article\\n\\nDans ma courte vie d\'informaticien, je n\'ai toujours eu qu\'une seule IP publique. Celle de mon serveur OVH sur lequel vous visualisez le site actuellement. Et en sachant que j\'ai de nombreux services Web, il m\'a rapidement \xe9t\xe9 n\xe9c\xe9ssaire de chercher les diff\xe9rents solutions permettant d\'installer un **Reverse Proxy** efficace qui servirait \xe0 rediriger mes utilisateurs vers l\'application voulue en fonction du domaine.\\n\\nDans ma longue qu\xeate (qui n\'est certainement pas achev\xe9e), j\'ai eu l\'occassion de tester de *nombreuses* solutions comme Haproxy, Apache2, Nginx et maintenant.. Caddy\\n\\nHaproxy a \xe9t\xe9 pour moi le plus facile et le plus pratique pour d\xe9marrer, bonne documentation, incorpore de nombreux outils permettant de v\xe9rifier la configuration, ou rajouter des authentifications. J\'ai \xe9t\xe9 satisfait durant quelques ann\xe9es.\\n\\n(Je ne compte pas Apache2, qui a \xe9t\xe9 pratique pour d\xe9buter sans installer un service d\xe9di\xe9 \xe0 mon besoin de redirection)\\n\\nEnsuite, j\'ai utilis\xe9 **aaPanel** (dont vous trouverez un article sur ce site) me permettant d\'avoir une toute un panel web pour mes sites et mes redirections ! *J\'ai abandonn\xe9 en sachant que c\'\xe9tait un syst\xe8me bien ficel\xe9 dans lequel j\'avais peu de libert\xe9 en terme d\'\xe9dition de config*\\n\\nPuis mon besoin inutile d\'avoir une interface Web m\'a men\xe9 vers **NPM** (*Nginx Proxy Manager*) dont vous trouverez plus d\'information [ici](https://nginxproxymanager.com/). Qui m\'\xe9tait tr\xe8s pratique en sachant qu\'il \xe9tait sous forme de conteneur Docker, et proposant une interface g\xe9rant la cr\xe9ation de redirection ainsi que le SSL, toujours chez **let\'s encrypt**.\\nMais \xe0 chaque expiration de certificat, NPM m\'obligeait \xe0 aller manuellement s\xe9l\xe9ctionner un-par-un chaque certificat \xe0 update : et \xe7a, c\'\xe9tait impensable en sachant le nombre de domaine que j\'ai cr\xe9\xe9.\\n\\nAujourd\'hui, mon attention se porte vers **Caddy** qui, pour l\'instant, correspond exactement \xe0 ce que je souhaite, et avec une simplicit\xe9 incroyable.\\n\\n## Caddy\\n\\nCaddy est, comme vous l\'aurez compris, un reverse-proxy assez polyvalent et tr\xe8s utilis\xe9 dans certains conteneurs Docker ! Celui-ci g\xe9n\xe8re automatiquement vos certificats (et configure les redirections automatiquement) sans aucun soucis avec Let\'s Encrypt. Caddy est assez l\xe9ger et vous \xe9vitera les configurations \xe0 ralonge, voici un exemple b\xeate :\\n\\n```yml\\nthoughtless.eu {\\n reverse_proxy 192.168.5.125:8062\\n log {\\n  output file /var/log/caddy/thoughtless.eu_access.log\\n }\\n}\\n```\\n\\nCette ligne cr\xe9era une redirection en reverse-proxy avec la configuration par d\xe9fault :\\n\\n- Caddy updatera / generera des certificats chaque fois que c\'est n\xe9c\xe9ssaire\\n- Il redirigera automatiquement les requetes en <http://> vers le <https://>\\n- Il \xe9criera des logs des acc\xe8s dans un fichier\\n\\nEn apache2 / Haproxy, \xe7a aurait pris un chou\xefa + de lignes.\\n\\nMais attendons de voir, Caddy est encore tr\xe8s neuf pour moi, et je suis s\xfbr que mon prochain besoin m\'orientera vers une autre solution telle que Traefik par exemple !\\n\\nBonne courage dans votre longue qu\xeate autour des reverse-proxy"},{"id":"presentation-docker-swarm","metadata":{"permalink":"/TheBidouilleur.xyz/blog/presentation-docker-swarm","editUrl":"https://github.com/QJoly/TheBidouilleur.xyz/tree/main/blog/2021-06-29-docker-swarm/index.md","source":"@site/blog/2021-06-29-docker-swarm/index.md","title":"Pr\xe9sentation rapide de Docker-Swarm","description":"Introduction","date":"2021-06-29T00:00:00.000Z","formattedDate":"29 juin 2021","tags":[{"label":"docker","permalink":"/TheBidouilleur.xyz/blog/tags/docker"},{"label":"swarm","permalink":"/TheBidouilleur.xyz/blog/tags/swarm"},{"label":"containers","permalink":"/TheBidouilleur.xyz/blog/tags/containers"},{"label":"cluster","permalink":"/TheBidouilleur.xyz/blog/tags/cluster"}],"readingTime":5.185,"hasTruncateMarker":true,"authors":[{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"}],"frontMatter":{"slug":"presentation-docker-swarm","title":"Pr\xe9sentation rapide de Docker-Swarm","authors":{"name":"TheBidouilleur","title":"Adorateur de trucs merdiques","url":"https://github.com/qjoly/","image_url":"https://avatars.githubusercontent.com/u/82603435?v=4","imageURL":"https://avatars.githubusercontent.com/u/82603435?v=4"},"tags":["docker","swarm","containers","cluster"]},"prevItem":{"title":"Mon voyage autour des loadbalancers","permalink":"/TheBidouilleur.xyz/blog/caddy"}},"content":"## Introduction\\n\\nLe monde de la conteneurisation a apport\xe9 de nombreuses choses dans l\'administration syst\xe8me, et a actualis\xe9 le concept de DevOps. Mais une des choses principales que nous apporte les conteneurs (et particuli\xe8rement Docker), c\'est **l\'automatisation**.\\nEt bien que Docker soit d\xe9j\xe0 complet avec le d\xe9ploiement de service, on peut aller un peu plus loin en automatisant la gestion des conteneurs ! Et pour r\xe9pondre \xe0 \xe7a : *Docker Inc.* propose un outil adapt\xe9 pour l\'orchestration automatique d\'instance : **Docker Swarm**.\\n\x3c!--truncate--\x3e\\n## Qu\'est ce que Docker Swarm ?\\n\\nComme dit pr\xe9c\xe9demment : Docker Swarm est un outil d\'orchestration. Avec cet outil, on peut g\xe9rer automatiquement nos conteneurs avec des r\xe8gles favorisant la Haute-disponibilit\xe9, et l\'\xe9volutivit\xe9 (Scalability) de vos services.\\nOn peut donc imaginer 2 sc\xe9narios qui sont enti\xe8rement compatibles :\\n\\n- Votre site a un pic de charge et n\xe9c\xe9ssite plusieurs conteneurs : Docker Swarm g\xe8re la replication et l\'\xe9quilibrage des charges\\n- Une machine h\xe9bergeant vos Dockers est en panne : Docker Swarm r\xe9plique vos conteneurs sur d\'autres machines.\\n\\nNous allons donc voir comment configurer \xe7a, et faire un p\'tit \xe9tat des lieux des fonctionnalit\xe9s propos\xe9es.\\n\\n## Cr\xe9er un cluster Swarm\\n\\n*Pour les tests, j\'utiliserai PWD (Play With Docker) pour m\'\xe9viter de monter \xe7a sur mon infra* :)\\n\\nJe dispose donc de 4 machines sous **Alpine** sur lesquelles je vais lancer d\xe9marrer un cluster Swarm.\\n\\nLa premi\xe8re \xe9tape est de d\xe9finir un Manager, celui-ci sera la t\xeate du cluster, ainsi que le points d\'acc\xe8s vers les diff\xe9rentes machines.\\nDans notre cas, on va faire tr\xe8s simple, le manager sera **Node1**.\\n\\nPour lancer le Swarm sur le manager, il suffit d\'utiliser la commande `docker swarm init`.\\n**Mais**, si votre syst\xe8me poss\xe8de un nombre de carte r\xe9seau sup\xe9rieur \xe0 1 *(Assez facile sur un serveur)*, il faut donner l\'IP d\'\xe9coute.\\nDans mon cas, l\'IP de l\'interface du r\xe9seau local (dans lequel les VMs communiquent) est *192.168.0.8*.\\nDonc la commande que je vais lancer est\\n\\n```bash\\ndocker swarm init --advertise-addr 192.168.0.8\\n```\\n\\nDocker me r\xe9pond ceci :\\n\\n```bash\\nSwarm initialized: current node (cdbgbq3q4jp1e6espusj48qm3) is now a manager.\\nTo add a worker to this swarm, run the following command:\\n    docker swarm join --token SWMTKN-1-5od5zuquln0kgkxpjybvcd45pctp4cp0l12srhdqe178ly8s2m-046hmuczuim8oddmk08gjd1fp 192.168.0.8:2377\\nTo add a manager to this swarm, run \'docker swarm join-token manager\' and follow the instructions.`\\n```\\n\\nEn r\xe9sum\xe9 : Le cluster est bien lanc\xe9, et Il nous donne la commande exacte pour rejoindre le cluster depuis d\'autres machines !\\nla Node1 \xe9tant le manager, il me suffit d\'executer la commande `docker swarm join` sur les node2-4.\\n\\n```bash\\ndocker swarm join --token SWMTKN-1-5od5zuquln0kgkxpjybvcd45pctp4cp0l12srhdqe178ly8s2m-046hmuczuim8oddmk08gjd1fp 192.168.0.8:2377\\n```\\n\\nUne fois termin\xe9, on peut regarder le r\xe9sultat sur le *manageur* avec la commande `docker node ls`\\n![Visualisation des nodes](https://i.imgur.com/2rgU3wm.png)\\n\\n## D\xe9ployer un service simple\\n\\nSi vous \xeates adepte de la commande `docker run` et que vous refusez docker-compose, sachez une chose : je ne vous aime pas.\\nComme vous m\'\xeates sympatique, voici une info qui ne servira pas : l\'\xe9quivalent de `docker run` en Swarm est `docker service`. Mais nous n\'allons pas aborder ce sujet dans cet article.\\n\\nOn va plutot utiliser l\'\xe9quivalent de `docker-compose`, qui est `docker stack`.\\nDonc avant-tout, voici le fichier .yml\\n\\n```yml\\nversion: \\"3\\"\\nservices:\\n  viz:\\n    image: dockersamples/visualizer\\n    volumes:\\n       - \\"/var/run/docker.sock:/var/run/docker.sock\\"\\n    ports:\\n       - \\"8080:8080\\"\\n    deploy:\\n      replicas: 1\\n      placement:\\n        constraints:\\n          - node.role == manager\\n```\\n\\nAvant de le d\xe9marrer, vous remarquerez surement la partie **deploy** qui permet de donner des indications \xe0 Swarm. On peut donc rajouter des contraintes pour deployer \xe7a sur le/les managers, demander \xe0 l\'hote de limiter l\'utilisation des ressources, ou g\xe9rer des r\xe9pliques pour l\'\xe9quilibrage des charges.\\n\\nCe premier conteneur servira \xe0 avoir un dashboard simple pour voir o\xf9 se positionnent les Dashboard, et \xe9viter de passer uniquement en CLI pour cette fonction.\\n\\nOn va donc d\xe9ployer ce compose avec la commande suivante:\\n\\n```bash\\ndocker stack deploy --compose-file docker-compose.yml swarm-visualiser\\n```\\n\\nUne fois la commande termin\xe9e, il suffit d\'ouvrir le serveur web du manager au port 8080.\\n![Webui du cluster avec un seul conteneur](https://i.imgur.com/sVKKmtj.png)\\n\\nOn a donc maintenant un panel Web pour suivre les mises \xe0 jour des conteneurs.\\n\\n## Gestion (simplifi\xe9e) des replicas\\n\\nLorsque l\'on acc\xe8de \xe0 un conteneur, on passe obligatoirement par le manager. Mais rien n\'empeche d\'\xeatre rediriger vers le noeud 3-4 en passant par le manager. C\'est pourquoi il est possible de r\xe9partir la charge (Load Balancing) avec un syst\xe8me similaire \xe0 HAProxy, c.a.d. en redirigeant les utilisateurs sur un autre conteneur \xe0 chaque chargement d\'un page.\\n\\nVoici un docker-compose cr\xe9ant automatiquement des replicas :\\n\\n```yml\\nversion: \'3.3\'\\nservices:\\n    hello-world:\\n        container_name: web-test\\n        ports:\\n            - \'80:8000\'\\n        image: crccheck/hello-world\\n        deploy:\\n          replicas: 4\\n```\\n\\nEt le r\xe9sultat est surprenant :\\n![WebUI avec le cluster](https://i.imgur.com/27a7V2i.png)\\n\\nNous pouvons \xe9galement adapter le nombre de replica..\\nEn le diminuant:\\n\\n`docker service scale hello-world_hello-world=2`\\n\\n![Webui avec le service hello-world scal\xe9 a 2](https://i.imgur.com/pf4Y1ih.png)\\n\\nOu en l\'augmentant:\\n\\n`docker service scale hello-world_hello-world=20`\\n\\n![conteneur Hello-world scal\xe9 \xe0 4](https://i.imgur.com/MW5uUOq.png)\\n\\n## Et la Haute-disponibilit\xe9, alors?\\n\\nJ\'ai ax\xe9 cet article dans les fonctions de Swarm, et comment les utiliser. Et si je n\'ai abord\xe9 ce point en priorit\xe9, c\'est parce que chaque conteneur cr\xe9\xe9 dans ce post est g\xe9r\xe9 en HA !\\nJe vais, par exemple, stopper de force la 10eme r\xe9plique du conteneur \\"Hello world\\", qui se trouve sur **Node1**. Et Celui-ci sera directement relanc\xe9,\\n![Conteneur Hello-World tu\xe9 de force](https://i.imgur.com/7Ni9NNG.png)\\n\\n> Okay, Mais docker pouvait d\xe9j\xe0 relancer automatiquement les conteneurs en cas de probl\xe8me, en quoi swarm est diff\xe9rent?\\n\\nEt pour r\xe9pondre \xe0 \xe7a, je vais me permettre de stopper le **node4**\\n![Node4 devenu injoignable](https://i.imgur.com/ejkzT7a.png)\\n\\nOn remarque que les autres noeuds se r\xe9partissent automatiquement, (et sans aucune intervention) les conteneurs stopp\xe9s. Et comme nous accedons aux services uniquement via les manageurs, ceux-ci ne redirigeront plus que vers les conteneurs d\xe9marr\xe9s.\\nUn des serveurs peut donc prendre feu, le service sera toujours redond\xe9, \xe9quilibr\xe9, et accessible.\\n\\n## Conclusion\\n\\nDocker-Swarm est un point d\'entr\xe9 vers les Clusters d\'applications qui sont d\'une complexit\xe9 incroyable sans un outil adapt\xe9. Swarm permet facilement de r\xe9pondre \xe0 des besoins particuliers, sans aucune comp\xe9tence technique.\\nDans un environnement de production, il est conseill\xe9 de s\'orienter vers Kubernetes ou Nomad qui sont des alternatives bien plus compl\xe8tes et puissantes.\\n\\nJe vous encourage \xe0 essayer ce genre de technologie qui gouverneront notre monde de demain !\\n\\nMerci d\'avoir lu"}]}')}}]);