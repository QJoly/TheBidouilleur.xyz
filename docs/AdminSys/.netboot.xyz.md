---
slug: netbootxyz
title: Boot PXE simplifié avec netboot 
---

## Qu’est ce que le PXE ?  

Avant de démarrer le technique, petite explication des termes : 
- Le **PXE** *(Preboot Execution Environment)* est une technologie permettant d’amorcer une partition de démarrage via le réseau *(et notamment via le protocole TFTP)*. 
- L’**IPXE** est un fork de PXE proposant des fonctionnalités supplémentaires comme le chiffrement, l’usage du **SAN** / **HTTP** comme protocole, et permet d’utiliser un langage de scripting ! 


Voici un exemple de fichier `.ipxe` pour démarrer sur un Debian 9 *(Source : [Dépôt Github](https://github.com/AdrianKoshka/ipxe-scripts/blob/master/boot/linux/debian.ipxe))*
```bash
isset ${server-ip} || set server-ip 192.168.1.137

:start
#console --picture http://boot.ipxe.org/ipxe.png
menu debian
item --gap --             ---------------------- Net installer -----------------------------
item --key 3 Debian9_x86 Debian 9 (3)2-bit net install
item --key 6 Debian9_x86_64 Debian 9 (6)4-bit net install
item --gap --             ------------------------- Options --------------------------------
item --key g goback (G)o back to previous menu
choose version && goto ${version} || goto start

:Debian9_x86
echo Booting Debian 9 32-bit
kernel http://deb.debian.org/debian/dists/stretch/main/installer-i386/current/images/netboot/debian-installer/i386/linux initrd=initrd.gz
initrd http://deb.debian.org/debian/dists/stretch/main/installer-i386/current/images/netboot/debian-installer/i386/initrd.gz
boot || imgfree
goto start

:Debian9_x86_64
echo Booting Debian 9 64-bit
kernel http://deb.debian.org/debian/dists/stretch/main/installer-amd64/current/images/netboot/debian-installer/amd64/linux initrd=initrd.gz
initrd http://deb.debian.org/debian/dists/stretch/main/installer-amd64/current/images/netboot/debian-installer/amd64/initrd.gz
boot || imgfree
goto start

:goback
chain http://${server-ip}/boot/linux.ipxe
```

## NetBoot.xyz

NetBoot est un site proposant de démarrer sur un menu sur lequel nous allons choisir différents systèmes sur lequel booter. (*via des scripts ipxe*)
Cette solution est pratique lorsque nous n’avons pas moyen d’avoir une clé USB bootable et que l’on doit installer un système *from scratch*.

Sur certains systèmes, il est possible de fournir des scripts d’installations *(ex: preseed pour debian, kickstart pour rockylinux)*.

NetBoot permet d’utiliser plusieurs méthodes d’amorçage sur une machine *(TFTP, via ISO, IPXE, depuis GRUB)*, vous trouverez ces méthodes [ici](https://netboot.xyz/docs/category/booting-methods)

en IPXE voici les commandes à taper: 
```bash
dhcp
chain --autofree https://boot.netboot.xyz
```

Mais si 